(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ra(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Et={},Fi=[],Pe=()=>{},Zh=()=>!1,en=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),na=e=>e.startsWith("onUpdate:"),zt=Object.assign,sa=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},tc=Object.prototype.hasOwnProperty,St=(e,t)=>tc.call(e,t),ot=Array.isArray,Ri=e=>rn(e)==="[object Map]",al=e=>rn(e)==="[object Set]",lt=e=>typeof e=="function",Ut=e=>typeof e=="string",Xe=e=>typeof e=="symbol",Mt=e=>e!==null&&typeof e=="object",ol=e=>(Mt(e)||lt(e))&&lt(e.then)&&lt(e.catch),ll=Object.prototype.toString,rn=e=>ll.call(e),ec=e=>rn(e).slice(8,-1),hl=e=>rn(e)==="[object Object]",aa=e=>Ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ir=ra(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nn=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},ic=/-(\w)/g,ue=nn(e=>e.replace(ic,(t,i)=>i?i.toUpperCase():"")),rc=/\B([A-Z])/g,ui=nn(e=>e.replace(rc,"-$1").toLowerCase()),sn=nn(e=>e.charAt(0).toUpperCase()+e.slice(1)),cs=nn(e=>e?`on${sn(e)}`:""),ze=(e,t)=>!Object.is(e,t),kr=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},cl=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},Ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $a;const ul=()=>$a||($a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gr(e){if(ot(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=Ut(r)?oc(r):gr(r);if(n)for(const s in n)t[s]=n[s]}return t}else if(Ut(e)||Mt(e))return e}const nc=/;(?![^(]*\))/g,sc=/:([^]+)/,ac=/\/\*[^]*?\*\//g;function oc(e){const t={};return e.replace(ac,"").split(nc).forEach(i=>{if(i){const r=i.split(sc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function an(e){let t="";if(Ut(e))t=e;else if(ot(e))for(let i=0;i<e.length;i++){const r=an(e[i]);r&&(t+=r+" ")}else if(Mt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const lc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hc=ra(lc);function dl(e){return!!e||e===""}const fl=e=>!!(e&&e.__v_isRef===!0),Ls=e=>Ut(e)?e:e==null?"":ot(e)||Mt(e)&&(e.toString===ll||!lt(e.toString))?fl(e)?Ls(e.value):JSON.stringify(e,gl,2):String(e),gl=(e,t)=>fl(t)?gl(e,t.value):Ri(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n],s)=>(i[us(r,s)+" =>"]=n,i),{})}:al(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>us(i))}:Xe(t)?us(t):Mt(t)&&!ot(t)&&!hl(t)?String(t):t,us=(e,t="")=>{var i;return Xe(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class cc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=Zt;try{return Zt=this,t()}finally{Zt=i}}}on(){Zt=this}off(){Zt=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function pl(){return Zt}function uc(e,t=!1){Zt&&Zt.cleanups.push(e)}let Rt;const ds=new WeakSet;class vl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zt&&Zt.active&&Zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ds.has(this)&&(ds.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ml(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ha(this),yl(this);const t=Rt,i=pe;Rt=this,pe=!0;try{return this.fn()}finally{bl(this),Rt=t,pe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ha(t);this.deps=this.depsTail=void 0,Ha(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ds.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gs(this)&&this.run()}get dirty(){return Gs(this)}}let _l=0,rr,nr;function ml(e,t=!1){if(e.flags|=8,t){e.next=nr,nr=e;return}e.next=rr,rr=e}function oa(){_l++}function la(){if(--_l>0)return;if(nr){let t=nr;for(nr=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;rr;){let t=rr;for(rr=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=i}}if(e)throw e}function yl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function bl(e){let t,i=e.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),ha(r),dc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=i}function Gs(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Sl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Sl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===or))return;e.globalVersion=or;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Gs(e)){e.flags&=-3;return}const i=Rt,r=pe;Rt=e,pe=!0;try{yl(e);const n=e.fn(e._value);(t.version===0||ze(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Rt=i,pe=r,bl(e),e.flags&=-3}}function ha(e,t=!1){const{dep:i,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r),!i.subs&&i.computed){i.computed.flags&=-5;for(let s=i.computed.deps;s;s=s.nextDep)ha(s,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function dc(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let pe=!0;const Cl=[];function qe(){Cl.push(pe),pe=!1}function Je(){const e=Cl.pop();pe=e===void 0?!0:e}function Ha(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Rt;Rt=void 0;try{t()}finally{Rt=i}}}let or=0;class fc{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ca{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Rt||!pe||Rt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Rt)i=this.activeLink=new fc(Rt,this),Rt.deps?(i.prevDep=Rt.depsTail,Rt.depsTail.nextDep=i,Rt.depsTail=i):Rt.deps=Rt.depsTail=i,wl(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=Rt.depsTail,i.nextDep=void 0,Rt.depsTail.nextDep=i,Rt.depsTail=i,Rt.deps===i&&(Rt.deps=r)}return i}trigger(t){this.version++,or++,this.notify(t)}notify(t){oa();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{la()}}}function wl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)wl(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Is=new WeakMap,li=Symbol(""),Us=Symbol(""),lr=Symbol("");function qt(e,t,i){if(pe&&Rt){let r=Is.get(e);r||Is.set(e,r=new Map);let n=r.get(i);n||(r.set(i,n=new ca),n.map=r,n.key=i),n.track()}}function ke(e,t,i,r,n,s){const a=Is.get(e);if(!a){or++;return}const o=l=>{l&&l.trigger()};if(oa(),t==="clear")a.forEach(o);else{const l=ot(e),h=l&&aa(i);if(l&&i==="length"){const c=Number(r);a.forEach((p,f)=>{(f==="length"||f===lr||!Xe(f)&&f>=c)&&o(p)})}else switch(i!==void 0&&o(a.get(i)),h&&o(a.get(lr)),t){case"add":l?h&&o(a.get("length")):(o(a.get(li)),Ri(e)&&o(a.get(Us)));break;case"delete":l||(o(a.get(li)),Ri(e)&&o(a.get(Us)));break;case"set":Ri(e)&&o(a.get(li));break}}la()}function Si(e){const t=Ct(e);return t===e?t:(qt(t,"iterate",lr),ce(e)?t:t.map(Xt))}function on(e){return qt(e=Ct(e),"iterate",lr),e}const gc={__proto__:null,[Symbol.iterator](){return fs(this,Symbol.iterator,Xt)},concat(...e){return Si(this).concat(...e.map(t=>ot(t)?Si(t):t))},entries(){return fs(this,"entries",e=>(e[1]=Xt(e[1]),e))},every(e,t){return Fe(this,"every",e,t,void 0,arguments)},filter(e,t){return Fe(this,"filter",e,t,i=>i.map(Xt),arguments)},find(e,t){return Fe(this,"find",e,t,Xt,arguments)},findIndex(e,t){return Fe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Fe(this,"findLast",e,t,Xt,arguments)},findLastIndex(e,t){return Fe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Fe(this,"forEach",e,t,void 0,arguments)},includes(...e){return gs(this,"includes",e)},indexOf(...e){return gs(this,"indexOf",e)},join(e){return Si(this).join(e)},lastIndexOf(...e){return gs(this,"lastIndexOf",e)},map(e,t){return Fe(this,"map",e,t,void 0,arguments)},pop(){return Yi(this,"pop")},push(...e){return Yi(this,"push",e)},reduce(e,...t){return Wa(this,"reduce",e,t)},reduceRight(e,...t){return Wa(this,"reduceRight",e,t)},shift(){return Yi(this,"shift")},some(e,t){return Fe(this,"some",e,t,void 0,arguments)},splice(...e){return Yi(this,"splice",e)},toReversed(){return Si(this).toReversed()},toSorted(e){return Si(this).toSorted(e)},toSpliced(...e){return Si(this).toSpliced(...e)},unshift(...e){return Yi(this,"unshift",e)},values(){return fs(this,"values",Xt)}};function fs(e,t,i){const r=on(e),n=r[t]();return r!==e&&!ce(e)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=i(s.value)),s}),n}const pc=Array.prototype;function Fe(e,t,i,r,n,s){const a=on(e),o=a!==e&&!ce(e),l=a[t];if(l!==pc[t]){const p=l.apply(e,s);return o?Xt(p):p}let h=i;a!==e&&(o?h=function(p,f){return i.call(this,Xt(p),f,e)}:i.length>2&&(h=function(p,f){return i.call(this,p,f,e)}));const c=l.call(a,h,r);return o&&n?n(c):c}function Wa(e,t,i,r){const n=on(e);let s=i;return n!==e&&(ce(e)?i.length>3&&(s=function(a,o,l){return i.call(this,a,o,l,e)}):s=function(a,o,l){return i.call(this,a,Xt(o),l,e)}),n[t](s,...r)}function gs(e,t,i){const r=Ct(e);qt(r,"iterate",lr);const n=r[t](...i);return(n===-1||n===!1)&&pa(i[0])?(i[0]=Ct(i[0]),r[t](...i)):n}function Yi(e,t,i=[]){qe(),oa();const r=Ct(e)[t].apply(e,i);return la(),Je(),r}const vc=ra("__proto__,__v_isRef,__isVue"),xl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xe));function _c(e){Xe(e)||(e=String(e));const t=Ct(this);return qt(t,"has",e),t.hasOwnProperty(e)}class Pl{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){const n=this._isReadonly,s=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return s;if(i==="__v_raw")return r===(n?s?Rc:Fl:s?Al:El).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ot(t);if(!n){let l;if(a&&(l=gc[i]))return l;if(i==="hasOwnProperty")return _c}const o=Reflect.get(t,i,jt(t)?t:r);return(Xe(i)?xl.has(i):vc(i))||(n||qt(t,"get",i),s)?o:jt(o)?a&&aa(i)?o:o.value:Mt(o)?n?fa(o):pr(o):o}}class Tl extends Pl{constructor(t=!1){super(!1,t)}set(t,i,r,n){let s=t[i];if(!this._isShallow){const l=hi(s);if(!ce(r)&&!hi(r)&&(s=Ct(s),r=Ct(r)),!ot(t)&&jt(s)&&!jt(r))return l?!1:(s.value=r,!0)}const a=ot(t)&&aa(i)?Number(i)<t.length:St(t,i),o=Reflect.set(t,i,r,jt(t)?t:n);return t===Ct(n)&&(a?ze(r,s)&&ke(t,"set",i,r):ke(t,"add",i,r)),o}deleteProperty(t,i){const r=St(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&r&&ke(t,"delete",i,void 0),n}has(t,i){const r=Reflect.has(t,i);return(!Xe(i)||!xl.has(i))&&qt(t,"has",i),r}ownKeys(t){return qt(t,"iterate",ot(t)?"length":li),Reflect.ownKeys(t)}}class mc extends Pl{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const yc=new Tl,bc=new mc,Sc=new Tl(!0);const ua=e=>e,ln=e=>Reflect.getPrototypeOf(e);function wr(e,t,i=!1,r=!1){e=e.__v_raw;const n=Ct(e),s=Ct(t);i||(ze(t,s)&&qt(n,"get",t),qt(n,"get",s));const{has:a}=ln(n),o=r?ua:i?va:Xt;if(a.call(n,t))return o(e.get(t));if(a.call(n,s))return o(e.get(s));e!==n&&e.get(t)}function xr(e,t=!1){const i=this.__v_raw,r=Ct(i),n=Ct(e);return t||(ze(e,n)&&qt(r,"has",e),qt(r,"has",n)),e===n?i.has(e):i.has(e)||i.has(n)}function Pr(e,t=!1){return e=e.__v_raw,!t&&qt(Ct(e),"iterate",li),Reflect.get(e,"size",e)}function ja(e,t=!1){!t&&!ce(e)&&!hi(e)&&(e=Ct(e));const i=Ct(this);return ln(i).has.call(i,e)||(i.add(e),ke(i,"add",e,e)),this}function za(e,t,i=!1){!i&&!ce(t)&&!hi(t)&&(t=Ct(t));const r=Ct(this),{has:n,get:s}=ln(r);let a=n.call(r,e);a||(e=Ct(e),a=n.call(r,e));const o=s.call(r,e);return r.set(e,t),a?ze(t,o)&&ke(r,"set",e,t):ke(r,"add",e,t),this}function Ka(e){const t=Ct(this),{has:i,get:r}=ln(t);let n=i.call(t,e);n||(e=Ct(e),n=i.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return n&&ke(t,"delete",e,void 0),s}function Ya(){const e=Ct(this),t=e.size!==0,i=e.clear();return t&&ke(e,"clear",void 0,void 0),i}function Tr(e,t){return function(r,n){const s=this,a=s.__v_raw,o=Ct(a),l=t?ua:e?va:Xt;return!e&&qt(o,"iterate",li),a.forEach((h,c)=>r.call(n,l(h),l(c),s))}}function Er(e,t,i){return function(...r){const n=this.__v_raw,s=Ct(n),a=Ri(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=n[e](...r),c=i?ua:t?va:Xt;return!t&&qt(s,"iterate",l?Us:li),{next(){const{value:p,done:f}=h.next();return f?{value:p,done:f}:{value:o?[c(p[0]),c(p[1])]:c(p),done:f}},[Symbol.iterator](){return this}}}}function Ve(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Cc(){const e={get(s){return wr(this,s)},get size(){return Pr(this)},has:xr,add:ja,set:za,delete:Ka,clear:Ya,forEach:Tr(!1,!1)},t={get(s){return wr(this,s,!1,!0)},get size(){return Pr(this)},has:xr,add(s){return ja.call(this,s,!0)},set(s,a){return za.call(this,s,a,!0)},delete:Ka,clear:Ya,forEach:Tr(!1,!0)},i={get(s){return wr(this,s,!0)},get size(){return Pr(this,!0)},has(s){return xr.call(this,s,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Tr(!0,!1)},r={get(s){return wr(this,s,!0,!0)},get size(){return Pr(this,!0)},has(s){return xr.call(this,s,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Tr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Er(s,!1,!1),i[s]=Er(s,!0,!1),t[s]=Er(s,!1,!0),r[s]=Er(s,!0,!0)}),[e,i,t,r]}const[wc,xc,Pc,Tc]=Cc();function da(e,t){const i=t?e?Tc:Pc:e?xc:wc;return(r,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(St(i,n)&&n in r?i:r,n,s)}const Ec={get:da(!1,!1)},Ac={get:da(!1,!0)},Fc={get:da(!0,!1)};const El=new WeakMap,Al=new WeakMap,Fl=new WeakMap,Rc=new WeakMap;function Mc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nc(e){return e.__v_skip||!Object.isExtensible(e)?0:Mc(ec(e))}function pr(e){return hi(e)?e:ga(e,!1,yc,Ec,El)}function Oc(e){return ga(e,!1,Sc,Ac,Al)}function fa(e){return ga(e,!0,bc,Fc,Fl)}function ga(e,t,i,r,n){if(!Mt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=Nc(e);if(a===0)return e;const o=new Proxy(e,a===2?r:i);return n.set(e,o),o}function Mi(e){return hi(e)?Mi(e.__v_raw):!!(e&&e.__v_isReactive)}function hi(e){return!!(e&&e.__v_isReadonly)}function ce(e){return!!(e&&e.__v_isShallow)}function pa(e){return e?!!e.__v_raw:!1}function Ct(e){const t=e&&e.__v_raw;return t?Ct(t):e}function kc(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&cl(e,"__v_skip",!0),e}const Xt=e=>Mt(e)?pr(e):e,va=e=>Mt(e)?fa(e):e;function jt(e){return e?e.__v_isRef===!0:!1}function _t(e){return Dc(e,!1)}function Dc(e,t){return jt(e)?e:new Lc(e,t)}class Lc{constructor(t,i){this.dep=new ca,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:Ct(t),this._value=i?t:Xt(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||ce(t)||hi(t);t=r?t:Ct(t),ze(t,i)&&(this._rawValue=t,this._value=r?t:Xt(t),this.dep.trigger())}}function Ai(e){return jt(e)?e.value:e}const Gc={get:(e,t,i)=>t==="__v_raw"?e:Ai(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return jt(n)&&!jt(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function Rl(e){return Mi(e)?e:new Proxy(e,Gc)}class Ic{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new ca(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=or-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Rt!==this)return ml(this,!0),!0}get value(){const t=this.dep.track();return Sl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Uc(e,t,i=!1){let r,n;return lt(e)?r=e:(r=e.get,n=e.set),new Ic(r,n,i)}const Ar={},Vr=new WeakMap;let ai;function Bc(e,t=!1,i=ai){if(i){let r=Vr.get(i);r||Vr.set(i,r=[]),r.push(e)}}function Vc(e,t,i=Et){const{immediate:r,deep:n,once:s,scheduler:a,augmentJob:o,call:l}=i,h=v=>n?v:ce(v)||n===!1||n===0?Oe(v,1):Oe(v);let c,p,f,g,d=!1,_=!1;if(jt(e)?(p=()=>e.value,d=ce(e)):Mi(e)?(p=()=>h(e),d=!0):ot(e)?(_=!0,d=e.some(v=>Mi(v)||ce(v)),p=()=>e.map(v=>{if(jt(v))return v.value;if(Mi(v))return h(v);if(lt(v))return l?l(v,2):v()})):lt(e)?t?p=l?()=>l(e,2):e:p=()=>{if(f){qe();try{f()}finally{Je()}}const v=ai;ai=c;try{return l?l(e,3,[g]):e(g)}finally{ai=v}}:p=Pe,t&&n){const v=p,b=n===!0?1/0:n;p=()=>Oe(v(),b)}const y=pl(),S=()=>{c.stop(),y&&sa(y.effects,c)};if(s&&t){const v=t;t=(...b)=>{v(...b),S()}}let x=_?new Array(e.length).fill(Ar):Ar;const u=v=>{if(!(!(c.flags&1)||!c.dirty&&!v))if(t){const b=c.run();if(n||d||(_?b.some((T,N)=>ze(T,x[N])):ze(b,x))){f&&f();const T=ai;ai=c;try{const N=[b,x===Ar?void 0:_&&x[0]===Ar?[]:x,g];l?l(t,3,N):t(...N),x=b}finally{ai=T}}}else c.run()};return o&&o(u),c=new vl(p),c.scheduler=a?()=>a(u,!1):u,g=v=>Bc(v,!1,c),f=c.onStop=()=>{const v=Vr.get(c);if(v){if(l)l(v,4);else for(const b of v)b();Vr.delete(c)}},t?r?u(!0):x=c.run():a?a(u.bind(null,!0),!0):c.run(),S.pause=c.pause.bind(c),S.resume=c.resume.bind(c),S.stop=S,S}function Oe(e,t=1/0,i){if(t<=0||!Mt(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,jt(e))Oe(e.value,t,i);else if(ot(e))for(let r=0;r<e.length;r++)Oe(e[r],t,i);else if(al(e)||Ri(e))e.forEach(r=>{Oe(r,t,i)});else if(hl(e)){for(const r in e)Oe(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Oe(e[r],t,i)}return e}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vr(e,t,i,r){try{return r?e(...r):e()}catch(n){hn(n,t,i)}}function Te(e,t,i,r){if(lt(e)){const n=vr(e,t,i,r);return n&&ol(n)&&n.catch(s=>{hn(s,t,i)}),n}if(ot(e)){const n=[];for(let s=0;s<e.length;s++)n.push(Te(e[s],t,i,r));return n}}function hn(e,t,i,r=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Et;if(t){let o=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,l,h)===!1)return}o=o.parent}if(s){qe(),vr(s,null,10,[e,l,h]),Je();return}}$c(e,i,n,r,a)}function $c(e,t,i,r=!0,n=!1){if(n)throw e;console.error(e)}const ee=[];let Se=-1;const Ni=[];let We=null,Ti=0;const Ml=Promise.resolve();let $r=null;function Hc(e){const t=$r||Ml;return e?t.then(this?e.bind(this):e):t}function Wc(e){let t=Se+1,i=ee.length;for(;t<i;){const r=t+i>>>1,n=ee[r],s=hr(n);s<e||s===e&&n.flags&2?t=r+1:i=r}return t}function _a(e){if(!(e.flags&1)){const t=hr(e),i=ee[ee.length-1];!i||!(e.flags&2)&&t>=hr(i)?ee.push(e):ee.splice(Wc(t),0,e),e.flags|=1,Nl()}}function Nl(){$r||($r=Ml.then(kl))}function jc(e){ot(e)?Ni.push(...e):We&&e.id===-1?We.splice(Ti+1,0,e):e.flags&1||(Ni.push(e),e.flags|=1),Nl()}function Xa(e,t,i=Se+1){for(;i<ee.length;i++){const r=ee[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ee.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Ol(e){if(Ni.length){const t=[...new Set(Ni)].sort((i,r)=>hr(i)-hr(r));if(Ni.length=0,We){We.push(...t);return}for(We=t,Ti=0;Ti<We.length;Ti++){const i=We[Ti];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}We=null,Ti=0}}const hr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function kl(e){try{for(Se=0;Se<ee.length;Se++){const t=ee[Se];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),vr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Se<ee.length;Se++){const t=ee[Se];t&&(t.flags&=-2)}Se=-1,ee.length=0,Ol(),$r=null,(ee.length||Ni.length)&&kl()}}let Ht=null,Dl=null;function Hr(e){const t=Ht;return Ht=e,Dl=e&&e.type.__scopeId||null,t}function It(e,t=Ht,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&so(-1);const s=Hr(t);let a;try{a=e(...n)}finally{Hr(s),r._d&&so(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Ll(e,t){if(Ht===null)return e;const i=vn(Ht),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,a,o,l=Et]=t[n];s&&(lt(s)&&(s={mounted:s,updated:s}),s.deep&&Oe(a),r.push({dir:s,instance:i,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function ri(e,t,i,r){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(qe(),Te(l,i,8,[e.el,o,e,t]),Je())}}const zc=Symbol("_vte"),Kc=e=>e.__isTeleport;function ma(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ma(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function di(e,t){return lt(e)?zt({name:e.name},t,{setup:e}):e}function Gl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Bs(e,t,i,r,n=!1){if(ot(e)){e.forEach((d,_)=>Bs(d,t&&(ot(t)?t[_]:t),i,r,n));return}if(Oi(r)&&!n)return;const s=r.shapeFlag&4?vn(r.component):r.el,a=n?null:s,{i:o,r:l}=e,h=t&&t.r,c=o.refs===Et?o.refs={}:o.refs,p=o.setupState,f=Ct(p),g=p===Et?()=>!1:d=>St(f,d);if(h!=null&&h!==l&&(Ut(h)?(c[h]=null,g(h)&&(p[h]=null)):jt(h)&&(h.value=null)),lt(l))vr(l,o,12,[a,c]);else{const d=Ut(l),_=jt(l);if(d||_){const y=()=>{if(e.f){const S=d?g(l)?p[l]:c[l]:l.value;n?ot(S)&&sa(S,s):ot(S)?S.includes(s)||S.push(s):d?(c[l]=[s],g(l)&&(p[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else d?(c[l]=a,g(l)&&(p[l]=a)):_&&(l.value=a,e.k&&(c[e.k]=a))};a?(y.id=-1,ae(y,i)):y()}}}const Oi=e=>!!e.type.__asyncLoader,Il=e=>e.type.__isKeepAlive;function Yc(e,t){Ul(e,"a",t)}function Xc(e,t){Ul(e,"da",t)}function Ul(e,t,i=Wt){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(cn(t,r,i),i){let n=i.parent;for(;n&&n.parent;)Il(n.parent.vnode)&&qc(r,t,i,n),n=n.parent}}function qc(e,t,i,r){const n=cn(t,e,r,!0);un(()=>{sa(r[t],n)},i)}function cn(e,t,i=Wt,r=!1){if(i){const n=i[e]||(i[e]=[]),s=t.__weh||(t.__weh=(...a)=>{qe();const o=_r(i),l=Te(t,i,e,a);return o(),Je(),l});return r?n.unshift(s):n.push(s),s}}const Le=e=>(t,i=Wt)=>{(!pn||e==="sp")&&cn(e,(...r)=>t(...r),i)},Bl=Le("bm"),Li=Le("m"),Jc=Le("bu"),ya=Le("u"),ba=Le("bum"),un=Le("um"),Qc=Le("sp"),Zc=Le("rtg"),tu=Le("rtc");function eu(e,t=Wt){cn("ec",e,t)}const iu="components";function Ci(e,t){return nu(iu,e,!0,t)||e}const ru=Symbol.for("v-ndc");function nu(e,t,i=!0,r=!1){const n=Ht||Wt;if(n){const s=n.type;{const o=Yu(s,!1);if(o&&(o===t||o===ue(t)||o===sn(ue(t))))return s}const a=qa(n[e]||s[e],t)||qa(n.appContext[e],t);return!a&&r?s:a}}function qa(e,t){return e&&(e[t]||e[ue(t)]||e[sn(ue(t))])}function su(e,t,i,r){let n;const s=i,a=ot(e);if(a||Ut(e)){const o=a&&Mi(e);let l=!1;o&&(l=!ce(e),e=on(e)),n=new Array(e.length);for(let h=0,c=e.length;h<c;h++)n[h]=t(l?Xt(e[h]):e[h],h,void 0,s)}else if(typeof e=="number"){n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,s)}else if(Mt(e))if(e[Symbol.iterator])n=Array.from(e,(o,l)=>t(o,l,void 0,s));else{const o=Object.keys(e);n=new Array(o.length);for(let l=0,h=o.length;l<h;l++){const c=o[l];n[l]=t(e[c],c,l,s)}}else n=[];return n}function au(e,t,i={},r,n){if(Ht.ce||Ht.parent&&Oi(Ht.parent)&&Ht.parent.ce)return kt(),oi(ie,null,[at("slot",i,r)],64);let s=e[t];s&&s._c&&(s._d=!1),kt();const a=s&&Vl(s(i)),o=oi(ie,{key:(i.key||a&&a.key||`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return s&&s._c&&(s._d=!0),o}function Vl(e){return e.some(t=>ur(t)?!(t.type===Ke||t.type===ie&&!Vl(t.children)):!0)?e:null}const Vs=e=>e?ah(e)?vn(e):Vs(e.parent):null,sr=zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Vs(e.parent),$root:e=>Vs(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Sa(e),$forceUpdate:e=>e.f||(e.f=()=>{_a(e.update)}),$nextTick:e=>e.n||(e.n=Hc.bind(e.proxy)),$watch:e=>Fu.bind(e)}),ps=(e,t)=>e!==Et&&!e.__isScriptSetup&&St(e,t),ou={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return s[t]}else{if(ps(r,t))return a[t]=1,r[t];if(n!==Et&&St(n,t))return a[t]=2,n[t];if((h=e.propsOptions[0])&&St(h,t))return a[t]=3,s[t];if(i!==Et&&St(i,t))return a[t]=4,i[t];$s&&(a[t]=0)}}const c=sr[t];let p,f;if(c)return t==="$attrs"&&qt(e.attrs,"get",""),c(e);if((p=o.__cssModules)&&(p=p[t]))return p;if(i!==Et&&St(i,t))return a[t]=4,i[t];if(f=l.config.globalProperties,St(f,t))return f[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:s}=e;return ps(n,t)?(n[t]=i,!0):r!==Et&&St(r,t)?(r[t]=i,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:s}},a){let o;return!!i[a]||e!==Et&&St(e,a)||ps(t,a)||(o=s[0])&&St(o,a)||St(r,a)||St(sr,a)||St(n.config.globalProperties,a)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:St(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Ja(e){return ot(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let $s=!0;function lu(e){const t=Sa(e),i=e.proxy,r=e.ctx;$s=!1,t.beforeCreate&&Qa(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:p,mounted:f,beforeUpdate:g,updated:d,activated:_,deactivated:y,beforeDestroy:S,beforeUnmount:x,destroyed:u,unmounted:v,render:b,renderTracked:T,renderTriggered:N,errorCaptured:w,serverPrefetch:M,expose:E,inheritAttrs:F,components:I,directives:U,filters:Z}=t;if(h&&hu(h,r,null),a)for(const J in a){const q=a[J];lt(q)&&(r[J]=q.bind(i))}if(n){const J=n.call(i,i);Mt(J)&&(e.data=pr(J))}if($s=!0,s)for(const J in s){const q=s[J],dt=lt(q)?q.bind(i,i):lt(q.get)?q.get.bind(i,i):Pe,Y=!lt(q)&&lt(q.set)?q.set.bind(i):Pe,X=Ce({get:dt,set:Y});Object.defineProperty(r,J,{enumerable:!0,configurable:!0,get:()=>X.value,set:nt=>X.value=nt})}if(o)for(const J in o)$l(o[J],r,i,J);if(l){const J=lt(l)?l.call(i):l;Reflect.ownKeys(J).forEach(q=>{pu(q,J[q])})}c&&Qa(c,e,"c");function K(J,q){ot(q)?q.forEach(dt=>J(dt.bind(i))):q&&J(q.bind(i))}if(K(Bl,p),K(Li,f),K(Jc,g),K(ya,d),K(Yc,_),K(Xc,y),K(eu,w),K(tu,T),K(Zc,N),K(ba,x),K(un,v),K(Qc,M),ot(E))if(E.length){const J=e.exposed||(e.exposed={});E.forEach(q=>{Object.defineProperty(J,q,{get:()=>i[q],set:dt=>i[q]=dt})})}else e.exposed||(e.exposed={});b&&e.render===Pe&&(e.render=b),F!=null&&(e.inheritAttrs=F),I&&(e.components=I),U&&(e.directives=U),M&&Gl(e)}function hu(e,t,i=Pe){ot(e)&&(e=Hs(e));for(const r in e){const n=e[r];let s;Mt(n)?"default"in n?s=Dr(n.from||r,n.default,!0):s=Dr(n.from||r):s=Dr(n),jt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function Qa(e,t,i){Te(ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function $l(e,t,i,r){let n=r.includes(".")?eh(i,r):()=>i[r];if(Ut(e)){const s=t[e];lt(s)&&Di(n,s)}else if(lt(e))Di(n,e.bind(i));else if(Mt(e))if(ot(e))e.forEach(s=>$l(s,t,i,r));else{const s=lt(e.handler)?e.handler.bind(i):t[e.handler];lt(s)&&Di(n,s,e)}}function Sa(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(h=>Wr(l,h,a,!0)),Wr(l,t,a)),Mt(t)&&s.set(t,l),l}function Wr(e,t,i,r=!1){const{mixins:n,extends:s}=t;s&&Wr(e,s,i,!0),n&&n.forEach(a=>Wr(e,a,i,!0));for(const a in t)if(!(r&&a==="expose")){const o=cu[a]||i&&i[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const cu={data:Za,props:to,emits:to,methods:er,computed:er,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:er,directives:er,watch:du,provide:Za,inject:uu};function Za(e,t){return t?e?function(){return zt(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function uu(e,t){return er(Hs(e),Hs(t))}function Hs(e){if(ot(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Qt(e,t){return e?[...new Set([].concat(e,t))]:t}function er(e,t){return e?zt(Object.create(null),e,t):t}function to(e,t){return e?ot(e)&&ot(t)?[...new Set([...e,...t])]:zt(Object.create(null),Ja(e),Ja(t??{})):t}function du(e,t){if(!e)return t;if(!t)return e;const i=zt(Object.create(null),e);for(const r in t)i[r]=Qt(e[r],t[r]);return i}function Hl(){return{app:null,config:{isNativeTag:Zh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fu=0;function gu(e,t){return function(r,n=null){lt(r)||(r=zt({},r)),n!=null&&!Mt(n)&&(n=null);const s=Hl(),a=new WeakSet,o=[];let l=!1;const h=s.app={_uid:fu++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:qu,get config(){return s.config},set config(c){},use(c,...p){return a.has(c)||(c&&lt(c.install)?(a.add(c),c.install(h,...p)):lt(c)&&(a.add(c),c(h,...p))),h},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),h},component(c,p){return p?(s.components[c]=p,h):s.components[c]},directive(c,p){return p?(s.directives[c]=p,h):s.directives[c]},mount(c,p,f){if(!l){const g=h._ceVNode||at(r,n);return g.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),p&&t?t(g,c):e(g,c,f),l=!0,h._container=c,c.__vue_app__=h,vn(g.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Te(o,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,p){return s.provides[c]=p,h},runWithContext(c){const p=ki;ki=h;try{return c()}finally{ki=p}}};return h}}let ki=null;function pu(e,t){if(Wt){let i=Wt.provides;const r=Wt.parent&&Wt.parent.provides;r===i&&(i=Wt.provides=Object.create(r)),i[e]=t}}function Dr(e,t,i=!1){const r=Wt||Ht;if(r||ki){const n=ki?ki._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&lt(t)?t.call(r&&r.proxy):t}}const Wl={},jl=()=>Object.create(Wl),zl=e=>Object.getPrototypeOf(e)===Wl;function vu(e,t,i,r=!1){const n={},s=jl();e.propsDefaults=Object.create(null),Kl(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);i?e.props=r?n:Oc(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function _u(e,t,i,r){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=Ct(n),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let f=c[p];if(fn(e.emitsOptions,f))continue;const g=t[f];if(l)if(St(s,f))g!==s[f]&&(s[f]=g,h=!0);else{const d=ue(f);n[d]=Ws(l,o,d,g,e,!1)}else g!==s[f]&&(s[f]=g,h=!0)}}}else{Kl(e,t,n,s)&&(h=!0);let c;for(const p in o)(!t||!St(t,p)&&((c=ui(p))===p||!St(t,c)))&&(l?i&&(i[p]!==void 0||i[c]!==void 0)&&(n[p]=Ws(l,o,p,void 0,e,!0)):delete n[p]);if(s!==o)for(const p in s)(!t||!St(t,p))&&(delete s[p],h=!0)}h&&ke(e.attrs,"set","")}function Kl(e,t,i,r){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(ir(l))continue;const h=t[l];let c;n&&St(n,c=ue(l))?!s||!s.includes(c)?i[c]=h:(o||(o={}))[c]=h:fn(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=Ct(i),h=o||Et;for(let c=0;c<s.length;c++){const p=s[c];i[p]=Ws(n,l,p,h[p],e,!St(h,p))}}return a}function Ws(e,t,i,r,n,s){const a=e[i];if(a!=null){const o=St(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&lt(l)){const{propsDefaults:h}=n;if(i in h)r=h[i];else{const c=_r(n);r=h[i]=l.call(null,t),c()}}else r=l;n.ce&&n.ce._setProp(i,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===ui(i))&&(r=!0))}return r}const mu=new WeakMap;function Yl(e,t,i=!1){const r=i?mu:t.propsCache,n=r.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!lt(e)){const c=p=>{l=!0;const[f,g]=Yl(p,t,!0);zt(a,f),g&&o.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return Mt(e)&&r.set(e,Fi),Fi;if(ot(s))for(let c=0;c<s.length;c++){const p=ue(s[c]);eo(p)&&(a[p]=Et)}else if(s)for(const c in s){const p=ue(c);if(eo(p)){const f=s[c],g=a[p]=ot(f)||lt(f)?{type:f}:zt({},f),d=g.type;let _=!1,y=!0;if(ot(d))for(let S=0;S<d.length;++S){const x=d[S],u=lt(x)&&x.name;if(u==="Boolean"){_=!0;break}else u==="String"&&(y=!1)}else _=lt(d)&&d.name==="Boolean";g[0]=_,g[1]=y,(_||St(g,"default"))&&o.push(p)}}const h=[a,o];return Mt(e)&&r.set(e,h),h}function eo(e){return e[0]!=="$"&&!ir(e)}const Xl=e=>e[0]==="_"||e==="$stable",Ca=e=>ot(e)?e.map(we):[we(e)],yu=(e,t,i)=>{if(t._n)return t;const r=It((...n)=>Ca(t(...n)),i);return r._c=!1,r},ql=(e,t,i)=>{const r=e._ctx;for(const n in e){if(Xl(n))continue;const s=e[n];if(lt(s))t[n]=yu(n,s,r);else if(s!=null){const a=Ca(s);t[n]=()=>a}}},Jl=(e,t)=>{const i=Ca(t);e.slots.default=()=>i},Ql=(e,t,i)=>{for(const r in t)(i||r!=="_")&&(e[r]=t[r])},bu=(e,t,i)=>{const r=e.slots=jl();if(e.vnode.shapeFlag&32){const n=t._;n?(Ql(r,t,i),i&&cl(r,"_",n,!0)):ql(t,r)}else t&&Jl(e,t)},Su=(e,t,i)=>{const{vnode:r,slots:n}=e;let s=!0,a=Et;if(r.shapeFlag&32){const o=t._;o?i&&o===1?s=!1:Ql(n,t,i):(s=!t.$stable,ql(t,n)),a=t}else t&&(Jl(e,t),a={default:1});if(s)for(const o in n)!Xl(o)&&a[o]==null&&delete n[o]},ae=Lu;function Cu(e){return wu(e)}function wu(e,t){const i=ul();i.__VUE__=!0;const{insert:r,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:p,nextSibling:f,setScopeId:g=Pe,insertStaticContent:d}=e,_=(m,C,A,D=null,O=null,L=null,W=void 0,$=null,B=!!C.dynamicChildren)=>{if(m===C)return;m&&!Xi(m,C)&&(D=P(m),nt(m,O,L,!0),m=null),C.patchFlag===-2&&(B=!1,C.dynamicChildren=null);const{type:G,ref:et,shapeFlag:z}=C;switch(G){case gn:y(m,C,A,D);break;case Ke:S(m,C,A,D);break;case Lr:m==null&&x(C,A,D,W);break;case ie:I(m,C,A,D,O,L,W,$,B);break;default:z&1?b(m,C,A,D,O,L,W,$,B):z&6?U(m,C,A,D,O,L,W,$,B):(z&64||z&128)&&G.process(m,C,A,D,O,L,W,$,B,ht)}et!=null&&O&&Bs(et,m&&m.ref,L,C||m,!C)},y=(m,C,A,D)=>{if(m==null)r(C.el=o(C.children),A,D);else{const O=C.el=m.el;C.children!==m.children&&h(O,C.children)}},S=(m,C,A,D)=>{m==null?r(C.el=l(C.children||""),A,D):C.el=m.el},x=(m,C,A,D)=>{[m.el,m.anchor]=d(m.children,C,A,D,m.el,m.anchor)},u=({el:m,anchor:C},A,D)=>{let O;for(;m&&m!==C;)O=f(m),r(m,A,D),m=O;r(C,A,D)},v=({el:m,anchor:C})=>{let A;for(;m&&m!==C;)A=f(m),n(m),m=A;n(C)},b=(m,C,A,D,O,L,W,$,B)=>{C.type==="svg"?W="svg":C.type==="math"&&(W="mathml"),m==null?T(C,A,D,O,L,W,$,B):M(m,C,O,L,W,$,B)},T=(m,C,A,D,O,L,W,$)=>{let B,G;const{props:et,shapeFlag:z,transition:tt,dirs:st}=m;if(B=m.el=a(m.type,L,et&&et.is,et),z&8?c(B,m.children):z&16&&w(m.children,B,null,D,O,vs(m,L),W,$),st&&ri(m,null,D,"created"),N(B,m,m.scopeId,W,D),et){for(const Ft in et)Ft!=="value"&&!ir(Ft)&&s(B,Ft,null,et[Ft],L,D);"value"in et&&s(B,"value",null,et.value,L),(G=et.onVnodeBeforeMount)&&ye(G,D,m)}st&&ri(m,null,D,"beforeMount");const vt=xu(O,tt);vt&&tt.beforeEnter(B),r(B,C,A),((G=et&&et.onVnodeMounted)||vt||st)&&ae(()=>{G&&ye(G,D,m),vt&&tt.enter(B),st&&ri(m,null,D,"mounted")},O)},N=(m,C,A,D,O)=>{if(A&&g(m,A),D)for(let L=0;L<D.length;L++)g(m,D[L]);if(O){let L=O.subTree;if(C===L||rh(L.type)&&(L.ssContent===C||L.ssFallback===C)){const W=O.vnode;N(m,W,W.scopeId,W.slotScopeIds,O.parent)}}},w=(m,C,A,D,O,L,W,$,B=0)=>{for(let G=B;G<m.length;G++){const et=m[G]=$?je(m[G]):we(m[G]);_(null,et,C,A,D,O,L,W,$)}},M=(m,C,A,D,O,L,W)=>{const $=C.el=m.el;let{patchFlag:B,dynamicChildren:G,dirs:et}=C;B|=m.patchFlag&16;const z=m.props||Et,tt=C.props||Et;let st;if(A&&ni(A,!1),(st=tt.onVnodeBeforeUpdate)&&ye(st,A,C,m),et&&ri(C,m,A,"beforeUpdate"),A&&ni(A,!0),(z.innerHTML&&tt.innerHTML==null||z.textContent&&tt.textContent==null)&&c($,""),G?E(m.dynamicChildren,G,$,A,D,vs(C,O),L):W||q(m,C,$,null,A,D,vs(C,O),L,!1),B>0){if(B&16)F($,z,tt,A,O);else if(B&2&&z.class!==tt.class&&s($,"class",null,tt.class,O),B&4&&s($,"style",z.style,tt.style,O),B&8){const vt=C.dynamicProps;for(let Ft=0;Ft<vt.length;Ft++){const xt=vt[Ft],re=z[xt],Kt=tt[xt];(Kt!==re||xt==="value")&&s($,xt,re,Kt,O,A)}}B&1&&m.children!==C.children&&c($,C.children)}else!W&&G==null&&F($,z,tt,A,O);((st=tt.onVnodeUpdated)||et)&&ae(()=>{st&&ye(st,A,C,m),et&&ri(C,m,A,"updated")},D)},E=(m,C,A,D,O,L,W)=>{for(let $=0;$<C.length;$++){const B=m[$],G=C[$],et=B.el&&(B.type===ie||!Xi(B,G)||B.shapeFlag&70)?p(B.el):A;_(B,G,et,null,D,O,L,W,!0)}},F=(m,C,A,D,O)=>{if(C!==A){if(C!==Et)for(const L in C)!ir(L)&&!(L in A)&&s(m,L,C[L],null,O,D);for(const L in A){if(ir(L))continue;const W=A[L],$=C[L];W!==$&&L!=="value"&&s(m,L,$,W,O,D)}"value"in A&&s(m,"value",C.value,A.value,O)}},I=(m,C,A,D,O,L,W,$,B)=>{const G=C.el=m?m.el:o(""),et=C.anchor=m?m.anchor:o("");let{patchFlag:z,dynamicChildren:tt,slotScopeIds:st}=C;st&&($=$?$.concat(st):st),m==null?(r(G,A,D),r(et,A,D),w(C.children||[],A,et,O,L,W,$,B)):z>0&&z&64&&tt&&m.dynamicChildren?(E(m.dynamicChildren,tt,A,O,L,W,$),(C.key!=null||O&&C===O.subTree)&&Zl(m,C,!0)):q(m,C,A,et,O,L,W,$,B)},U=(m,C,A,D,O,L,W,$,B)=>{C.slotScopeIds=$,m==null?C.shapeFlag&512?O.ctx.activate(C,A,D,W,B):Z(C,A,D,O,L,W,B):j(m,C,B)},Z=(m,C,A,D,O,L,W)=>{const $=m.component=Hu(m,D,O);if(Il(m)&&($.ctx.renderer=ht),Wu($,!1,W),$.asyncDep){if(O&&O.registerDep($,K,W),!m.el){const B=$.subTree=at(Ke);S(null,B,C,A)}}else K($,m,C,A,O,L,W)},j=(m,C,A)=>{const D=C.component=m.component;if(ku(m,C,A))if(D.asyncDep&&!D.asyncResolved){J(D,C,A);return}else D.next=C,D.update();else C.el=m.el,D.vnode=C},K=(m,C,A,D,O,L,W)=>{const $=()=>{if(m.isMounted){let{next:z,bu:tt,u:st,parent:vt,vnode:Ft}=m;{const ne=th(m);if(ne){z&&(z.el=Ft.el,J(m,z,W)),ne.asyncDep.then(()=>{m.isUnmounted||$()});return}}let xt=z,re;ni(m,!1),z?(z.el=Ft.el,J(m,z,W)):z=Ft,tt&&kr(tt),(re=z.props&&z.props.onVnodeBeforeUpdate)&&ye(re,vt,z,Ft),ni(m,!0);const Kt=_s(m),de=m.subTree;m.subTree=Kt,_(de,Kt,p(de.el),P(de),m,O,L),z.el=Kt.el,xt===null&&Du(m,Kt.el),st&&ae(st,O),(re=z.props&&z.props.onVnodeUpdated)&&ae(()=>ye(re,vt,z,Ft),O)}else{let z;const{el:tt,props:st}=C,{bm:vt,m:Ft,parent:xt,root:re,type:Kt}=m,de=Oi(C);if(ni(m,!1),vt&&kr(vt),!de&&(z=st&&st.onVnodeBeforeMount)&&ye(z,xt,C),ni(m,!0),tt&&wt){const ne=()=>{m.subTree=_s(m),wt(tt,m.subTree,m,O,null)};de&&Kt.__asyncHydrate?Kt.__asyncHydrate(tt,m,ne):ne()}else{re.ce&&re.ce._injectChildStyle(Kt);const ne=m.subTree=_s(m);_(null,ne,A,D,m,O,L),C.el=ne.el}if(Ft&&ae(Ft,O),!de&&(z=st&&st.onVnodeMounted)){const ne=C;ae(()=>ye(z,xt,ne),O)}(C.shapeFlag&256||xt&&Oi(xt.vnode)&&xt.vnode.shapeFlag&256)&&m.a&&ae(m.a,O),m.isMounted=!0,C=A=D=null}};m.scope.on();const B=m.effect=new vl($);m.scope.off();const G=m.update=B.run.bind(B),et=m.job=B.runIfDirty.bind(B);et.i=m,et.id=m.uid,B.scheduler=()=>_a(et),ni(m,!0),G()},J=(m,C,A)=>{C.component=m;const D=m.vnode.props;m.vnode=C,m.next=null,_u(m,C.props,D,A),Su(m,C.children,A),qe(),Xa(m),Je()},q=(m,C,A,D,O,L,W,$,B=!1)=>{const G=m&&m.children,et=m?m.shapeFlag:0,z=C.children,{patchFlag:tt,shapeFlag:st}=C;if(tt>0){if(tt&128){Y(G,z,A,D,O,L,W,$,B);return}else if(tt&256){dt(G,z,A,D,O,L,W,$,B);return}}st&8?(et&16&&R(G,O,L),z!==G&&c(A,z)):et&16?st&16?Y(G,z,A,D,O,L,W,$,B):R(G,O,L,!0):(et&8&&c(A,""),st&16&&w(z,A,D,O,L,W,$,B))},dt=(m,C,A,D,O,L,W,$,B)=>{m=m||Fi,C=C||Fi;const G=m.length,et=C.length,z=Math.min(G,et);let tt;for(tt=0;tt<z;tt++){const st=C[tt]=B?je(C[tt]):we(C[tt]);_(m[tt],st,A,null,O,L,W,$,B)}G>et?R(m,O,L,!0,!1,z):w(C,A,D,O,L,W,$,B,z)},Y=(m,C,A,D,O,L,W,$,B)=>{let G=0;const et=C.length;let z=m.length-1,tt=et-1;for(;G<=z&&G<=tt;){const st=m[G],vt=C[G]=B?je(C[G]):we(C[G]);if(Xi(st,vt))_(st,vt,A,null,O,L,W,$,B);else break;G++}for(;G<=z&&G<=tt;){const st=m[z],vt=C[tt]=B?je(C[tt]):we(C[tt]);if(Xi(st,vt))_(st,vt,A,null,O,L,W,$,B);else break;z--,tt--}if(G>z){if(G<=tt){const st=tt+1,vt=st<et?C[st].el:D;for(;G<=tt;)_(null,C[G]=B?je(C[G]):we(C[G]),A,vt,O,L,W,$,B),G++}}else if(G>tt)for(;G<=z;)nt(m[G],O,L,!0),G++;else{const st=G,vt=G,Ft=new Map;for(G=vt;G<=tt;G++){const se=C[G]=B?je(C[G]):we(C[G]);se.key!=null&&Ft.set(se.key,G)}let xt,re=0;const Kt=tt-vt+1;let de=!1,ne=0;const Ki=new Array(Kt);for(G=0;G<Kt;G++)Ki[G]=0;for(G=st;G<=z;G++){const se=m[G];if(re>=Kt){nt(se,O,L,!0);continue}let me;if(se.key!=null)me=Ft.get(se.key);else for(xt=vt;xt<=tt;xt++)if(Ki[xt-vt]===0&&Xi(se,C[xt])){me=xt;break}me===void 0?nt(se,O,L,!0):(Ki[me-vt]=G+1,me>=ne?ne=me:de=!0,_(se,C[me],A,null,O,L,W,$,B),re++)}const Ba=de?Pu(Ki):Fi;for(xt=Ba.length-1,G=Kt-1;G>=0;G--){const se=vt+G,me=C[se],Va=se+1<et?C[se+1].el:D;Ki[G]===0?_(null,me,A,Va,O,L,W,$,B):de&&(xt<0||G!==Ba[xt]?X(me,A,Va,2):xt--)}}},X=(m,C,A,D,O=null)=>{const{el:L,type:W,transition:$,children:B,shapeFlag:G}=m;if(G&6){X(m.component.subTree,C,A,D);return}if(G&128){m.suspense.move(C,A,D);return}if(G&64){W.move(m,C,A,ht);return}if(W===ie){r(L,C,A);for(let z=0;z<B.length;z++)X(B[z],C,A,D);r(m.anchor,C,A);return}if(W===Lr){u(m,C,A);return}if(D!==2&&G&1&&$)if(D===0)$.beforeEnter(L),r(L,C,A),ae(()=>$.enter(L),O);else{const{leave:z,delayLeave:tt,afterLeave:st}=$,vt=()=>r(L,C,A),Ft=()=>{z(L,()=>{vt(),st&&st()})};tt?tt(L,vt,Ft):Ft()}else r(L,C,A)},nt=(m,C,A,D=!1,O=!1)=>{const{type:L,props:W,ref:$,children:B,dynamicChildren:G,shapeFlag:et,patchFlag:z,dirs:tt,cacheIndex:st}=m;if(z===-2&&(O=!1),$!=null&&Bs($,null,A,m,!0),st!=null&&(C.renderCache[st]=void 0),et&256){C.ctx.deactivate(m);return}const vt=et&1&&tt,Ft=!Oi(m);let xt;if(Ft&&(xt=W&&W.onVnodeBeforeUnmount)&&ye(xt,C,m),et&6)V(m.component,A,D);else{if(et&128){m.suspense.unmount(A,D);return}vt&&ri(m,null,C,"beforeUnmount"),et&64?m.type.remove(m,C,A,ht,D):G&&!G.hasOnce&&(L!==ie||z>0&&z&64)?R(G,C,A,!1,!0):(L===ie&&z&384||!O&&et&16)&&R(B,C,A),D&&bt(m)}(Ft&&(xt=W&&W.onVnodeUnmounted)||vt)&&ae(()=>{xt&&ye(xt,C,m),vt&&ri(m,null,C,"unmounted")},A)},bt=m=>{const{type:C,el:A,anchor:D,transition:O}=m;if(C===ie){mt(A,D);return}if(C===Lr){v(m);return}const L=()=>{n(A),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(m.shapeFlag&1&&O&&!O.persisted){const{leave:W,delayLeave:$}=O,B=()=>W(A,L);$?$(m.el,L,B):B()}else L()},mt=(m,C)=>{let A;for(;m!==C;)A=f(m),n(m),m=A;n(C)},V=(m,C,A)=>{const{bum:D,scope:O,job:L,subTree:W,um:$,m:B,a:G}=m;io(B),io(G),D&&kr(D),O.stop(),L&&(L.flags|=8,nt(W,m,C,A)),$&&ae($,C),ae(()=>{m.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},R=(m,C,A,D=!1,O=!1,L=0)=>{for(let W=L;W<m.length;W++)nt(m[W],C,A,D,O)},P=m=>{if(m.shapeFlag&6)return P(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const C=f(m.anchor||m.el),A=C&&C[zc];return A?f(A):C};let k=!1;const H=(m,C,A)=>{m==null?C._vnode&&nt(C._vnode,null,null,!0):_(C._vnode||null,m,C,null,null,null,A),C._vnode=m,k||(k=!0,Xa(),Ol(),k=!1)},ht={p:_,um:nt,m:X,r:bt,mt:Z,mc:w,pc:q,pbc:E,n:P,o:e};let ft,wt;return{render:H,hydrate:ft,createApp:gu(H,ft)}}function vs({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function ni({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function xu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zl(e,t,i=!1){const r=e.children,n=t.children;if(ot(r)&&ot(n))for(let s=0;s<r.length;s++){const a=r[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=je(n[s]),o.el=a.el),!i&&o.patchFlag!==-2&&Zl(a,o)),o.type===gn&&(o.el=a.el)}}function Pu(e){const t=e.slice(),i=[0];let r,n,s,a,o;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(n=i[i.length-1],e[n]<h){t[r]=n,i.push(r);continue}for(s=0,a=i.length-1;s<a;)o=s+a>>1,e[i[o]]<h?s=o+1:a=o;h<e[i[s]]&&(s>0&&(t[r]=i[s-1]),i[s]=r)}}for(s=i.length,a=i[s-1];s-- >0;)i[s]=a,a=t[a];return i}function th(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:th(t)}function io(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Tu=Symbol.for("v-scx"),Eu=()=>Dr(Tu);function ro(e,t){return dn(e,null,t)}function Au(e,t){return dn(e,null,{flush:"post"})}function Di(e,t,i){return dn(e,t,i)}function dn(e,t,i=Et){const{immediate:r,deep:n,flush:s,once:a}=i,o=zt({},i);let l;if(pn)if(s==="sync"){const f=Eu();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!t||r)o.once=!0;else{const f=()=>{};return f.stop=Pe,f.resume=Pe,f.pause=Pe,f}const h=Wt;o.call=(f,g,d)=>Te(f,h,g,d);let c=!1;s==="post"?o.scheduler=f=>{ae(f,h&&h.suspense)}:s!=="sync"&&(c=!0,o.scheduler=(f,g)=>{g?f():_a(f)}),o.augmentJob=f=>{t&&(f.flags|=4),c&&(f.flags|=2,h&&(f.id=h.uid,f.i=h))};const p=Vc(e,t,o);return l&&l.push(p),p}function Fu(e,t,i){const r=this.proxy,n=Ut(e)?e.includes(".")?eh(r,e):()=>r[e]:e.bind(r,r);let s;lt(t)?s=t:(s=t.handler,i=t);const a=_r(this),o=dn(n,s.bind(r),i);return a(),o}function eh(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const Ru=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ue(t)}Modifiers`]||e[`${ui(t)}Modifiers`];function Mu(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Et;let n=i;const s=t.startsWith("update:"),a=s&&Ru(r,t.slice(7));a&&(a.trim&&(n=i.map(c=>Ut(c)?c.trim():c)),a.number&&(n=i.map(Ds)));let o,l=r[o=cs(t)]||r[o=cs(ue(t))];!l&&s&&(l=r[o=cs(ui(t))]),l&&Te(l,e,6,n);const h=r[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Te(h,e,6,n)}}function ih(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!lt(e)){const l=h=>{const c=ih(h,t,!0);c&&(o=!0,zt(a,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Mt(e)&&r.set(e,null),null):(ot(s)?s.forEach(l=>a[l]=null):zt(a,s),Mt(e)&&r.set(e,a),a)}function fn(e,t){return!e||!en(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,ui(t))||St(e,t))}function _s(e){const{type:t,vnode:i,proxy:r,withProxy:n,propsOptions:[s],slots:a,attrs:o,emit:l,render:h,renderCache:c,props:p,data:f,setupState:g,ctx:d,inheritAttrs:_}=e,y=Hr(e);let S,x;try{if(i.shapeFlag&4){const v=n||r,b=v;S=we(h.call(b,v,c,p,g,f,d)),x=o}else{const v=t;S=we(v.length>1?v(p,{attrs:o,slots:a,emit:l}):v(p,null)),x=t.props?o:Nu(o)}}catch(v){ar.length=0,hn(v,e,1),S=at(Ke)}let u=S;if(x&&_!==!1){const v=Object.keys(x),{shapeFlag:b}=u;v.length&&b&7&&(s&&v.some(na)&&(x=Ou(x,s)),u=Gi(u,x,!1,!0))}return i.dirs&&(u=Gi(u,null,!1,!0),u.dirs=u.dirs?u.dirs.concat(i.dirs):i.dirs),i.transition&&ma(u,i.transition),S=u,Hr(y),S}const Nu=e=>{let t;for(const i in e)(i==="class"||i==="style"||en(i))&&((t||(t={}))[i]=e[i]);return t},Ou=(e,t)=>{const i={};for(const r in e)(!na(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function ku(e,t,i){const{props:r,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?no(r,a,h):!!a;if(l&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const f=c[p];if(a[f]!==r[f]&&!fn(h,f))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?no(r,a,h):!0:!!a;return!1}function no(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const s=r[n];if(t[s]!==e[s]&&!fn(i,s))return!0}return!1}function Du({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const rh=e=>e.__isSuspense;function Lu(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):jc(e)}const ie=Symbol.for("v-fgt"),gn=Symbol.for("v-txt"),Ke=Symbol.for("v-cmt"),Lr=Symbol.for("v-stc"),ar=[];let le=null;function kt(e=!1){ar.push(le=e?null:[])}function Gu(){ar.pop(),le=ar[ar.length-1]||null}let cr=1;function so(e){cr+=e,e<0&&le&&(le.hasOnce=!0)}function nh(e){return e.dynamicChildren=cr>0?le||Fi:null,Gu(),cr>0&&le&&le.push(e),e}function te(e,t,i,r,n,s){return nh(it(e,t,i,r,n,s,!0))}function oi(e,t,i,r,n){return nh(at(e,t,i,r,n,!0))}function ur(e){return e?e.__v_isVNode===!0:!1}function Xi(e,t){return e.type===t.type&&e.key===t.key}const sh=({key:e})=>e??null,Gr=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Ut(e)||jt(e)||lt(e)?{i:Ht,r:e,k:t,f:!!i}:e:null);function it(e,t=null,i=null,r=0,n=null,s=e===ie?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sh(t),ref:t&&Gr(t),scopeId:Dl,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ht};return o?(wa(l,i),s&128&&e.normalize(l)):i&&(l.shapeFlag|=Ut(i)?8:16),cr>0&&!a&&le&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&le.push(l),l}const at=Iu;function Iu(e,t=null,i=null,r=0,n=null,s=!1){if((!e||e===ru)&&(e=Ke),ur(e)){const o=Gi(e,t,!0);return i&&wa(o,i),cr>0&&!s&&le&&(o.shapeFlag&6?le[le.indexOf(e)]=o:le.push(o)),o.patchFlag=-2,o}if(Xu(e)&&(e=e.__vccOpts),t){t=Uu(t);let{class:o,style:l}=t;o&&!Ut(o)&&(t.class=an(o)),Mt(l)&&(pa(l)&&!ot(l)&&(l=zt({},l)),t.style=gr(l))}const a=Ut(e)?1:rh(e)?128:Kc(e)?64:Mt(e)?4:lt(e)?2:0;return it(e,t,i,r,n,a,s,!0)}function Uu(e){return e?pa(e)||zl(e)?zt({},e):e:null}function Gi(e,t,i=!1,r=!1){const{props:n,ref:s,patchFlag:a,children:o,transition:l}=e,h=t?Bu(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&sh(h),ref:t&&t.ref?i&&s?ot(s)?s.concat(Gr(t)):[s,Gr(t)]:Gr(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ie?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gi(e.ssContent),ssFallback:e.ssFallback&&Gi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&ma(c,l.clone(c)),c}function fe(e=" ",t=0){return at(gn,null,e,t)}function be(e="",t=!1){return t?(kt(),oi(Ke,null,e)):at(Ke,null,e)}function we(e){return e==null||typeof e=="boolean"?at(Ke):ot(e)?at(ie,null,e.slice()):ur(e)?je(e):at(gn,null,String(e))}function je(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gi(e)}function wa(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ot(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),wa(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!zl(t)?t._ctx=Ht:n===3&&Ht&&(Ht.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:Ht},i=32):(t=String(t),r&64?(i=16,t=[fe(t)]):i=8);e.children=t,e.shapeFlag|=i}function Bu(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=an([t.class,r.class]));else if(n==="style")t.style=gr([t.style,r.style]);else if(en(n)){const s=t[n],a=r[n];a&&s!==a&&!(ot(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=r[n])}return t}function ye(e,t,i,r=null){Te(e,t,7,[i,r])}const Vu=Hl();let $u=0;function Hu(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||Vu,s={uid:$u++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yl(r,n),emitsOptions:ih(r,n),emit:null,emitted:null,propsDefaults:Et,inheritAttrs:r.inheritAttrs,ctx:Et,data:Et,props:Et,attrs:Et,slots:Et,refs:Et,setupState:Et,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Mu.bind(null,s),e.ce&&e.ce(s),s}let Wt=null;const xa=()=>Wt||Ht;let jr,js;{const e=ul(),t=(i,r)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(r),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};jr=t("__VUE_INSTANCE_SETTERS__",i=>Wt=i),js=t("__VUE_SSR_SETTERS__",i=>pn=i)}const _r=e=>{const t=Wt;return jr(e),e.scope.on(),()=>{e.scope.off(),jr(t)}},ao=()=>{Wt&&Wt.scope.off(),jr(null)};function ah(e){return e.vnode.shapeFlag&4}let pn=!1;function Wu(e,t=!1,i=!1){t&&js(t);const{props:r,children:n}=e.vnode,s=ah(e);vu(e,r,s,t),bu(e,n,i);const a=s?ju(e,t):void 0;return t&&js(!1),a}function ju(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ou);const{setup:r}=i;if(r){const n=e.setupContext=r.length>1?Ku(e):null,s=_r(e);qe();const a=vr(r,e,0,[e.props,n]);if(Je(),s(),ol(a)){if(Oi(e)||Gl(e),a.then(ao,ao),t)return a.then(o=>{oo(e,o,t)}).catch(o=>{hn(o,e,0)});e.asyncDep=a}else oo(e,a,t)}else oh(e,t)}function oo(e,t,i){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Mt(t)&&(e.setupState=Rl(t)),oh(e,i)}let lo;function oh(e,t,i){const r=e.type;if(!e.render){if(!t&&lo&&!r.render){const n=r.template||Sa(e).template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,h=zt(zt({isCustomElement:s,delimiters:o},a),l);r.render=lo(n,h)}}e.render=r.render||Pe}{const n=_r(e);qe();try{lu(e)}finally{Je(),n()}}}const zu={get(e,t){return qt(e,"get",""),e[t]}};function Ku(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,zu),slots:e.slots,emit:e.emit,expose:t}}function vn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Rl(kc(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in sr)return sr[i](e)},has(t,i){return i in t||i in sr}})):e.proxy}function Yu(e,t=!0){return lt(e)?e.displayName||e.name:e.name||t&&e.__name}function Xu(e){return lt(e)&&"__vccOpts"in e}const Ce=(e,t)=>Uc(e,t,pn);function lh(e,t,i){const r=arguments.length;return r===2?Mt(t)&&!ot(t)?ur(t)?at(e,null,[t]):at(e,t):at(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&ur(i)&&(i=[i]),at(e,t,i))}const qu="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zs;const ho=typeof window<"u"&&window.trustedTypes;if(ho)try{zs=ho.createPolicy("vue",{createHTML:e=>e})}catch{}const hh=zs?e=>zs.createHTML(e):e=>e,Ju="http://www.w3.org/2000/svg",Qu="http://www.w3.org/1998/Math/MathML",Ne=typeof document<"u"?document:null,co=Ne&&Ne.createElement("template"),Zu={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t==="svg"?Ne.createElementNS(Ju,e):t==="mathml"?Ne.createElementNS(Qu,e):i?Ne.createElement(e,{is:i}):Ne.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>Ne.createTextNode(e),createComment:e=>Ne.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ne.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,s){const a=i?i.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===s||!(n=n.nextSibling)););else{co.innerHTML=hh(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const o=co.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[a?a.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},t0=Symbol("_vtc");function e0(e,t,i){const r=e[t0];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const zr=Symbol("_vod"),ch=Symbol("_vsh"),i0={beforeMount(e,{value:t},{transition:i}){e[zr]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):qi(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),qi(e,!0),r.enter(e)):r.leave(e,()=>{qi(e,!1)}):qi(e,t))},beforeUnmount(e,{value:t}){qi(e,t)}};function qi(e,t){e.style.display=t?e[zr]:"none",e[ch]=!t}const uh=Symbol("");function r0(e){const t=xa();if(!t)return;const i=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>Kr(s,n))},r=()=>{const n=e(t.proxy);t.ce?Kr(t.ce,n):Ks(t.subTree,n),i(n)};Bl(()=>{Au(r)}),Li(()=>{const n=new MutationObserver(r);n.observe(t.subTree.el.parentNode,{childList:!0}),un(()=>n.disconnect())})}function Ks(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{Ks(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Kr(e.el,t);else if(e.type===ie)e.children.forEach(i=>Ks(i,t));else if(e.type===Lr){let{el:i,anchor:r}=e;for(;i&&(Kr(i,t),i!==r);)i=i.nextSibling}}function Kr(e,t){if(e.nodeType===1){const i=e.style;let r="";for(const n in t)i.setProperty(`--${n}`,t[n]),r+=`--${n}: ${t[n]};`;i[uh]=r}}const n0=/(^|;)\s*display\s*:/;function s0(e,t,i){const r=e.style,n=Ut(i);let s=!1;if(i&&!n){if(t)if(Ut(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();i[o]==null&&Ir(r,o,"")}else for(const a in t)i[a]==null&&Ir(r,a,"");for(const a in i)a==="display"&&(s=!0),Ir(r,a,i[a])}else if(n){if(t!==i){const a=r[uh];a&&(i+=";"+a),r.cssText=i,s=n0.test(i)}}else t&&e.removeAttribute("style");zr in e&&(e[zr]=s?r.display:"",e[ch]&&(r.display="none"))}const uo=/\s*!important$/;function Ir(e,t,i){if(ot(i))i.forEach(r=>Ir(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=a0(e,t);uo.test(i)?e.setProperty(ui(r),i.replace(uo,""),"important"):e[r]=i}}const fo=["Webkit","Moz","ms"],ms={};function a0(e,t){const i=ms[t];if(i)return i;let r=ue(t);if(r!=="filter"&&r in e)return ms[t]=r;r=sn(r);for(let n=0;n<fo.length;n++){const s=fo[n]+r;if(s in e)return ms[t]=s}return t}const go="http://www.w3.org/1999/xlink";function po(e,t,i,r,n,s=hc(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(go,t.slice(6,t.length)):e.setAttributeNS(go,t,i):i==null||s&&!dl(i)?e.removeAttribute(t):e.setAttribute(t,s?"":Xe(i)?String(i):i)}function vo(e,t,i,r){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?hh(i):i);return}const n=e.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const a=n==="OPTION"?e.getAttribute("value")||"":e.value,o=i==null?e.type==="checkbox"?"on":"":String(i);(a!==o||!("_value"in e))&&(e.value=o),i==null&&e.removeAttribute(t),e._value=i;return}let s=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=dl(i):i==null&&a==="string"?(i="",s=!0):a==="number"&&(i=0,s=!0)}try{e[t]=i}catch{}s&&e.removeAttribute(t)}function Ei(e,t,i,r){e.addEventListener(t,i,r)}function o0(e,t,i,r){e.removeEventListener(t,i,r)}const _o=Symbol("_vei");function l0(e,t,i,r,n=null){const s=e[_o]||(e[_o]={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=h0(t);if(r){const h=s[t]=d0(r,n);Ei(e,o,h,l)}else a&&(o0(e,o,a,l),s[t]=void 0)}}const mo=/(?:Once|Passive|Capture)$/;function h0(e){let t;if(mo.test(e)){t={};let r;for(;r=e.match(mo);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ui(e.slice(2)),t]}let ys=0;const c0=Promise.resolve(),u0=()=>ys||(c0.then(()=>ys=0),ys=Date.now());function d0(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Te(f0(r,i.value),t,5,[r])};return i.value=e,i.attached=u0(),i}function f0(e,t){if(ot(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const yo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,g0=(e,t,i,r,n,s)=>{const a=n==="svg";t==="class"?e0(e,r,a):t==="style"?s0(e,i,r):en(t)?na(t)||l0(e,t,i,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):p0(e,t,r,a))?(vo(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&po(e,t,r,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ut(r))?vo(e,ue(t),r):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),po(e,t,r,a))};function p0(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&yo(t)&&lt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return yo(t)&&Ut(i)?!1:t in e}const bo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?i=>kr(t,i):t};function v0(e){e.target.composing=!0}function So(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const bs=Symbol("_assign"),_0={created(e,{modifiers:{lazy:t,trim:i,number:r}},n){e[bs]=bo(n);const s=r||n.props&&n.props.type==="number";Ei(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;i&&(o=o.trim()),s&&(o=Ds(o)),e[bs](o)}),i&&Ei(e,"change",()=>{e.value=e.value.trim()}),t||(Ei(e,"compositionstart",v0),Ei(e,"compositionend",So),Ei(e,"change",So))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:r,trim:n,number:s}},a){if(e[bs]=bo(a),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?Ds(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===i||n&&e.value.trim()===l)||(e.value=l))}},m0=zt({patchProp:g0},Zu);let Co;function y0(){return Co||(Co=Cu(m0))}const b0=(...e)=>{const t=y0().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=C0(r);if(!n)return;const s=t._component;!lt(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=i(n,!1,S0(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function S0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function C0(e){return Ut(e)?document.querySelector(e):e}var wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pa={exports:{}},_n={},dh={},ct={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof wo<"u"?wo:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.15",isBrowser:i(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return e.Konva.angleDeg?n*t:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var n;return(n=e.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(n){e.glob.Konva=n}};const r=n=>{e.Konva[n.prototype.getClassName()]=n};e._registerNode=r,e.Konva._injectGlobal(e.Konva)})(ct);var Ot={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=ct;class i{constructor(v=[1,0,0,1,0,0]){this.dirty=!1,this.m=v&&v.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(v){v.m[0]=this.m[0],v.m[1]=this.m[1],v.m[2]=this.m[2],v.m[3]=this.m[3],v.m[4]=this.m[4],v.m[5]=this.m[5]}point(v){var b=this.m;return{x:b[0]*v.x+b[2]*v.y+b[4],y:b[1]*v.x+b[3]*v.y+b[5]}}translate(v,b){return this.m[4]+=this.m[0]*v+this.m[2]*b,this.m[5]+=this.m[1]*v+this.m[3]*b,this}scale(v,b){return this.m[0]*=v,this.m[1]*=v,this.m[2]*=b,this.m[3]*=b,this}rotate(v){var b=Math.cos(v),T=Math.sin(v),N=this.m[0]*b+this.m[2]*T,w=this.m[1]*b+this.m[3]*T,M=this.m[0]*-T+this.m[2]*b,E=this.m[1]*-T+this.m[3]*b;return this.m[0]=N,this.m[1]=w,this.m[2]=M,this.m[3]=E,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(v,b){var T=this.m[0]+this.m[2]*b,N=this.m[1]+this.m[3]*b,w=this.m[2]+this.m[0]*v,M=this.m[3]+this.m[1]*v;return this.m[0]=T,this.m[1]=N,this.m[2]=w,this.m[3]=M,this}multiply(v){var b=this.m[0]*v.m[0]+this.m[2]*v.m[1],T=this.m[1]*v.m[0]+this.m[3]*v.m[1],N=this.m[0]*v.m[2]+this.m[2]*v.m[3],w=this.m[1]*v.m[2]+this.m[3]*v.m[3],M=this.m[0]*v.m[4]+this.m[2]*v.m[5]+this.m[4],E=this.m[1]*v.m[4]+this.m[3]*v.m[5]+this.m[5];return this.m[0]=b,this.m[1]=T,this.m[2]=N,this.m[3]=w,this.m[4]=M,this.m[5]=E,this}invert(){var v=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*v,T=-this.m[1]*v,N=-this.m[2]*v,w=this.m[0]*v,M=v*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),E=v*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=T,this.m[2]=N,this.m[3]=w,this.m[4]=M,this.m[5]=E,this}getMatrix(){return this.m}decompose(){var v=this.m[0],b=this.m[1],T=this.m[2],N=this.m[3],w=this.m[4],M=this.m[5],E=v*N-b*T;let F={x:w,y:M,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(v!=0||b!=0){var I=Math.sqrt(v*v+b*b);F.rotation=b>0?Math.acos(v/I):-Math.acos(v/I),F.scaleX=I,F.scaleY=E/I,F.skewX=(v*T+b*N)/E,F.skewY=0}else if(T!=0||N!=0){var U=Math.sqrt(T*T+N*N);F.rotation=Math.PI/2-(N>0?Math.acos(-T/U):-Math.acos(T/U)),F.scaleX=E/U,F.scaleY=U,F.skewX=0,F.skewY=(v*T+b*N)/E}return F.rotation=e.Util._getRotation(F.rotation),F}}e.Transform=i;var r="[object Array]",n="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,l=180/Math.PI,h="#",c="",p="0",f="Konva warning: ",g="Konva error: ",d="rgb(",_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},y=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,S=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(u){setTimeout(u,60)};e.Util={_isElement(u){return!!(u&&u.nodeType==1)},_isFunction(u){return!!(u&&u.constructor&&u.call&&u.apply)},_isPlainObject(u){return!!u&&u.constructor===Object},_isArray(u){return Object.prototype.toString.call(u)===r},_isNumber(u){return Object.prototype.toString.call(u)===n&&!isNaN(u)&&isFinite(u)},_isString(u){return Object.prototype.toString.call(u)===s},_isBoolean(u){return Object.prototype.toString.call(u)===a},isObject(u){return u instanceof Object},isValidSelector(u){if(typeof u!="string")return!1;var v=u[0];return v==="#"||v==="."||v===v.toUpperCase()},_sign(u){return u===0||u>0?1:-1},requestAnimFrame(u){S.push(u),S.length===1&&x(function(){const v=S;S=[],v.forEach(function(b){b()})})},createCanvasElement(){var u=document.createElement("canvas");try{u.style=u.style||{}}catch{}return u},createImageElement(){return document.createElement("img")},_isInDocument(u){for(;u=u.parentNode;)if(u==document)return!0;return!1},_urlToImage(u,v){var b=e.Util.createImageElement();b.onload=function(){v(b)},b.src=u},_rgbToHex(u,v,b){return((1<<24)+(u<<16)+(v<<8)+b).toString(16).slice(1)},_hexToRgb(u){u=u.replace(h,c);var v=parseInt(u,16);return{r:v>>16&255,g:v>>8&255,b:v&255}},getRandomColor(){for(var u=(Math.random()*16777215<<0).toString(16);u.length<6;)u=p+u;return h+u},getRGB(u){var v;return u in _?(v=_[u],{r:v[0],g:v[1],b:v[2]}):u[0]===h?this._hexToRgb(u.substring(1)):u.substr(0,4)===d?(v=y.exec(u.replace(/ /g,"")),{r:parseInt(v[1],10),g:parseInt(v[2],10),b:parseInt(v[3],10)}):{r:0,g:0,b:0}},colorToRGBA(u){return u=u||"black",e.Util._namedColorToRBA(u)||e.Util._hex3ColorToRGBA(u)||e.Util._hex4ColorToRGBA(u)||e.Util._hex6ColorToRGBA(u)||e.Util._hex8ColorToRGBA(u)||e.Util._rgbColorToRGBA(u)||e.Util._rgbaColorToRGBA(u)||e.Util._hslColorToRGBA(u)},_namedColorToRBA(u){var v=_[u.toLowerCase()];return v?{r:v[0],g:v[1],b:v[2],a:1}:null},_rgbColorToRGBA(u){if(u.indexOf("rgb(")===0){u=u.match(/rgb\(([^)]+)\)/)[1];var v=u.split(/ *, */).map(Number);return{r:v[0],g:v[1],b:v[2],a:1}}},_rgbaColorToRGBA(u){if(u.indexOf("rgba(")===0){u=u.match(/rgba\(([^)]+)\)/)[1];var v=u.split(/ *, */).map((b,T)=>b.slice(-1)==="%"?T===3?parseInt(b)/100:parseInt(b)/100*255:Number(b));return{r:v[0],g:v[1],b:v[2],a:v[3]}}},_hex8ColorToRGBA(u){if(u[0]==="#"&&u.length===9)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:parseInt(u.slice(7,9),16)/255}},_hex6ColorToRGBA(u){if(u[0]==="#"&&u.length===7)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:1}},_hex4ColorToRGBA(u){if(u[0]==="#"&&u.length===5)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:parseInt(u[4]+u[4],16)/255}},_hex3ColorToRGBA(u){if(u[0]==="#"&&u.length===4)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:1}},_hslColorToRGBA(u){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(u)){const[v,...b]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(u),T=Number(b[0])/360,N=Number(b[1])/100,w=Number(b[2])/100;let M,E,F;if(N===0)return F=w*255,{r:Math.round(F),g:Math.round(F),b:Math.round(F),a:1};w<.5?M=w*(1+N):M=w+N-w*N;const I=2*w-M,U=[0,0,0];for(let Z=0;Z<3;Z++)E=T+1/3*-(Z-1),E<0&&E++,E>1&&E--,6*E<1?F=I+(M-I)*6*E:2*E<1?F=M:3*E<2?F=I+(M-I)*(2/3-E)*6:F=I,U[Z]=F*255;return{r:Math.round(U[0]),g:Math.round(U[1]),b:Math.round(U[2]),a:1}}},haveIntersection(u,v){return!(v.x>u.x+u.width||v.x+v.width<u.x||v.y>u.y+u.height||v.y+v.height<u.y)},cloneObject(u){var v={};for(var b in u)this._isPlainObject(u[b])?v[b]=this.cloneObject(u[b]):this._isArray(u[b])?v[b]=this.cloneArray(u[b]):v[b]=u[b];return v},cloneArray(u){return u.slice(0)},degToRad(u){return u*o},radToDeg(u){return u*l},_degToRad(u){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(u)},_radToDeg(u){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(u)},_getRotation(u){return t.Konva.angleDeg?e.Util.radToDeg(u):u},_capitalize(u){return u.charAt(0).toUpperCase()+u.slice(1)},throw(u){throw new Error(g+u)},error(u){console.error(g+u)},warn(u){t.Konva.showWarnings&&console.warn(f+u)},each(u,v){for(var b in u)v(b,u[b])},_inRange(u,v,b){return v<=u&&u<b},_getProjectionToSegment(u,v,b,T,N,w){var M,E,F,I=(u-b)*(u-b)+(v-T)*(v-T);if(I==0)M=u,E=v,F=(N-b)*(N-b)+(w-T)*(w-T);else{var U=((N-u)*(b-u)+(w-v)*(T-v))/I;U<0?(M=u,E=v,F=(u-N)*(u-N)+(v-w)*(v-w)):U>1?(M=b,E=T,F=(b-N)*(b-N)+(T-w)*(T-w)):(M=u+U*(b-u),E=v+U*(T-v),F=(M-N)*(M-N)+(E-w)*(E-w))}return[M,E,F]},_getProjectionToLine(u,v,b){var T=e.Util.cloneObject(u),N=Number.MAX_VALUE;return v.forEach(function(w,M){if(!(!b&&M===v.length-1)){var E=v[(M+1)%v.length],F=e.Util._getProjectionToSegment(w.x,w.y,E.x,E.y,u.x,u.y),I=F[0],U=F[1],Z=F[2];Z<N&&(T.x=I,T.y=U,N=Z)}}),T},_prepareArrayForTween(u,v,b){var T,N=[],w=[];if(u.length>v.length){var M=v;v=u,u=M}for(T=0;T<u.length;T+=2)N.push({x:u[T],y:u[T+1]});for(T=0;T<v.length;T+=2)w.push({x:v[T],y:v[T+1]});var E=[];return w.forEach(function(F){var I=e.Util._getProjectionToLine(F,N,b);E.push(I.x),E.push(I.y)}),E},_prepareToStringify(u){var v;u.visitedByCircularReferenceRemoval=!0;for(var b in u)if(u.hasOwnProperty(b)&&u[b]&&typeof u[b]=="object"){if(v=Object.getOwnPropertyDescriptor(u,b),u[b].visitedByCircularReferenceRemoval||e.Util._isElement(u[b]))if(v.configurable)delete u[b];else return null;else if(e.Util._prepareToStringify(u[b])===null)if(v.configurable)delete u[b];else return null}return delete u.visitedByCircularReferenceRemoval,u},_assign(u,v){for(var b in v)u[b]=v[b];return u},_getFirstPointerId(u){return u.touches?u.changedTouches[0].identifier:u.pointerId||999},releaseCanvas(...u){t.Konva.releaseCanvasOnDestroy&&u.forEach(v=>{v.width=0,v.height=0})},drawRoundedRectPath(u,v,b,T){let N=0,w=0,M=0,E=0;typeof T=="number"?N=w=M=E=Math.min(T,v/2,b/2):(N=Math.min(T[0]||0,v/2,b/2),w=Math.min(T[1]||0,v/2,b/2),E=Math.min(T[2]||0,v/2,b/2),M=Math.min(T[3]||0,v/2,b/2)),u.moveTo(N,0),u.lineTo(v-w,0),u.arc(v-w,w,w,Math.PI*3/2,0,!1),u.lineTo(v,b-E),u.arc(v-E,b-E,E,0,Math.PI/2,!1),u.lineTo(M,b),u.arc(M,b-M,M,Math.PI/2,Math.PI,!1),u.lineTo(0,N),u.arc(N,N,N,Math.PI,Math.PI*3/2,!1)}}})(Ot);var Nt={},ut={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.getComponentValidator=Q.getBooleanValidator=Q.getNumberArrayValidator=Q.getFunctionValidator=Q.getStringOrGradientValidator=Q.getStringValidator=Q.getNumberOrAutoValidator=Q.getNumberOrArrayOfNumbersValidator=Q.getNumberValidator=Q.alphaComponent=Q.RGBComponent=void 0;const Ge=ct,Dt=Ot;function Ie(e){return Dt.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Dt.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function x0(e){return e>255?255:e<0?0:Math.round(e)}Q.RGBComponent=x0;function P0(e){return e>1?1:e<1e-4?1e-4:e}Q.alphaComponent=P0;function T0(){if(Ge.Konva.isUnminified)return function(e,t){return Dt.Util._isNumber(e)||Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}Q.getNumberValidator=T0;function E0(e){if(Ge.Konva.isUnminified)return function(t,i){let r=Dt.Util._isNumber(t),n=Dt.Util._isArray(t)&&t.length==e;return!r&&!n&&Dt.Util.warn(Ie(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}Q.getNumberOrArrayOfNumbersValidator=E0;function A0(){if(Ge.Konva.isUnminified)return function(e,t){var i=Dt.Util._isNumber(e),r=e==="auto";return i||r||Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}Q.getNumberOrAutoValidator=A0;function F0(){if(Ge.Konva.isUnminified)return function(e,t){return Dt.Util._isString(e)||Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}Q.getStringValidator=F0;function R0(){if(Ge.Konva.isUnminified)return function(e,t){const i=Dt.Util._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||r||Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}Q.getStringOrGradientValidator=R0;function M0(){if(Ge.Konva.isUnminified)return function(e,t){return Dt.Util._isFunction(e)||Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}Q.getFunctionValidator=M0;function N0(){if(Ge.Konva.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(Dt.Util._isArray(e)?e.forEach(function(r){Dt.Util._isNumber(r)||Dt.Util.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}Q.getNumberArrayValidator=N0;function O0(){if(Ge.Konva.isUnminified)return function(e,t){var i=e===!0||e===!1;return i||Dt.Util.warn(Ie(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}Q.getBooleanValidator=O0;function k0(e){if(Ge.Konva.isUnminified)return function(t,i){return t==null||Dt.Util.isObject(t)||Dt.Util.warn(Ie(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}Q.getComponentValidator=k0;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Ot,i=Q;var r="get",n="set";e.Factory={addGetterSetter(s,a,o,l,h){e.Factory.addGetter(s,a,o),e.Factory.addSetter(s,a,l,h),e.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){var l=r+t.Util._capitalize(a);s.prototype[l]=s.prototype[l]||function(){var h=this.attrs[a];return h===void 0?o:h}},addSetter(s,a,o,l){var h=n+t.Util._capitalize(a);s.prototype[h]||e.Factory.overWriteSetter(s,a,o,l)},overWriteSetter(s,a,o,l){var h=n+t.Util._capitalize(a);s.prototype[h]=function(c){return o&&c!==void 0&&c!==null&&(c=o.call(this,c,a)),this._setAttr(a,c),l&&l.call(this),this}},addComponentsGetterSetter(s,a,o,l,h){var c=o.length,p=t.Util._capitalize,f=r+p(a),g=n+p(a),d,_;s.prototype[f]=function(){var S={};for(d=0;d<c;d++)_=o[d],S[_]=this.getAttr(a+p(_));return S};var y=(0,i.getComponentValidator)(o);s.prototype[g]=function(S){var x=this.attrs[a],u;l&&(S=l.call(this,S)),y&&y.call(this,S,a);for(u in S)S.hasOwnProperty(u)&&this._setAttr(a+p(u),S[u]);return S||o.forEach(v=>{this._setAttr(a+p(v),void 0)}),this._fireChangeEvent(a,x,S),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){var o=t.Util._capitalize(a),l=n+o,h=r+o;s.prototype[a]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(s,a,o,l){t.Util.error("Adding deprecated "+a);var h=r+t.Util._capitalize(a),c=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[h]=function(){t.Util.error(c);var p=this.attrs[a];return p===void 0?o:p},e.Factory.addSetter(s,a,l,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){t.Util.each(a,function(o,l){var h=s.prototype[l],c=r+t.Util._capitalize(o),p=n+t.Util._capitalize(o);function f(){h.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}s.prototype[o]=f,s.prototype[c]=f,s.prototype[p]=f})},afterSetFilter(){this._filterUpToDate=!1}}})(ut);var ve={},De={};Object.defineProperty(De,"__esModule",{value:!0});De.HitContext=De.SceneContext=De.Context=void 0;const fh=Ot,D0=ct;function L0(e){var t=[],i=e.length,r=fh.Util,n,s;for(n=0;n<i;n++)s=e[n],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),t.push(s);return t}var xo=",",G0="(",I0=")",U0="([",B0="])",V0=";",$0="()",H0="=",Po=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],W0=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const j0=100;class mn{constructor(t){this.canvas=t,D0.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){var r=this.traceArr,n=r.length,s="",a,o,l,h;for(a=0;a<n;a++)o=r[a],l=o.method,l?(h=o.args,s+=l,t?s+=$0:fh.Util._isArray(h[0])?s+=U0+h.join(xo)+B0:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),s+=G0+h.join(xo)+I0)):(s+=o.property,t||(s+=H0+o.val)),s+=V0;return s}clearTrace(){this.traceArr=[]}_trace(t){var i=this.traceArr,r;i.push(t),r=i.length,r>=j0&&i.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){var i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,r,n,s,a){this._context.arc(t,i,r,n,s,a)}arcTo(t,i,r,n,s){this._context.arcTo(t,i,r,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,r,n,s,a){this._context.bezierCurveTo(t,i,r,n,s,a)}clearRect(t,i,r,n){this._context.clearRect(t,i,r,n)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){var r=arguments;if(r.length===2)return this._context.createImageData(t,i);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,r,n){return this._context.createLinearGradient(t,i,r,n)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,r,n,s,a){return this._context.createRadialGradient(t,i,r,n,s,a)}drawImage(t,i,r,n,s,a,o,l,h){var c=arguments,p=this._context;c.length===3?p.drawImage(t,i,r):c.length===5?p.drawImage(t,i,r,n,s):c.length===9&&p.drawImage(t,i,r,n,s,a,o,l,h)}ellipse(t,i,r,n,s,a,o,l){this._context.ellipse(t,i,r,n,s,a,o,l)}isPointInPath(t,i,r,n){return r?this._context.isPointInPath(r,t,i,n):this._context.isPointInPath(t,i,n)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,r,n){this._context.fillRect(t,i,r,n)}strokeRect(t,i,r,n){this._context.strokeRect(t,i,r,n)}fillText(t,i,r,n){n?this._context.fillText(t,i,r,n):this._context.fillText(t,i,r)}measureText(t){return this._context.measureText(t)}getImageData(t,i,r,n){return this._context.getImageData(t,i,r,n)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,r,n){this._context.rect(t,i,r,n)}roundRect(t,i,r,n,s){this._context.roundRect(t,i,r,n,s)}putImageData(t,i,r){this._context.putImageData(t,i,r)}quadraticCurveTo(t,i,r,n){this._context.quadraticCurveTo(t,i,r,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,r,n,s,a){this._context.setTransform(t,i,r,n,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,r,n){this._context.strokeText(t,i,r,n)}transform(t,i,r,n,s,a){this._context.transform(t,i,r,n,s,a)}translate(t,i){this._context.translate(t,i)}_enableTrace(){var t=this,i=Po.length,r=this.setAttr,n,s,a=function(o){var l=t[o],h;t[o]=function(){return s=L0(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:s}),h}};for(n=0;n<i;n++)a(Po[n]);t.setAttr=function(){r.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;var r=!i||i==="source-over";r||this.setAttr("globalCompositeOperation",i)}}De.Context=mn;W0.forEach(function(e){Object.defineProperty(mn.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class z0 extends mn{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){var i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),r=t.getFillPriority();if(i&&r==="color"){this._fillColor(t);return}const n=t.getFillPatternImage();if(n&&r==="pattern"){this._fillPattern(t);return}const s=t.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(t);return}const a=t.getFillRadialGradientColorStops();if(a&&r==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):n?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,r.x,r.y);if(n){for(var a=0;a<n.length;a+=2)s.addColorStop(n[a],n[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var i=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var i,r,n,s=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",a=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,o=(n=t.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,p=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(p))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*p)}}De.SceneContext=z0;class K0 extends mn{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const s=t.getStrokeScaleEnabled();if(!s){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),n=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),s||this.restore()}}}De.HitContext=K0;Object.defineProperty(ve,"__esModule",{value:!0});ve.HitCanvas=ve.SceneCanvas=ve.Canvas=void 0;const Yr=Ot,gh=De,ph=ct,Y0=ut,X0=Q;var Fr;function q0(){if(Fr)return Fr;var e=Yr.Util.createCanvasElement(),t=e.getContext("2d");return Fr=function(){var i=ph.Konva._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/r}(),Yr.Util.releaseCanvas(e),Fr}class yn{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var i=t||{},r=i.pixelRatio||ph.Konva.pixelRatio||q0();this.pixelRatio=r,this._canvas=Yr.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var i=this.pixelRatio,r=this.getContext()._context;r.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(n){return Yr.Util.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}ve.Canvas=yn;Y0.Factory.addGetterSetter(yn,"pixelRatio",void 0,(0,X0.getNumberValidator)());class J0 extends yn{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new gh.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}ve.SceneCanvas=J0;class Q0 extends yn{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new gh.HitContext(this),this.setSize(t.width,t.height)}}ve.HitCanvas=Q0;var bn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=ct,i=Ot;e.DD={get isDragging(){var r=!1;return e.DD._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return e.DD._dragElements.forEach(n=>{r=n.node}),r},_dragElements:new Map,_drag(r){const n=[];e.DD._dragElements.forEach((s,a)=>{const{node:o}=s,l=o.getStage();l.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=i.Util._getFirstPointerId(r));const h=l._changedPointerPositions.find(f=>f.id===s.pointerId);if(h){if(s.dragStatus!=="dragging"){var c=o.dragDistance(),p=Math.max(Math.abs(h.x-s.startPointerPos.x),Math.abs(h.y-s.startPointerPos.y));if(p<c||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,s),n.push(o)}}),n.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const n=[];e.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(c=>c.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const h=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;h&&n.indexOf(h)===-1&&n.push(h)}),n.forEach(s=>{s.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((n,s)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:r},!0),n.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))})(bn);Object.defineProperty(Nt,"__esModule",{value:!0});Nt.Node=void 0;const gt=Ot,mr=ut,Ji=ve,$e=ct,he=bn,Gt=Q;var Ur="absoluteOpacity",Rr="allEventListeners",Me="absoluteTransform",To="absoluteScale",si="canvas",Z0="Change",td="children",ed="konva",Ys="listening",Eo="mouseenter",Ao="mouseleave",Fo="set",Ro="Shape",Br=" ",Mo="stage",He="transform",id="Stage",Xs="visible",rd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Br);let nd=1;class rt{constructor(t){this._id=nd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===He||t===Me)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){var r=this._cache.get(t),n=t===He||t===Me,s=r===void 0||n&&r.dirty===!0;return s&&(r=i.call(this),this._cache.set(t,r)),r}_calculate(t,i,r){if(!this._attachedDepsListeners.get(t)){const n=i.map(s=>s+"Change.konva").join(Br);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(si)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Me&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(si)){const{scene:t,filter:i,hit:r}=this._cache.get(si);gt.Util.releaseCanvas(t,i,r),this._cache.delete(si)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var i=t||{},r={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var n=Math.ceil(i.width||r.width),s=Math.ceil(i.height||r.height),a=i.pixelRatio,o=i.x===void 0?Math.floor(r.x):i.x,l=i.y===void 0?Math.floor(r.y):i.y,h=i.offset||0,c=i.drawBorder||!1,p=i.hitCanvasPixelRatio||1;if(!n||!s){gt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const f=Math.abs(Math.round(r.x)-o)>.5?1:0,g=Math.abs(Math.round(r.y)-l)>.5?1:0;n+=h*2+f,s+=h*2+g,o-=h,l-=h;var d=new Ji.SceneCanvas({pixelRatio:a,width:n,height:s}),_=new Ji.SceneCanvas({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),y=new Ji.HitCanvas({pixelRatio:p,width:n,height:s}),S=d.getContext(),x=y.getContext();return y.isCache=!0,d.isCache=!0,this._cache.delete(si),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(d.getContext()._context.imageSmoothingEnabled=!1,_.getContext()._context.imageSmoothingEnabled=!1),S.save(),x.save(),S.translate(-o,-l),x.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Ur),this._clearSelfAndDescendantCache(To),this.drawScene(d,this),this.drawHit(y,this),this._isUnderCache=!1,S.restore(),x.restore(),c&&(S.save(),S.beginPath(),S.rect(0,0,n,s),S.closePath(),S.setAttr("strokeStyle","red"),S.setAttr("lineWidth",5),S.stroke(),S.restore()),this._cache.set(si,{scene:d,filter:_,hit:y,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(si)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=1/0,s=1/0,a=-1/0,o=-1/0,l=this.getAbsoluteTransform(i);return r.forEach(function(h){var c=l.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:n,y:s,width:a-n,height:o-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()}_drawCachedHitCanvas(t){var i=this._getCanvasCache(),r=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),i=this._getCanvasCache(),r=i.scene,n=i.filter,s=n.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var c=r.pixelRatio;n.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){gt.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(p){gt.Util.error("Unable to apply filter. "+p.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return n}return r}on(t,i){if(this._cache&&this._cache.delete(Rr),arguments.length===3)return this._delegate.apply(this,arguments);var r=t.split(Br),n=r.length,s,a,o,l,h;for(s=0;s<n;s++)a=r[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){var r=(t||"").split(Br),n=r.length,s,a,o,l,h,c;if(this._cache&&this._cache.delete(Rr),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<n;s++)if(o=r[s],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(a in this.eventListeners)this._off(a,c,i);return this}dispatchEvent(t){var i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(r){i.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,r){var n=this;this.on(t,function(s){for(var a=s.target.findAncestors(i,!0,n),o=0;o<a.length;o++)s=gt.Util.cloneObject(s),s.currentTarget=a[o],r.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),he.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Me),this._clearSelfAndDescendantCache(Ur),this._clearSelfAndDescendantCache(To),this._clearSelfAndDescendantCache(Mo),this._clearSelfAndDescendantCache(Xs),this._clearSelfAndDescendantCache(Ys)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var i="get"+gt.Util._capitalize(t);return gt.Util._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),i=[];t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var i,r;if(!t)return this;for(i in t)i!==td&&(r=Fo+gt.Util._capitalize(i),gt.Util._isFunction(this[r])?this[r](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Ys,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(Xs,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),n=!1;he.DD._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===r)&&(n=!0)});var s=!i&&!$e.Konva.hitOnDragEnabled&&(n||$e.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),i=this,r=0,n,s,a,o;function l(c){for(n=[],s=c.length,a=0;a<s;a++)o=c[a],r++,o.nodeType!==Ro&&(n=n.concat(o.getChildren().slice())),o._id===i._id&&(a=s);n.length>0&&n[0].getDepth()<=t&&l(n)}const h=this.getStage();return i.nodeType!==id&&h&&l(h.getChildren()),r}getDepth(){for(var t=0,i=this.parent;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(He),this._clearSelfAndDescendantCache(Me)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;var i=t.getPointerPosition();if(!i)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(i)}getAbsolutePosition(t){let i=!1,r=this.parent;for(;r;){if(r.isCached()){i=!0;break}r=r.parent}i&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),s=new gt.Transform,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){const{x:i,y:r,...n}=this._clearTransform();this.attrs.x=i,this.attrs.y=r,this._clearCache(He);var s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(t.x,t.y),t={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(n),this.setPosition({x:t.x,y:t.y}),this._clearCache(He),this._clearSelfAndDescendantCache(Me),this}_setTransform(t){var i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var i=t.x,r=t.y,n=this.x(),s=this.y();return i!==void 0&&(n+=i),r!==void 0&&(s+=r),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(t,i){var r=[],n=this.getParent(),s,a;if(!(i&&i._id===this._id)){for(r.unshift(this);n&&(!i||n._id!==i._id);)r.unshift(n),n=n.parent;for(s=r.length,a=0;a<s;a++)t(r[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return gt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return gt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return gt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return gt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return gt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&gt.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Ur,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t=this.getAttrs(),i,r,n,s,a;const o={attrs:{},className:this.getClassName()};for(i in t)r=t[i],a=gt.Util.isObject(r)&&!gt.Util._isPlainObject(r)&&!gt.Util._isArray(r),!a&&(n=typeof this[i]=="function"&&this[i],delete t[i],s=n?n.call(this):null,t[i]=r,s!==r&&(o.attrs[i]=r));return gt.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,r){var n=[];i&&this._isMatch(t)&&n.push(this);for(var s=this.parent;s;){if(s===r)return n;s._isMatch(t)&&n.push(s),s=s.parent}return n}isAncestorOf(t){return!1}findAncestor(t,i,r){return this.findAncestors(t,i,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var i=t.replace(/ /g,"").split(","),r=i.length,n,s;for(n=0;n<r;n++)if(s=i[n],gt.Util.isValidSelector(s)||(gt.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),gt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),gt.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Mo,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():null}fire(t,i={},r){return i.target=i.target||this,r?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Me,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var i;if(t)return i=new gt.Transform,this._eachAncestorReverse(function(n){var s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;i=this._cache.get(Me)||new gt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();var r=this.transformsEnabled();if(r==="all")i.multiply(this.getTransform());else if(r==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;i.translate(n-a,s-o)}return i.dirty=!1,i}getAbsoluteScale(t){for(var i=this;i;)i._isUnderCache&&(t=i),i=i.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(He,this._getTransform)}_getTransform(){var t,i,r=this._cache.get(He)||new gt.Transform;r.reset();var n=this.x(),s=this.y(),a=$e.Konva.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,p=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(n!==0||s!==0)&&r.translate(n,s),a!==0&&r.rotate(a),(h!==0||c!==0)&&r.skew(h,c),(o!==1||l!==1)&&r.scale(o,l),(p!==0||f!==0)&&r.translate(-1*p,-1*f),r.dirty=!1,r}clone(t){var i=gt.Util.cloneObject(this.attrs),r,n,s,a,o;for(r in t)i[r]=t[r];var l=new this.constructor(i);for(r in this.eventListeners)for(n=this.eventListeners[r],s=n.length,a=0;a<s;a++)o=n[a],o.name.indexOf(ed)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(o));return l}_toKonvaCanvas(t){t=t||{};var i=this.getClientRect(),r=this.getStage(),n=t.x!==void 0?t.x:Math.floor(i.x),s=t.y!==void 0?t.y:Math.floor(i.y),a=t.pixelRatio||1,o=new Ji.SceneCanvas({width:t.width||Math.ceil(i.width)||(r?r.width():0),height:t.height||Math.ceil(i.height)||(r?r.height():0),pixelRatio:a}),l=o.getContext();const h=new Ji.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(n),height:o.height/o.pixelRatio+Math.abs(s),pixelRatio:o.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o,void 0,h),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var i=t.mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(i,r);return t.callback&&t.callback(n),n}toImage(t){return new Promise((i,r)=>{try{const n=t==null?void 0:t.callback;n&&delete t.callback,gt.Util._urlToImage(this.toDataURL(t),function(s){i(s),n==null||n(s)})}catch(n){r(n)}})}toBlob(t){return new Promise((i,r)=>{try{const n=t==null?void 0:t.callback;n&&delete t.callback,this.toCanvas(t).toBlob(s=>{i(s),n==null||n(s)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(n){r(n)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():$e.Konva.dragDistance}_off(t,i,r){var n=this.eventListeners[t],s,a,o;for(s=0;s<n.length;s++)if(a=n[s].name,o=n[s].handler,(a!=="konva"||i==="konva")&&(!i||a===i)&&(!r||r===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,i,r){this._fire(t+Z0,{oldVal:i,newVal:r})}addName(t){if(!this.hasName(t)){var i=this.name(),r=i?i+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const i=this.name();if(!i)return!1;var r=(i||"").split(/\s/g);return r.indexOf(t)!==-1}removeName(t){var i=(this.name()||"").split(/\s/g),r=i.indexOf(t);return r!==-1&&(i.splice(r,1),this.name(i.join(" "))),this}setAttr(t,i){var r=this[Fo+gt.Util._capitalize(t)];return gt.Util._isFunction(r)?r.call(this,i):this._setAttr(t,i),this}_requestDraw(){if($e.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){var r=this.attrs[t];r===i&&!gt.Util.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,i),this._requestDraw())}_setComponentAttr(t,i,r){var n;r!==void 0&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=r,this._fireChangeEvent(t,n,r))}_fireAndBubble(t,i,r){i&&this.nodeType===Ro&&(i.target=this);var n=(t===Eo||t===Ao)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!n){this._fire(t,i);var s=(t===Eo||t===Ao)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,i,r):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,r,n;const s=(i=this._cache.get(Rr))!==null&&i!==void 0?i:{};let a=s==null?void 0:s[t];if(a===void 0){a=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(n=(r=o.eventListeners)===null||r===void 0?void 0:r[t])!==null&&n!==void 0?n:[];a.push(...l),o=Object.getPrototypeOf(o)}s[t]=a,this._cache.set(Rr,s)}return a}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const r=this._getProtoListeners(t);if(r)for(var n=0;n<r.length;n++)r[n].handler.call(this,i);const s=this.eventListeners[t];if(s)for(var n=0;n<s.length;n++)s[n].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var i=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition();if(r){var s=r._getPointerById(i)||r._changedPointerPositions[0]||n;he.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:i})}}startDrag(t,i=!0){he.DD._dragElements.has(this._id)||this._createDragElement(t);const r=he.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const r=this.getStage()._getPointerById(i.pointerId);if(r){var n={x:r.x-i.offset.x,y:r.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,n,t);a?n=a:gt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}stopDrag(t){const i=he.DD._dragElements.get(this._id);i&&(i.dragStatus="stopped"),he.DD._endDragBefore(t),he.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=he.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var i=t.evt.button!==void 0,r=!i||$e.Konva.dragButtons.indexOf(t.evt.button)>=0;if(r&&!this.isDragging()){var n=!1;he.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const i=he.DD._dragElements.get(this._id),r=i&&i.dragStatus==="dragging",n=i&&i.dragStatus==="ready";r?this.stopDrag():n&&he.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const r={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return gt.Util.haveIntersection(r,this.getClientRect())}static create(t,i){return gt.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){var r=rt.prototype.getClassName.call(t),n=t.children,s,a,o;i&&(t.attrs.container=i),$e.Konva[r]||(gt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=$e.Konva[r];if(s=new l(t.attrs),n)for(a=n.length,o=0;o<a;o++)s.add(rt._createNode(n[o]));return s}}Nt.Node=rt;rt.prototype.nodeType="Node";rt.prototype._attrsAffectingSize=[];rt.prototype.eventListeners={};rt.prototype.on.call(rt.prototype,rd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(He),this._clearSelfAndDescendantCache(Me)});rt.prototype.on.call(rt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Xs)});rt.prototype.on.call(rt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Ys)});rt.prototype.on.call(rt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Ur)});const At=mr.Factory.addGetterSetter;At(rt,"zIndex");At(rt,"absolutePosition");At(rt,"position");At(rt,"x",0,(0,Gt.getNumberValidator)());At(rt,"y",0,(0,Gt.getNumberValidator)());At(rt,"globalCompositeOperation","source-over",(0,Gt.getStringValidator)());At(rt,"opacity",1,(0,Gt.getNumberValidator)());At(rt,"name","",(0,Gt.getStringValidator)());At(rt,"id","",(0,Gt.getStringValidator)());At(rt,"rotation",0,(0,Gt.getNumberValidator)());mr.Factory.addComponentsGetterSetter(rt,"scale",["x","y"]);At(rt,"scaleX",1,(0,Gt.getNumberValidator)());At(rt,"scaleY",1,(0,Gt.getNumberValidator)());mr.Factory.addComponentsGetterSetter(rt,"skew",["x","y"]);At(rt,"skewX",0,(0,Gt.getNumberValidator)());At(rt,"skewY",0,(0,Gt.getNumberValidator)());mr.Factory.addComponentsGetterSetter(rt,"offset",["x","y"]);At(rt,"offsetX",0,(0,Gt.getNumberValidator)());At(rt,"offsetY",0,(0,Gt.getNumberValidator)());At(rt,"dragDistance",null,(0,Gt.getNumberValidator)());At(rt,"width",0,(0,Gt.getNumberValidator)());At(rt,"height",0,(0,Gt.getNumberValidator)());At(rt,"listening",!0,(0,Gt.getBooleanValidator)());At(rt,"preventDefault",!0,(0,Gt.getBooleanValidator)());At(rt,"filters",null,function(e){return this._filterUpToDate=!1,e});At(rt,"visible",!0,(0,Gt.getBooleanValidator)());At(rt,"transformsEnabled","all",(0,Gt.getStringValidator)());At(rt,"size");At(rt,"dragBoundFunc");At(rt,"draggable",!1,(0,Gt.getBooleanValidator)());mr.Factory.backCompat(rt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.Container=void 0;const Vi=ut,Ss=Nt,Sn=Q;class gi extends Ss.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[];var r=[];return i.forEach(function(n){t(n)&&r.push(n)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(var i=0;i<t.length;i++)this.add(t[i]);return this}const r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){var r=[];return this._descendants(n=>{const s=n._isMatch(t);return s&&r.push(n),!!(s&&i)}),r}_descendants(t){let i=!1;const r=this.getChildren();for(const n of r){if(i=t(n),i)return!0;if(n.hasChildren()&&(i=n._descendants(t),i))return!0}return!1}toObject(){var t=Ss.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){for(var i=t.getParent();i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){var i=Ss.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){i.add(r.clone())}),i}getAllIntersections(t){var i=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(t)&&i.push(r)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,r){i.index=r}),this._requestDraw()}drawScene(t,i,r){var n=this.getLayer(),s=t||n&&n.getCanvas(),a=s&&s.getContext(),o=this._getCanvasCache(),l=o&&o.scene,h=s&&s.isCache;if(!this.isVisible()&&!h)return this;if(l){a.save();var c=this.getAbsoluteTransform(i).getMatrix();a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",s,i,r);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;var r=this.getLayer(),n=t||r&&r.hitCanvas,s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(i).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,i);return this}_drawChildren(t,i,r,n){var s,a=i&&i.getContext(),o=this.clipWidth(),l=this.clipHeight(),h=this.clipFunc(),c=typeof o=="number"&&typeof l=="number"||h;const p=r===this;if(c){a.save();var f=this.getAbsoluteTransform(r),g=f.getMatrix();a.transform(g[0],g[1],g[2],g[3],g[4],g[5]),a.beginPath();let S;if(h)S=h.call(this,a,this);else{var d=this.clipX(),_=this.clipY();a.rect(d||0,_||0,o,l)}a.clip.apply(a,S),g=f.copy().invert().getMatrix(),a.transform(g[0],g[1],g[2],g[3],g[4],g[5])}var y=!p&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";y&&(a.save(),a._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(S){S[t](i,r,n)}),y&&a.restore(),c&&a.restore()}getClientRect(t={}){var i,r=t.skipTransform,n=t.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(i=this.children)===null||i===void 0||i.forEach(function(_){if(_.visible()){var y=_.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});y.width===0&&y.height===0||(s===void 0?(s=y.x,a=y.y,o=y.x+y.width,l=y.y+y.height):(s=Math.min(s,y.x),a=Math.min(a,y.y),o=Math.max(o,y.x+y.width),l=Math.max(l,y.y+y.height)))}});for(var p=this.find("Shape"),f=!1,g=0;g<p.length;g++){var d=p[g];if(d._isVisible(this)){f=!0;break}}return f&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},r?h:this._transformedRect(h,n)}}fi.Container=gi;Vi.Factory.addComponentsGetterSetter(gi,"clip",["x","y","width","height"]);Vi.Factory.addGetterSetter(gi,"clipX",void 0,(0,Sn.getNumberValidator)());Vi.Factory.addGetterSetter(gi,"clipY",void 0,(0,Sn.getNumberValidator)());Vi.Factory.addGetterSetter(gi,"clipWidth",void 0,(0,Sn.getNumberValidator)());Vi.Factory.addGetterSetter(gi,"clipHeight",void 0,(0,Sn.getNumberValidator)());Vi.Factory.addGetterSetter(gi,"clipFunc");var vh={},oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.releaseCapture=oe.setPointerCapture=oe.hasPointerCapture=oe.createEvent=oe.getCapturedShape=void 0;const sd=ct,dr=new Map,_h=sd.Konva._global.PointerEvent!==void 0;function ad(e){return dr.get(e)}oe.getCapturedShape=ad;function Ta(e){return{evt:e,pointerId:e.pointerId}}oe.createEvent=Ta;function od(e,t){return dr.get(e)===t}oe.hasPointerCapture=od;function ld(e,t){mh(e),t.getStage()&&(dr.set(e,t),_h&&t._fire("gotpointercapture",Ta(new PointerEvent("gotpointercapture"))))}oe.setPointerCapture=ld;function mh(e,t){const i=dr.get(e);if(!i)return;const r=i.getStage();r&&r.content,dr.delete(e),_h&&i._fire("lostpointercapture",Ta(new PointerEvent("lostpointercapture")))}oe.releaseCapture=mh;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Ot,i=ut,r=fi,n=ct,s=ve,a=bn,o=ct,l=oe;var h="Stage",c="string",p="px",f="mouseout",g="mouseleave",d="mouseover",_="mouseenter",y="mousemove",S="mousedown",x="mouseup",u="pointermove",v="pointerdown",b="pointerup",T="pointercancel",N="lostpointercapture",w="pointerout",M="pointerleave",E="pointerover",F="pointerenter",I="contextmenu",U="touchstart",Z="touchend",j="touchmove",K="touchcancel",J="wheel",q=5,dt=[[_,"_pointerenter"],[S,"_pointerdown"],[y,"_pointermove"],[x,"_pointerup"],[g,"_pointerleave"],[U,"_pointerdown"],[j,"_pointermove"],[Z,"_pointerup"],[K,"_pointercancel"],[d,"_pointerover"],[J,"_wheel"],[I,"_contextmenu"],[v,"_pointerdown"],[u,"_pointermove"],[b,"_pointerup"],[T,"_pointercancel"],[N,"_lostpointercapture"]];const Y={mouse:{[w]:f,[M]:g,[E]:d,[F]:_,[u]:y,[v]:S,[b]:x,[T]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[M]:"touchleave",[E]:"touchover",[F]:"touchenter",[u]:j,[v]:U,[b]:Z,[T]:K,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[M]:M,[E]:E,[F]:F,[u]:u,[v]:v,[b]:b,[T]:T,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},X=R=>R.indexOf("pointer")>=0?"pointer":R.indexOf("touch")>=0?"touch":"mouse",nt=R=>{const P=X(R);if(P==="pointer")return n.Konva.pointerEventsEnabled&&Y.pointer;if(P==="touch")return Y.touch;if(P==="mouse")return Y.mouse};function bt(R={}){return(R.clipFunc||R.clipWidth||R.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),R}const mt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class V extends r.Container{constructor(P){super(bt(P)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{bt(this.attrs)}),this._checkVisibility()}_validateAdd(P){const k=P.getType()==="Layer",H=P.getType()==="FastLayer";k||H||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const P=this.visible()?"":"none";this.content.style.display=P}setContainer(P){if(typeof P===c){if(P.charAt(0)==="."){var k=P.slice(1);P=document.getElementsByClassName(k)[0]}else{var H;P.charAt(0)!=="#"?H=P:H=P.slice(1),P=document.getElementById(H)}if(!P)throw"Can not find container in document with id "+H}return this._setAttr("container",P),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),P.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var P=this.children,k=P.length,H;for(H=0;H<k;H++)P[H].clear();return this}clone(P){return P||(P={}),P.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,P)}destroy(){super.destroy();var P=this.content;P&&t.Util._isInDocument(P)&&this.container().removeChild(P);var k=e.stages.indexOf(this);return k>-1&&e.stages.splice(k,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const P=this._pointerPositions[0]||this._changedPointerPositions[0];return P?{x:P.x,y:P.y}:(t.Util.warn(mt),null)}_getPointerById(P){return this._pointerPositions.find(k=>k.id===P)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(P){P=P||{},P.x=P.x||0,P.y=P.y||0,P.width=P.width||this.width(),P.height=P.height||this.height();var k=new s.SceneCanvas({width:P.width,height:P.height,pixelRatio:P.pixelRatio||1}),H=k.getContext()._context,ht=this.children;return(P.x||P.y)&&H.translate(-1*P.x,-1*P.y),ht.forEach(function(ft){if(ft.isVisible()){var wt=ft._toKonvaCanvas(P);H.drawImage(wt._canvas,P.x,P.y,wt.getWidth()/wt.getPixelRatio(),wt.getHeight()/wt.getPixelRatio())}}),k}getIntersection(P){if(!P)return null;var k=this.children,H=k.length,ht=H-1,ft;for(ft=ht;ft>=0;ft--){const wt=k[ft].getIntersection(P);if(wt)return wt}return null}_resizeDOM(){var P=this.width(),k=this.height();this.content&&(this.content.style.width=P+p,this.content.style.height=k+p),this.bufferCanvas.setSize(P,k),this.bufferHitCanvas.setSize(P,k),this.children.forEach(H=>{H.setSize({width:P,height:k}),H.draw()})}add(P,...k){if(arguments.length>1){for(var H=0;H<arguments.length;H++)this.add(arguments[H]);return this}super.add(P);var ht=this.children.length;return ht>q&&t.Util.warn("The stage has "+ht+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),P.setSize({width:this.width(),height:this.height()}),P.draw(),n.Konva.isBrowser&&this.content.appendChild(P.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(P){return l.hasPointerCapture(P,this)}setPointerCapture(P){l.setPointerCapture(P,this)}releaseCapture(P){l.releaseCapture(P,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&dt.forEach(([P,k])=>{this.content.addEventListener(P,H=>{this[k](H)},{passive:!1})})}_pointerenter(P){this.setPointersPositions(P);const k=nt(P.type);k&&this._fire(k.pointerenter,{evt:P,target:this,currentTarget:this})}_pointerover(P){this.setPointersPositions(P);const k=nt(P.type);k&&this._fire(k.pointerover,{evt:P,target:this,currentTarget:this})}_getTargetShape(P){let k=this[P+"targetShape"];return k&&!k.getStage()&&(k=null),k}_pointerleave(P){const k=nt(P.type),H=X(P.type);if(k){this.setPointersPositions(P);var ht=this._getTargetShape(H),ft=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;ht&&ft?(ht._fireAndBubble(k.pointerout,{evt:P}),ht._fireAndBubble(k.pointerleave,{evt:P}),this._fire(k.pointerleave,{evt:P,target:this,currentTarget:this}),this[H+"targetShape"]=null):ft&&(this._fire(k.pointerleave,{evt:P,target:this,currentTarget:this}),this._fire(k.pointerout,{evt:P,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(P){const k=nt(P.type),H=X(P.type);if(k){this.setPointersPositions(P);var ht=!1;this._changedPointerPositions.forEach(ft=>{var wt=this.getIntersection(ft);if(a.DD.justDragged=!1,n.Konva["_"+H+"ListenClick"]=!0,!wt||!wt.isListening()){this[H+"ClickStartShape"]=void 0;return}n.Konva.capturePointerEventsEnabled&&wt.setPointerCapture(ft.id),this[H+"ClickStartShape"]=wt,wt._fireAndBubble(k.pointerdown,{evt:P,pointerId:ft.id}),ht=!0;const m=P.type.indexOf("touch")>=0;wt.preventDefault()&&P.cancelable&&m&&P.preventDefault()}),ht||this._fire(k.pointerdown,{evt:P,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(P){const k=nt(P.type),H=X(P.type);if(!k)return;n.Konva.isDragging()&&a.DD.node.preventDefault()&&P.cancelable&&P.preventDefault(),this.setPointersPositions(P);var ht=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;if(!ht)return;var ft={};let wt=!1;var m=this._getTargetShape(H);this._changedPointerPositions.forEach(C=>{const A=l.getCapturedShape(C.id)||this.getIntersection(C),D=C.id,O={evt:P,pointerId:D};var L=m!==A;if(L&&m&&(m._fireAndBubble(k.pointerout,{...O},A),m._fireAndBubble(k.pointerleave,{...O},A)),A){if(ft[A._id])return;ft[A._id]=!0}A&&A.isListening()?(wt=!0,L&&(A._fireAndBubble(k.pointerover,{...O},m),A._fireAndBubble(k.pointerenter,{...O},m),this[H+"targetShape"]=A),A._fireAndBubble(k.pointermove,{...O})):m&&(this._fire(k.pointerover,{evt:P,target:this,currentTarget:this,pointerId:D}),this[H+"targetShape"]=null)}),wt||this._fire(k.pointermove,{evt:P,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(P){const k=nt(P.type),H=X(P.type);if(!k)return;this.setPointersPositions(P);const ht=this[H+"ClickStartShape"],ft=this[H+"ClickEndShape"];var wt={};let m=!1;this._changedPointerPositions.forEach(C=>{const A=l.getCapturedShape(C.id)||this.getIntersection(C);if(A){if(A.releaseCapture(C.id),wt[A._id])return;wt[A._id]=!0}const D=C.id,O={evt:P,pointerId:D};let L=!1;n.Konva["_"+H+"InDblClickWindow"]?(L=!0,clearTimeout(this[H+"DblTimeout"])):a.DD.justDragged||(n.Konva["_"+H+"InDblClickWindow"]=!0,clearTimeout(this[H+"DblTimeout"])),this[H+"DblTimeout"]=setTimeout(function(){n.Konva["_"+H+"InDblClickWindow"]=!1},n.Konva.dblClickWindow),A&&A.isListening()?(m=!0,this[H+"ClickEndShape"]=A,A._fireAndBubble(k.pointerup,{...O}),n.Konva["_"+H+"ListenClick"]&&ht&&ht===A&&(A._fireAndBubble(k.pointerclick,{...O}),L&&ft&&ft===A&&A._fireAndBubble(k.pointerdblclick,{...O}))):(this[H+"ClickEndShape"]=null,n.Konva["_"+H+"ListenClick"]&&this._fire(k.pointerclick,{evt:P,target:this,currentTarget:this,pointerId:D}),L&&this._fire(k.pointerdblclick,{evt:P,target:this,currentTarget:this,pointerId:D}))}),m||this._fire(k.pointerup,{evt:P,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+H+"ListenClick"]=!1,P.cancelable&&H!=="touch"&&P.preventDefault()}_contextmenu(P){this.setPointersPositions(P);var k=this.getIntersection(this.getPointerPosition());k&&k.isListening()?k._fireAndBubble(I,{evt:P}):this._fire(I,{evt:P,target:this,currentTarget:this})}_wheel(P){this.setPointersPositions(P);var k=this.getIntersection(this.getPointerPosition());k&&k.isListening()?k._fireAndBubble(J,{evt:P}):this._fire(J,{evt:P,target:this,currentTarget:this})}_pointercancel(P){this.setPointersPositions(P);const k=l.getCapturedShape(P.pointerId)||this.getIntersection(this.getPointerPosition());k&&k._fireAndBubble(b,l.createEvent(P)),l.releaseCapture(P.pointerId)}_lostpointercapture(P){l.releaseCapture(P.pointerId)}setPointersPositions(P){var k=this._getContentPosition(),H=null,ht=null;P=P||window.event,P.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(P.touches,ft=>{this._pointerPositions.push({id:ft.identifier,x:(ft.clientX-k.left)/k.scaleX,y:(ft.clientY-k.top)/k.scaleY})}),Array.prototype.forEach.call(P.changedTouches||P.touches,ft=>{this._changedPointerPositions.push({id:ft.identifier,x:(ft.clientX-k.left)/k.scaleX,y:(ft.clientY-k.top)/k.scaleY})})):(H=(P.clientX-k.left)/k.scaleX,ht=(P.clientY-k.top)/k.scaleY,this.pointerPos={x:H,y:ht},this._pointerPositions=[{x:H,y:ht,id:t.Util._getFirstPointerId(P)}],this._changedPointerPositions=[{x:H,y:ht,id:t.Util._getFirstPointerId(P)}])}_setPointerPosition(P){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(P)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var P=this.content.getBoundingClientRect();return{top:P.top,left:P.left,scaleX:P.width/this.content.clientWidth||1,scaleY:P.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!n.Konva.isBrowser){var P=this.container();if(!P)throw"Stage has no container. A container is required.";P.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),P.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(P){P.batchDraw()}),this}}e.Stage=V,V.prototype.nodeType=h,(0,o._registerNode)(V),i.Factory.addGetterSetter(V,"container"),n.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(R=>{R.batchDraw()})})})(vh);var yr={},Vt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=ct,i=Ot,r=ut,n=Nt,s=Q,a=ct,o=oe;var l="hasShadow",h="shadowRGBA",c="patternImage",p="linearGradient",f="radialGradient";let g;function d(){return g||(g=i.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function _(M){const E=this.attrs.fillRule;E?M.fill(E):M.fill()}function y(M){M.stroke()}function S(M){const E=this.attrs.fillRule;E?M.fill(E):M.fill()}function x(M){M.stroke()}function u(){this._clearCache(l)}function v(){this._clearCache(h)}function b(){this._clearCache(c)}function T(){this._clearCache(p)}function N(){this._clearCache(f)}class w extends n.Node{constructor(E){super(E);let F;for(;F=i.Util.getRandomColor(),!(F&&!(F in e.shapes)););this.colorKey=F,e.shapes[F]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var E=d();const F=E.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(F&&F.setTransform){const I=new i.Transform;I.translate(this.fillPatternX(),this.fillPatternY()),I.rotate(t.Konva.getAngle(this.fillPatternRotation())),I.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),I.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const U=I.getMatrix(),Z=typeof DOMMatrix>"u"?{a:U[0],b:U[1],c:U[2],d:U[3],e:U[4],f:U[5]}:new DOMMatrix(U);F.setTransform(Z)}return F}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){var E=this.fillLinearGradientColorStops();if(E){for(var F=d(),I=this.fillLinearGradientStartPoint(),U=this.fillLinearGradientEndPoint(),Z=F.createLinearGradient(I.x,I.y,U.x,U.y),j=0;j<E.length;j+=2)Z.addColorStop(E[j],E[j+1]);return Z}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){var E=this.fillRadialGradientColorStops();if(E){for(var F=d(),I=this.fillRadialGradientStartPoint(),U=this.fillRadialGradientEndPoint(),Z=F.createRadialGradient(I.x,I.y,this.fillRadialGradientStartRadius(),U.x,U.y,this.fillRadialGradientEndRadius()),j=0;j<E.length;j+=2)Z.addColorStop(E[j],E[j+1]);return Z}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var E=i.Util.colorToRGBA(this.shadowColor());if(E)return"rgba("+E.r+","+E.g+","+E.b+","+E.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const E=this.hitStrokeWidth();return E==="auto"?this.hasStroke():this.strokeEnabled()&&!!E}intersects(E){var F=this.getStage();if(!F)return!1;const I=F.bufferHitCanvas;return I.getContext().clear(),this.drawHit(I,void 0,!0),I.context.getImageData(Math.round(E.x),Math.round(E.y),1,1).data[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(E){var F;if(!((F=this.attrs.perfectDrawEnabled)!==null&&F!==void 0?F:!0))return!1;const U=E||this.hasFill(),Z=this.hasStroke(),j=this.getAbsoluteOpacity()!==1;if(U&&Z&&j)return!0;const K=this.hasShadow(),J=this.shadowForStrokeEnabled();return!!(U&&Z&&K&&J)}setStrokeHitEnabled(E){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),E?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var E=this.size();return{x:this._centroid?-E.width/2:0,y:this._centroid?-E.height/2:0,width:E.width,height:E.height}}getClientRect(E={}){let F=!1,I=this.getParent();for(;I;){if(I.isCached()){F=!0;break}I=I.getParent()}const U=E.skipTransform,Z=E.relativeTo||F&&this.getStage()||void 0,j=this.getSelfRect(),J=!E.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,q=j.width+J,dt=j.height+J,Y=!E.skipShadow&&this.hasShadow(),X=Y?this.shadowOffsetX():0,nt=Y?this.shadowOffsetY():0,bt=q+Math.abs(X),mt=dt+Math.abs(nt),V=Y&&this.shadowBlur()||0,R=bt+V*2,P=mt+V*2,k={width:R,height:P,x:-(J/2+V)+Math.min(X,0)+j.x,y:-(J/2+V)+Math.min(nt,0)+j.y};return U?k:this._transformedRect(k,Z)}drawScene(E,F,I){var U=this.getLayer(),Z=E||U.getCanvas(),j=Z.getContext(),K=this._getCanvasCache(),J=this.getSceneFunc(),q=this.hasShadow(),dt,Y,X=Z.isCache,nt=F===this;if(!this.isVisible()&&!nt)return this;if(K){j.save();var bt=this.getAbsoluteTransform(F).getMatrix();return j.transform(bt[0],bt[1],bt[2],bt[3],bt[4],bt[5]),this._drawCachedSceneCanvas(j),j.restore(),this}if(!J)return this;if(j.save(),this._useBufferCanvas()&&!X){dt=this.getStage();const R=I||dt.bufferCanvas;Y=R.getContext(),Y.clear(),Y.save(),Y._applyLineJoin(this);var mt=this.getAbsoluteTransform(F).getMatrix();Y.transform(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5]),J.call(this,Y,this),Y.restore();var V=R.pixelRatio;q&&j._applyShadow(this),j._applyOpacity(this),j._applyGlobalCompositeOperation(this),j.drawImage(R._canvas,0,0,R.width/V,R.height/V)}else{if(j._applyLineJoin(this),!nt){var mt=this.getAbsoluteTransform(F).getMatrix();j.transform(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5]),j._applyOpacity(this),j._applyGlobalCompositeOperation(this)}q&&j._applyShadow(this),J.call(this,j,this)}return j.restore(),this}drawHit(E,F,I=!1){if(!this.shouldDrawHit(F,I))return this;var U=this.getLayer(),Z=E||U.hitCanvas,j=Z&&Z.getContext(),K=this.hitFunc()||this.sceneFunc(),J=this._getCanvasCache(),q=J&&J.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),q){j.save();var dt=this.getAbsoluteTransform(F).getMatrix();return j.transform(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]),this._drawCachedHitCanvas(j),j.restore(),this}if(!K)return this;if(j.save(),j._applyLineJoin(this),!(this===F)){var X=this.getAbsoluteTransform(F).getMatrix();j.transform(X[0],X[1],X[2],X[3],X[4],X[5])}return K.call(this,j,this),j.restore(),this}drawHitFromCache(E=0){var F=this._getCanvasCache(),I=this._getCachedSceneCanvas(),U=F.hit,Z=U.getContext(),j=U.getWidth(),K=U.getHeight(),J,q,dt,Y,X,nt;Z.clear(),Z.drawImage(I._canvas,0,0,j,K);try{for(J=Z.getImageData(0,0,j,K),q=J.data,dt=q.length,Y=i.Util._hexToRgb(this.colorKey),X=0;X<dt;X+=4)nt=q[X+3],nt>E?(q[X]=Y.r,q[X+1]=Y.g,q[X+2]=Y.b,q[X+3]=255):q[X+3]=0;Z.putImageData(J,0,0)}catch(bt){i.Util.error("Unable to draw hit graph from cached scene canvas. "+bt.message)}return this}hasPointerCapture(E){return o.hasPointerCapture(E,this)}setPointerCapture(E){o.setPointerCapture(E,this)}releaseCapture(E){o.releaseCapture(E,this)}}e.Shape=w,w.prototype._fillFunc=_,w.prototype._strokeFunc=y,w.prototype._fillFuncHit=S,w.prototype._strokeFuncHit=x,w.prototype._centroid=!1,w.prototype.nodeType="Shape",(0,a._registerNode)(w),w.prototype.eventListeners={},w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",u),w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",b),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",T),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",N),r.Factory.addGetterSetter(w,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(w,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(w,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(w,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(w,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(w,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(w,"lineJoin"),r.Factory.addGetterSetter(w,"lineCap"),r.Factory.addGetterSetter(w,"sceneFunc"),r.Factory.addGetterSetter(w,"hitFunc"),r.Factory.addGetterSetter(w,"dash"),r.Factory.addGetterSetter(w,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(w,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(w,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(w,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternImage"),r.Factory.addGetterSetter(w,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(w,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(w,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(w,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(w,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(w,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(w,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(w,"fillEnabled",!0),r.Factory.addGetterSetter(w,"strokeEnabled",!0),r.Factory.addGetterSetter(w,"shadowEnabled",!0),r.Factory.addGetterSetter(w,"dashEnabled",!0),r.Factory.addGetterSetter(w,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(w,"fillPriority","color"),r.Factory.addComponentsGetterSetter(w,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(w,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(w,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(w,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(w,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(w,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(w,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(w,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(w,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(w,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(w,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(w,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(w,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(w,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(w,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(w,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(w,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(w,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(w,"fillPatternRotation",0),r.Factory.addGetterSetter(w,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(w,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Vt);Object.defineProperty(yr,"__esModule",{value:!0});yr.Layer=void 0;const Re=Ot,Cs=fi,wi=Nt,Ea=ut,No=ve,hd=Q,cd=Vt,ud=ct;var dd="#",fd="beforeDraw",gd="draw",yh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],pd=yh.length;class $i extends Cs.Container{constructor(t){super(t),this.canvas=new No.SceneCanvas,this.hitCanvas=new No.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){wi.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=wi.Node.prototype.moveUp.call(this);if(!t)return!1;var i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(wi.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(wi.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return wi.Node.prototype.remove.call(this),t&&t.parentNode&&Re.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&Re.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),wi.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Re.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Re.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Re.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var i=1,r=!1;;){for(let n=0;n<pd;n++){const s=yh[n],a=this._getIntersection({x:t.x+s.x*i,y:t.y+s.y*i}),o=a.shape;if(o)return o;if(r=!!a.antialiased,!a.antialiased)break}if(r)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,n=r[3];if(n===255){const s=Re.Util._rgbToHex(r[0],r[1],r[2]),a=cd.shapes[dd+s];return a?{shape:a}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(t,i){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire(fd,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),Cs.Container.prototype.drawScene.call(this,n,i),this._fire(gd,{node:this}),this}drawHit(t,i){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Cs.Container.prototype.drawHit.call(this,n,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Re.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Re.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,i=!!this.hitCanvas._canvas.parentNode;i?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Re.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}yr.Layer=$i;$i.prototype.nodeType="Layer";(0,ud._registerNode)($i);Ea.Factory.addGetterSetter($i,"imageSmoothingEnabled",!0);Ea.Factory.addGetterSetter($i,"clearBeforeDraw",!0);Ea.Factory.addGetterSetter($i,"hitGraphEnabled",!0,(0,hd.getBooleanValidator)());var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.FastLayer=void 0;const vd=Ot,_d=yr,md=ct;class Aa extends _d.Layer{constructor(t){super(t),this.listening(!1),vd.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Cn.FastLayer=Aa;Aa.prototype.nodeType="FastLayer";(0,md._registerNode)(Aa);var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.Group=void 0;const yd=Ot,bd=fi,Sd=ct;class Fa extends bd.Container{_validateAdd(t){var i=t.getType();i!=="Group"&&i!=="Shape"&&yd.Util.throw("You may only add groups and shapes to groups.")}}Hi.Group=Fa;Fa.prototype.nodeType="Group";(0,Sd._registerNode)(Fa);var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Animation=void 0;const ws=ct,Oo=Ot,xs=function(){return ws.glob.performance&&ws.glob.performance.now?function(){return ws.glob.performance.now()}:function(){return new Date().getTime()}}();class xe{constructor(t,i){this.id=xe.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:xs(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,r=i.length;for(let n=0;n<r;n++)if(i[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=xe.animations,r=i.length;for(let n=0;n<r;n++)if(i[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=xs(),xe._addAnimation(this),this}stop(){return xe._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,r=this.animations,n=r.length;for(let s=0;s<n;s++)if(r[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){const t={},i=this.animations;for(let r=0;r<i.length;r++){const n=i[r],s=n.layers,a=n.func;n._updateFrameObject(xs());const o=s.length;let l;if(a?l=a.call(n,n.frame)!==!1:l=!0,!!l)for(let h=0;h<o;h++){const c=s[h];c._id!==void 0&&(t[c._id]=c)}}for(let r in t)t.hasOwnProperty(r)&&t[r].batchDraw()}static _animationLoop(){const t=xe;t.animations.length?(t._runFrames(),Oo.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Oo.Util.requestAnimFrame(this._animationLoop))}}Wi.Animation=xe;xe.animations=[];xe.animIdCounter=0;xe.animRunning=!1;var bh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Ot,i=Wi,r=Nt,n=ct;var s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,l=3,h=0,c=["fill","stroke","shadowColor"];class p{constructor(d,_,y,S,x,u,v){this.prop=d,this.propFunc=_,this.begin=S,this._pos=S,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=y,this._change=x-this.begin,this.pause()}fire(d){var _=this[d];_&&_()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var d=this.getTimer()-this._startTime;this.state===o?this.setTime(d):this.state===l&&this.setTime(this.duration-d)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class f{constructor(d){var _=this,y=d.node,S=y._id,x,u=d.easing||e.Easings.Linear,v=!!d.yoyo,b;typeof d.duration>"u"?x=.3:d.duration===0?x=.001:x=d.duration,this.node=y,this._id=h++;var T=y.getLayer()||(y instanceof n.Konva.Stage?y.getLayers():null);T||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){_.tween.onEnterFrame()},T),this.tween=new p(b,function(N){_._tweenFunc(N)},u,0,1,x*1e3,v),this._addListeners(),f.attrs[S]||(f.attrs[S]={}),f.attrs[S][this._id]||(f.attrs[S][this._id]={}),f.tweens[S]||(f.tweens[S]={});for(b in d)s[b]===void 0&&this._addAttr(b,d[b]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,_){var y=this.node,S=y._id,x,u,v,b,T,N,w,M;if(v=f.tweens[S][d],v&&delete f.attrs[S][v][d],x=y.getAttr(d),t.Util._isArray(_))if(u=[],T=Math.max(_.length,x.length),d==="points"&&_.length!==x.length&&(_.length>x.length?(w=x,x=t.Util._prepareArrayForTween(x,_,y.closed())):(N=_,_=t.Util._prepareArrayForTween(_,x,y.closed()))),d.indexOf("fill")===0)for(b=0;b<T;b++)if(b%2===0)u.push(_[b]-x[b]);else{var E=t.Util.colorToRGBA(x[b]);M=t.Util.colorToRGBA(_[b]),x[b]=E,u.push({r:M.r-E.r,g:M.g-E.g,b:M.b-E.b,a:M.a-E.a})}else for(b=0;b<T;b++)u.push(_[b]-x[b]);else c.indexOf(d)!==-1?(x=t.Util.colorToRGBA(x),M=t.Util.colorToRGBA(_),u={r:M.r-x.r,g:M.g-x.g,b:M.b-x.b,a:M.a-x.a}):u=_-x;f.attrs[S][this._id][d]={start:x,diff:u,end:_,trueEnd:N,trueStart:w},f.tweens[S][d]=this._id}_tweenFunc(d){var _=this.node,y=f.attrs[_._id][this._id],S,x,u,v,b,T,N,w;for(S in y){if(x=y[S],u=x.start,v=x.diff,w=x.end,t.Util._isArray(u))if(b=[],N=Math.max(u.length,w.length),S.indexOf("fill")===0)for(T=0;T<N;T++)T%2===0?b.push((u[T]||0)+v[T]*d):b.push("rgba("+Math.round(u[T].r+v[T].r*d)+","+Math.round(u[T].g+v[T].g*d)+","+Math.round(u[T].b+v[T].b*d)+","+(u[T].a+v[T].a*d)+")");else for(T=0;T<N;T++)b.push((u[T]||0)+v[T]*d);else c.indexOf(S)!==-1?b="rgba("+Math.round(u.r+v.r*d)+","+Math.round(u.g+v.g*d)+","+Math.round(u.b+v.b*d)+","+(u.a+v.a*d)+")":b=u+v*d;_.setAttr(S,b)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var d=this.node,_=f.attrs[d._id][this._id];_.points&&_.points.trueEnd&&d.setAttr("points",_.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var d=this.node,_=f.attrs[d._id][this._id];_.points&&_.points.trueStart&&d.points(_.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(d*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var d=this.node._id,_=this._id,y=f.tweens[d],S;this.pause();for(S in y)delete f.tweens[d][S];delete f.attrs[d][_]}}e.Tween=f,f.attrs={},f.tweens={},r.Node.prototype.to=function(g){var d=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),d&&d()};var _=new f(g);_.play()},e.Easings={BackEaseIn(g,d,_,y){var S=1.70158;return _*(g/=y)*g*((S+1)*g-S)+d},BackEaseOut(g,d,_,y){var S=1.70158;return _*((g=g/y-1)*g*((S+1)*g+S)+1)+d},BackEaseInOut(g,d,_,y){var S=1.70158;return(g/=y/2)<1?_/2*(g*g*(((S*=1.525)+1)*g-S))+d:_/2*((g-=2)*g*(((S*=1.525)+1)*g+S)+2)+d},ElasticEaseIn(g,d,_,y,S,x){var u=0;return g===0?d:(g/=y)===1?d+_:(x||(x=y*.3),!S||S<Math.abs(_)?(S=_,u=x/4):u=x/(2*Math.PI)*Math.asin(_/S),-(S*Math.pow(2,10*(g-=1))*Math.sin((g*y-u)*(2*Math.PI)/x))+d)},ElasticEaseOut(g,d,_,y,S,x){var u=0;return g===0?d:(g/=y)===1?d+_:(x||(x=y*.3),!S||S<Math.abs(_)?(S=_,u=x/4):u=x/(2*Math.PI)*Math.asin(_/S),S*Math.pow(2,-10*g)*Math.sin((g*y-u)*(2*Math.PI)/x)+_+d)},ElasticEaseInOut(g,d,_,y,S,x){var u=0;return g===0?d:(g/=y/2)===2?d+_:(x||(x=y*(.3*1.5)),!S||S<Math.abs(_)?(S=_,u=x/4):u=x/(2*Math.PI)*Math.asin(_/S),g<1?-.5*(S*Math.pow(2,10*(g-=1))*Math.sin((g*y-u)*(2*Math.PI)/x))+d:S*Math.pow(2,-10*(g-=1))*Math.sin((g*y-u)*(2*Math.PI)/x)*.5+_+d)},BounceEaseOut(g,d,_,y){return(g/=y)<1/2.75?_*(7.5625*g*g)+d:g<2/2.75?_*(7.5625*(g-=1.5/2.75)*g+.75)+d:g<2.5/2.75?_*(7.5625*(g-=2.25/2.75)*g+.9375)+d:_*(7.5625*(g-=2.625/2.75)*g+.984375)+d},BounceEaseIn(g,d,_,y){return _-e.Easings.BounceEaseOut(y-g,0,_,y)+d},BounceEaseInOut(g,d,_,y){return g<y/2?e.Easings.BounceEaseIn(g*2,0,_,y)*.5+d:e.Easings.BounceEaseOut(g*2-y,0,_,y)*.5+_*.5+d},EaseIn(g,d,_,y){return _*(g/=y)*g+d},EaseOut(g,d,_,y){return-_*(g/=y)*(g-2)+d},EaseInOut(g,d,_,y){return(g/=y/2)<1?_/2*g*g+d:-_/2*(--g*(g-2)-1)+d},StrongEaseIn(g,d,_,y){return _*(g/=y)*g*g*g*g+d},StrongEaseOut(g,d,_,y){return _*((g=g/y-1)*g*g*g*g+1)+d},StrongEaseInOut(g,d,_,y){return(g/=y/2)<1?_/2*g*g*g*g*g+d:_/2*((g-=2)*g*g*g*g+2)+d},Linear(g,d,_,y){return _*g/y+d}}})(bh);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=ct,i=Ot,r=Nt,n=fi,s=vh,a=yr,o=Cn,l=Hi,h=bn,c=Vt,p=Wi,f=bh,g=De,d=ve;e.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:r.Node,Container:n.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:h.DD,Shape:c.Shape,shapes:c.shapes,Animation:p.Animation,Tween:f.Tween,Easings:f.Easings,Context:g.Context,Canvas:d.Canvas}),e.default=e.Konva})(dh);var wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.Arc=void 0;const xn=ut,Cd=Vt,ko=ct,Pn=Q,wd=ct;class Ue extends Cd.Shape{_sceneFunc(t){var i=ko.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,r),t.arc(0,0,this.innerRadius(),i,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),r=this.clockwise(),n=ko.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(n,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),l=Math.sin(Math.min(n,Math.PI/2)),h=s*(s>0?t:i),c=a*i,p=o*(o>0?t:i),f=l*(l>0?i:t);return{x:h,y:r?-1*f:p,width:c-h,height:f-p}}}wn.Arc=Ue;Ue.prototype._centroid=!0;Ue.prototype.className="Arc";Ue.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,wd._registerNode)(Ue);xn.Factory.addGetterSetter(Ue,"innerRadius",0,(0,Pn.getNumberValidator)());xn.Factory.addGetterSetter(Ue,"outerRadius",0,(0,Pn.getNumberValidator)());xn.Factory.addGetterSetter(Ue,"angle",0,(0,Pn.getNumberValidator)());xn.Factory.addGetterSetter(Ue,"clockwise",!1,(0,Pn.getBooleanValidator)());var Tn={},br={};Object.defineProperty(br,"__esModule",{value:!0});br.Line=void 0;const En=ut,xd=Vt,Sh=Q,Pd=ct;function qs(e,t,i,r,n,s,a){var o=Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(s-r,2)),h=a*o/(o+l),c=a*l/(o+l),p=i-h*(n-e),f=r-h*(s-t),g=i+c*(n-e),d=r+c*(s-t);return[p,f,g,d]}function Do(e,t){var i=e.length,r=[],n,s;for(n=2;n<i-2;n+=2)s=qs(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(e[n]),r.push(e[n+1]),r.push(s[2]),r.push(s[3]));return r}class Qe extends xd.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var i=this.points(),r=i.length,n=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(r){if(t.beginPath(),t.moveTo(i[0],i[1]),n!==0&&r>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||t.quadraticCurveTo(o[l-2],o[l-1],i[r-2],i[r-1])}else if(a)for(h=2;h<r;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<r;h+=2)t.lineTo(i[h],i[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Do(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),i=t.length,r=this.tension(),n=qs(t[i-2],t[i-1],t[0],t[1],t[2],t[3],r),s=qs(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],r),a=Do(t,r),o=[n[2],n[3]].concat(a).concat([s[0],s[1],t[i-2],t[i-1],s[2],s[3],n[0],n[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);return{x:i,y:n,width:r-i,height:s-n}}}br.Line=Qe;Qe.prototype.className="Line";Qe.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Pd._registerNode)(Qe);En.Factory.addGetterSetter(Qe,"closed",!1);En.Factory.addGetterSetter(Qe,"bezier",!1);En.Factory.addGetterSetter(Qe,"tension",0,(0,Sh.getNumberValidator)());En.Factory.addGetterSetter(Qe,"points",[],(0,Sh.getNumberArrayValidator)());var ji={},Ch={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(a,o,l)=>{let h,c,p;h=l/2,c=0;for(let g=0;g<20;g++)p=h*e.tValues[20][g]+h,c+=e.cValues[20][g]*r(a,o,p);return h*c};e.getCubicArcLength=t;const i=(a,o,l)=>{l===void 0&&(l=1);const h=a[0]-2*a[1]+a[2],c=o[0]-2*o[1]+o[2],p=2*a[1]-2*a[0],f=2*o[1]-2*o[0],g=4*(h*h+c*c),d=4*(h*p+c*f),_=p*p+f*f;if(g===0)return l*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const y=d/(2*g),S=_/g,x=l+y,u=S-y*y,v=x*x+u>0?Math.sqrt(x*x+u):0,b=y*y+u>0?Math.sqrt(y*y+u):0,T=y+Math.sqrt(y*y+u)!==0?u*Math.log(Math.abs((x+v)/(y+b))):0;return Math.sqrt(g)/2*(x*v-y*b+T)};e.getQuadraticArcLength=i;function r(a,o,l){const h=n(1,l,a),c=n(1,l,o),p=h*h+c*c;return Math.sqrt(p)}const n=(a,o,l)=>{const h=l.length-1;let c,p;if(h===0)return 0;if(a===0){p=0;for(let f=0;f<=h;f++)p+=e.binomialCoefficients[h][f]*Math.pow(1-o,h-f)*Math.pow(o,f)*l[f];return p}else{c=new Array(h);for(let f=0;f<h;f++)c[f]=h*(l[f+1]-l[f]);return n(a-1,o,c)}},s=(a,o,l)=>{let h=1,c=a/o,p=(a-l(c))/o,f=0;for(;h>.001;){const g=l(c+p),d=Math.abs(a-g)/o;if(d<h)h=d,c+=p;else{const _=l(c-p),y=Math.abs(a-_)/o;y<h?(h=y,c-=p):p/=2}if(f++,f>500)break}return c};e.t2length=s})(Ch);Object.defineProperty(ji,"__esModule",{value:!0});ji.Path=void 0;const Td=ut,Ed=Vt,Ad=ct,xi=Ch;class Bt extends Ed.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Bt.parsePathData(this.data()),this.pathLength=Bt.getPathLength(this.dataArray)}_sceneFunc(t){var i=this.dataArray;t.beginPath();for(var r=!1,n=0;n<i.length;n++){var s=i[n].command,a=i[n].points;switch(s){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],h=a[2],c=a[3],p=a[4],f=a[5],g=a[6],d=a[7],_=h>c?h:c,y=h>c?1:h/c,S=h>c?c/h:1;t.translate(o,l),t.rotate(g),t.scale(y,S),t.arc(0,0,_,p,p+f,1-d),t.scale(1/y,1/S),t.rotate(-g),t.translate(-o,-l);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(h){if(h.command==="A"){var c=h.points[4],p=h.points[5],f=h.points[4]+p,g=Math.PI/180;if(Math.abs(c-f)<g&&(g=Math.abs(c-f)),p<0)for(let d=c-g;d>f;d-=g){const _=Bt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(_.x,_.y)}else for(let d=c+g;d<f;d+=g){const _=Bt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(_.x,_.y)}}else if(h.command==="C")for(let d=0;d<=1;d+=.01){const _=Bt.getPointOnCubicBezier(d,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);t.push(_.x,_.y)}else t=t.concat(h.points)});for(var i=t[0],r=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],isNaN(a)||(i=Math.min(i,a),r=Math.max(r,a)),isNaN(o)||(n=Math.min(n,o),s=Math.max(s,o));return{x:i,y:n,width:r-i,height:s-n}}getLength(){return this.pathLength}getPointAtLength(t){return Bt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,r,n){return Math.sqrt((r-t)*(r-t)+(n-i)*(n-i))}static getPathLength(t){let i=0;for(var r=0;r<t.length;++r)i+=t[r].pathLength;return i}static getPointAtLengthOfDataArray(t,i){var r,n=0,s=i.length;if(!s)return null;for(;n<s&&t>i[n].pathLength;)t-=i[n].pathLength,++n;if(n===s)return r=i[n-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=i[n].points.slice(0,2),{x:r[0],y:r[1]};var a=i[n],o=a.points;switch(a.command){case"L":return Bt.getPointOnLine(t,a.start.x,a.start.y,o[0],o[1]);case"C":return Bt.getPointOnCubicBezier((0,xi.t2length)(t,Bt.getPathLength(i),_=>(0,xi.getCubicArcLength)([a.start.x,o[0],o[2],o[4]],[a.start.y,o[1],o[3],o[5]],_)),a.start.x,a.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Bt.getPointOnQuadraticBezier((0,xi.t2length)(t,Bt.getPathLength(i),_=>(0,xi.getQuadraticArcLength)([a.start.x,o[0],o[2]],[a.start.y,o[1],o[3]],_)),a.start.x,a.start.y,o[0],o[1],o[2],o[3]);case"A":var l=o[0],h=o[1],c=o[2],p=o[3],f=o[4],g=o[5],d=o[6];return f+=g*t/a.pathLength,Bt.getPointOnEllipticalArc(l,h,c,p,f,d)}return null}static getPointOnLine(t,i,r,n,s,a,o){a=a??i,o=o??r;const l=this.getLineLength(i,r,n,s);if(l<1e-10)return{x:i,y:r};if(n===i)return{x:a,y:o+(s>r?t:-t)};const h=(s-r)/(n-i),c=Math.sqrt(t*t/(1+h*h))*(n<i?-1:1),p=h*c;if(Math.abs(o-r-h*(a-i))<1e-10)return{x:a+c,y:o+p};const f=((a-i)*(n-i)+(o-r)*(s-r))/(l*l),g=i+f*(n-i),d=r+f*(s-r),_=this.getLineLength(a,o,g,d),y=Math.sqrt(t*t-_*_),S=Math.sqrt(y*y/(1+h*h))*(n<i?-1:1),x=h*S;return{x:g+S,y:d+x}}static getPointOnCubicBezier(t,i,r,n,s,a,o,l,h){function c(y){return y*y*y}function p(y){return 3*y*y*(1-y)}function f(y){return 3*y*(1-y)*(1-y)}function g(y){return(1-y)*(1-y)*(1-y)}var d=l*c(t)+a*p(t)+n*f(t)+i*g(t),_=h*c(t)+o*p(t)+s*f(t)+r*g(t);return{x:d,y:_}}static getPointOnQuadraticBezier(t,i,r,n,s,a,o){function l(g){return g*g}function h(g){return 2*g*(1-g)}function c(g){return(1-g)*(1-g)}var p=a*l(t)+n*h(t)+i*c(t),f=o*l(t)+s*h(t)+r*c(t);return{x:p,y:f}}static getPointOnEllipticalArc(t,i,r,n,s,a){var o=Math.cos(a),l=Math.sin(a),h={x:r*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*o-h.y*l),y:i+(h.x*l+h.y*o)}}static parsePathData(t){if(!t)return[];var i=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)i=i.replace(new RegExp(r[n],"g"),"|"+r[n]);var s=i.split("|"),a=[],o=[],l=0,h=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,p;for(n=1;n<s.length;n++){var f=s[n],g=f.charAt(0);for(f=f.slice(1),o.length=0;p=c.exec(f);)o.push(p[0]);for(var d=[],_=0,y=o.length;_<y;_++){if(o[_]==="00"){d.push(0,0);continue}var S=parseFloat(o[_]);isNaN(S)?d.push(0):d.push(S)}for(;d.length>0&&!isNaN(d[0]);){var x="",u=[],v=l,b=h,T,N,w,M,E,F,I,U,Z,j;switch(g){case"l":l+=d.shift(),h+=d.shift(),x="L",u.push(l,h);break;case"L":l=d.shift(),h=d.shift(),u.push(l,h);break;case"m":var K=d.shift(),J=d.shift();if(l+=K,h+=J,x="M",a.length>2&&a[a.length-1].command==="z"){for(var q=a.length-2;q>=0;q--)if(a[q].command==="M"){l=a[q].points[0]+K,h=a[q].points[1]+J;break}}u.push(l,h),g="l";break;case"M":l=d.shift(),h=d.shift(),x="M",u.push(l,h),g="L";break;case"h":l+=d.shift(),x="L",u.push(l,h);break;case"H":l=d.shift(),x="L",u.push(l,h);break;case"v":h+=d.shift(),x="L",u.push(l,h);break;case"V":h=d.shift(),x="L",u.push(l,h);break;case"C":u.push(d.shift(),d.shift(),d.shift(),d.shift()),l=d.shift(),h=d.shift(),u.push(l,h);break;case"c":u.push(l+d.shift(),h+d.shift(),l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),x="C",u.push(l,h);break;case"S":N=l,w=h,T=a[a.length-1],T.command==="C"&&(N=l+(l-T.points[2]),w=h+(h-T.points[3])),u.push(N,w,d.shift(),d.shift()),l=d.shift(),h=d.shift(),x="C",u.push(l,h);break;case"s":N=l,w=h,T=a[a.length-1],T.command==="C"&&(N=l+(l-T.points[2]),w=h+(h-T.points[3])),u.push(N,w,l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),x="C",u.push(l,h);break;case"Q":u.push(d.shift(),d.shift()),l=d.shift(),h=d.shift(),u.push(l,h);break;case"q":u.push(l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),x="Q",u.push(l,h);break;case"T":N=l,w=h,T=a[a.length-1],T.command==="Q"&&(N=l+(l-T.points[0]),w=h+(h-T.points[1])),l=d.shift(),h=d.shift(),x="Q",u.push(N,w,l,h);break;case"t":N=l,w=h,T=a[a.length-1],T.command==="Q"&&(N=l+(l-T.points[0]),w=h+(h-T.points[1])),l+=d.shift(),h+=d.shift(),x="Q",u.push(N,w,l,h);break;case"A":M=d.shift(),E=d.shift(),F=d.shift(),I=d.shift(),U=d.shift(),Z=l,j=h,l=d.shift(),h=d.shift(),x="A",u=this.convertEndpointToCenterParameterization(Z,j,l,h,I,U,M,E,F);break;case"a":M=d.shift(),E=d.shift(),F=d.shift(),I=d.shift(),U=d.shift(),Z=l,j=h,l+=d.shift(),h+=d.shift(),x="A",u=this.convertEndpointToCenterParameterization(Z,j,l,h,I,U,M,E,F);break}a.push({command:x||g,points:u,start:{x:v,y:b},pathLength:this.calcLength(v,b,x||g,u)})}(g==="z"||g==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,i,r,n){var s,a,o,l,h=Bt;switch(r){case"L":return h.getLineLength(t,i,n[0],n[1]);case"C":return(0,xi.getCubicArcLength)([t,n[0],n[2],n[4]],[i,n[1],n[3],n[5]],1);case"Q":return(0,xi.getQuadraticArcLength)([t,n[0],n[2]],[i,n[1],n[3]],1);case"A":s=0;var c=n[4],p=n[5],f=n[4]+p,g=Math.PI/180;if(Math.abs(c-f)<g&&(g=Math.abs(c-f)),a=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),p<0)for(l=c-g;l>f;l-=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=c+g;l<f;l+=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],f,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,i,r,n,s,a,o,l,h){var c=h*(Math.PI/180),p=Math.cos(c)*(t-r)/2+Math.sin(c)*(i-n)/2,f=-1*Math.sin(c)*(t-r)/2+Math.cos(c)*(i-n)/2,g=p*p/(o*o)+f*f/(l*l);g>1&&(o*=Math.sqrt(g),l*=Math.sqrt(g));var d=Math.sqrt((o*o*(l*l)-o*o*(f*f)-l*l*(p*p))/(o*o*(f*f)+l*l*(p*p)));s===a&&(d*=-1),isNaN(d)&&(d=0);var _=d*o*f/l,y=d*-l*p/o,S=(t+r)/2+Math.cos(c)*_-Math.sin(c)*y,x=(i+n)/2+Math.sin(c)*_+Math.cos(c)*y,u=function(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])},v=function(E,F){return(E[0]*F[0]+E[1]*F[1])/(u(E)*u(F))},b=function(E,F){return(E[0]*F[1]<E[1]*F[0]?-1:1)*Math.acos(v(E,F))},T=b([1,0],[(p-_)/o,(f-y)/l]),N=[(p-_)/o,(f-y)/l],w=[(-1*p-_)/o,(-1*f-y)/l],M=b(N,w);return v(N,w)<=-1&&(M=Math.PI),v(N,w)>=1&&(M=0),a===0&&M>0&&(M=M-2*Math.PI),a===1&&M<0&&(M=M+2*Math.PI),[S,x,o,l,T,M,c,a]}}ji.Path=Bt;Bt.prototype.className="Path";Bt.prototype._attrsAffectingSize=["data"];(0,Ad._registerNode)(Bt);Td.Factory.addGetterSetter(Bt,"data");Object.defineProperty(Tn,"__esModule",{value:!0});Tn.Arrow=void 0;const An=ut,Fd=br,wh=Q,Rd=ct,Lo=ji;class pi extends Fd.Line{_sceneFunc(t){super._sceneFunc(t);var i=Math.PI*2,r=this.points(),n=r,s=this.tension()!==0&&r.length>4;s&&(n=this.getTensionPoints());var a=this.pointerLength(),o=r.length,l,h;if(s){const f=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],r[o-2],r[o-1]],g=Lo.Path.calcLength(n[n.length-4],n[n.length-3],"C",f),d=Lo.Path.getPointOnQuadraticBezier(Math.min(1,1-a/g),f[0],f[1],f[2],f[3],f[4],f[5]);l=r[o-2]-d.x,h=r[o-1]-d.y}else l=r[o-2]-r[o-4],h=r[o-1]-r[o-3];var c=(Math.atan2(h,l)+i)%i,p=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[o-2],r[o-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,p/2),t.lineTo(-a,-p/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),s?(l=(n[0]+n[2])/2-r[0],h=(n[1]+n[3])/2-r[1]):(l=r[2]-r[0],h=r[3]-r[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-a,p/2),t.lineTo(-a,-p/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x-i,y:t.y-i,width:t.width+i*2,height:t.height+i*2}}}Tn.Arrow=pi;pi.prototype.className="Arrow";(0,Rd._registerNode)(pi);An.Factory.addGetterSetter(pi,"pointerLength",10,(0,wh.getNumberValidator)());An.Factory.addGetterSetter(pi,"pointerWidth",10,(0,wh.getNumberValidator)());An.Factory.addGetterSetter(pi,"pointerAtBeginning",!1);An.Factory.addGetterSetter(pi,"pointerAtEnding",!0);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.Circle=void 0;const Md=ut,Nd=Vt,Od=Q,kd=ct;class zi extends Nd.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Fn.Circle=zi;zi.prototype._centroid=!0;zi.prototype.className="Circle";zi.prototype._attrsAffectingSize=["radius"];(0,kd._registerNode)(zi);Md.Factory.addGetterSetter(zi,"radius",0,(0,Od.getNumberValidator)());var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Ellipse=void 0;const Ra=ut,Dd=Vt,xh=Q,Ld=ct;class Ze extends Dd.Shape{_sceneFunc(t){var i=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),i!==r&&t.scale(1,r/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Rn.Ellipse=Ze;Ze.prototype.className="Ellipse";Ze.prototype._centroid=!0;Ze.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Ld._registerNode)(Ze);Ra.Factory.addComponentsGetterSetter(Ze,"radius",["x","y"]);Ra.Factory.addGetterSetter(Ze,"radiusX",0,(0,xh.getNumberValidator)());Ra.Factory.addGetterSetter(Ze,"radiusY",0,(0,xh.getNumberValidator)());var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.Image=void 0;const Ps=Ot,vi=ut,Gd=Vt,Id=ct,Sr=Q;let Ee=class Ph extends Gd.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),r=this.getHeight(),n=this.cornerRadius(),s=this.attrs.image;let a;if(s){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?a=[s,this.cropX(),this.cropY(),o,l,0,0,i,r]:a=[s,0,0,i,r]}(this.hasFill()||this.hasStroke()||n)&&(t.beginPath(),n?Ps.Util.drawRoundedRectPath(t,i,r,n):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)),s&&(n&&t.clip(),t.drawImage.apply(t,a))}_hitFunc(t){var i=this.width(),r=this.height(),n=this.cornerRadius();t.beginPath(),n?Ps.Util.drawRoundedRectPath(t,i,r,n):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i;return(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var t,i;return(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(t,i,r=null){var n=Ps.Util.createImageElement();n.onload=function(){var s=new Ph({image:n});i(s)},n.onerror=r,n.crossOrigin="Anonymous",n.src=t}};Mn.Image=Ee;Ee.prototype.className="Image";(0,Id._registerNode)(Ee);vi.Factory.addGetterSetter(Ee,"cornerRadius",0,(0,Sr.getNumberOrArrayOfNumbersValidator)(4));vi.Factory.addGetterSetter(Ee,"image");vi.Factory.addComponentsGetterSetter(Ee,"crop",["x","y","width","height"]);vi.Factory.addGetterSetter(Ee,"cropX",0,(0,Sr.getNumberValidator)());vi.Factory.addGetterSetter(Ee,"cropY",0,(0,Sr.getNumberValidator)());vi.Factory.addGetterSetter(Ee,"cropWidth",0,(0,Sr.getNumberValidator)());vi.Factory.addGetterSetter(Ee,"cropHeight",0,(0,Sr.getNumberValidator)());var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.Tag=Ii.Label=void 0;const Nn=ut,Ud=Vt,Bd=Hi,Ma=Q,Th=ct;var Eh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Vd="Change.konva",$d="none",Js="up",Qs="right",Zs="down",ta="left",Hd=Eh.length;class Na extends Bd.Group{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var i=this,r,n=function(){i._sync()};for(r=0;r<Hd;r++)t.on(Eh[r]+Vd,n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),i=this.getTag(),r,n,s,a,o,l,h;if(t&&i){switch(r=t.width(),n=t.height(),s=i.pointerDirection(),a=i.pointerWidth(),h=i.pointerHeight(),o=0,l=0,s){case Js:o=r/2,l=-1*h;break;case Qs:o=r+a,l=n/2;break;case Zs:o=r/2,l=n+h;break;case ta:o=-1*a,l=n/2;break}i.setAttrs({x:-1*o,y:-1*l,width:r,height:n}),t.setAttrs({x:-1*o,y:-1*l})}}}Ii.Label=Na;Na.prototype.className="Label";(0,Th._registerNode)(Na);class _i extends Ud.Shape{_sceneFunc(t){var i=this.width(),r=this.height(),n=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,h=0,c=0,p=0;typeof o=="number"?l=h=c=p=Math.min(o,i/2,r/2):(l=Math.min(o[0]||0,i/2,r/2),h=Math.min(o[1]||0,i/2,r/2),p=Math.min(o[2]||0,i/2,r/2),c=Math.min(o[3]||0,i/2,r/2)),t.beginPath(),t.moveTo(l,0),n===Js&&(t.lineTo((i-s)/2,0),t.lineTo(i/2,-1*a),t.lineTo((i+s)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),n===Qs&&(t.lineTo(i,(r-a)/2),t.lineTo(i+s,r/2),t.lineTo(i,(r+a)/2)),t.lineTo(i,r-p),t.arc(i-p,r-p,p,0,Math.PI/2,!1),n===Zs&&(t.lineTo((i+s)/2,r),t.lineTo(i/2,r+a),t.lineTo((i-s)/2,r)),t.lineTo(c,r),t.arc(c,r-c,c,Math.PI/2,Math.PI,!1),n===ta&&(t.lineTo(0,(r+a)/2),t.lineTo(-1*s,r/2),t.lineTo(0,(r-a)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,i=0,r=this.pointerWidth(),n=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===Js?(i-=n,o+=n):s===Zs?o+=n:s===ta?(t-=r*1.5,a+=r):s===Qs&&(a+=r*1.5),{x:t,y:i,width:a,height:o}}}Ii.Tag=_i;_i.prototype.className="Tag";(0,Th._registerNode)(_i);Nn.Factory.addGetterSetter(_i,"pointerDirection",$d);Nn.Factory.addGetterSetter(_i,"pointerWidth",0,(0,Ma.getNumberValidator)());Nn.Factory.addGetterSetter(_i,"pointerHeight",0,(0,Ma.getNumberValidator)());Nn.Factory.addGetterSetter(_i,"cornerRadius",0,(0,Ma.getNumberOrArrayOfNumbersValidator)(4));var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.Rect=void 0;const Wd=ut,jd=Vt,zd=ct,Kd=Ot,Yd=Q;class On extends jd.Shape{_sceneFunc(t){var i=this.cornerRadius(),r=this.width(),n=this.height();t.beginPath(),i?Kd.Util.drawRoundedRectPath(t,r,n,i):t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)}}Cr.Rect=On;On.prototype.className="Rect";(0,zd._registerNode)(On);Wd.Factory.addGetterSetter(On,"cornerRadius",0,(0,Yd.getNumberOrArrayOfNumbersValidator)(4));var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.RegularPolygon=void 0;const Ah=ut,Xd=Vt,Fh=Q,qd=ct;class mi extends Xd.Shape{_sceneFunc(t){const i=this._getPoints();t.beginPath(),t.moveTo(i[0].x,i[0].y);for(var r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,r=[];for(var n=0;n<t;n++)r.push({x:i*Math.sin(n*2*Math.PI/t),y:-1*i*Math.cos(n*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var i=t[0].x,r=t[0].y,n=t[0].x,s=t[0].y;return t.forEach(a=>{i=Math.min(i,a.x),r=Math.max(r,a.x),n=Math.min(n,a.y),s=Math.max(s,a.y)}),{x:i,y:n,width:r-i,height:s-n}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}kn.RegularPolygon=mi;mi.prototype.className="RegularPolygon";mi.prototype._centroid=!0;mi.prototype._attrsAffectingSize=["radius"];(0,qd._registerNode)(mi);Ah.Factory.addGetterSetter(mi,"radius",0,(0,Fh.getNumberValidator)());Ah.Factory.addGetterSetter(mi,"sides",0,(0,Fh.getNumberValidator)());var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.Ring=void 0;const Rh=ut,Jd=Vt,Mh=Q,Qd=ct;var Go=Math.PI*2;class yi extends Jd.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Go,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Go,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Dn.Ring=yi;yi.prototype.className="Ring";yi.prototype._centroid=!0;yi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Qd._registerNode)(yi);Rh.Factory.addGetterSetter(yi,"innerRadius",0,(0,Mh.getNumberValidator)());Rh.Factory.addGetterSetter(yi,"outerRadius",0,(0,Mh.getNumberValidator)());var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.Sprite=void 0;const bi=ut,Zd=Vt,tf=Wi,Nh=Q,ef=ct;class Ae extends Zd.Shape{constructor(t){super(t),this._updated=!0,this.anim=new tf.Animation(()=>{var i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+0],l=s[n+1],h=s[n+2],c=s[n+3],p=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),p)if(a){var f=a[i],g=r*2;t.drawImage(p,o,l,h,c,f[g+0],f[g+1],h,c)}else t.drawImage(p,o,l,h,c,0,0,h,c)}_hitFunc(t){var i=this.animation(),r=this.frameIndex(),n=r*4,s=this.animations()[i],a=this.frameOffsets(),o=s[n+2],l=s[n+3];if(t.beginPath(),a){var h=a[i],c=r*2;t.rect(h[c+0],h[c+1],o,l)}else t.rect(0,0,o,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),i=this.animation(),r=this.animations(),n=r[i],s=n.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}Ln.Sprite=Ae;Ae.prototype.className="Sprite";(0,ef._registerNode)(Ae);bi.Factory.addGetterSetter(Ae,"animation");bi.Factory.addGetterSetter(Ae,"animations");bi.Factory.addGetterSetter(Ae,"frameOffsets");bi.Factory.addGetterSetter(Ae,"image");bi.Factory.addGetterSetter(Ae,"frameIndex",0,(0,Nh.getNumberValidator)());bi.Factory.addGetterSetter(Ae,"frameRate",17,(0,Nh.getNumberValidator)());bi.Factory.backCompat(Ae,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.Star=void 0;const Oa=ut,rf=Vt,ka=Q,nf=ct;class ti extends rf.Shape{_sceneFunc(t){var i=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var s=1;s<n*2;s++){var a=s%2===0?r:i,o=a*Math.sin(s*Math.PI/n),l=-1*a*Math.cos(s*Math.PI/n);t.lineTo(o,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Gn.Star=ti;ti.prototype.className="Star";ti.prototype._centroid=!0;ti.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,nf._registerNode)(ti);Oa.Factory.addGetterSetter(ti,"numPoints",5,(0,ka.getNumberValidator)());Oa.Factory.addGetterSetter(ti,"innerRadius",0,(0,ka.getNumberValidator)());Oa.Factory.addGetterSetter(ti,"outerRadius",0,(0,ka.getNumberValidator)());var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.Text=ci.stringToArray=void 0;const ea=Ot,Jt=ut,sf=Vt,Ts=ct,ei=Q,af=ct;function Oh(e){return[...e].reduce((t,i,r,n)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(i)?t.push(i):new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(n[r+1]||""))?t.push(i+n[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:t.push(i),t),[])}ci.stringToArray=Oh;var Pi="auto",of="center",kh="inherit",Qi="justify",lf="Change.konva",hf="2d",Io="-",Dh="left",cf="text",uf="Text",df="top",ff="bottom",Uo="middle",Lh="normal",gf="px ",Mr=" ",pf="right",Bo="rtl",vf="word",_f="char",Vo="none",Es="…",Gh=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],mf=Gh.length;function yf(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!r&&(t=`"${t}"`),t}).join(", ")}var Nr;function As(){return Nr||(Nr=ea.Util.createCanvasElement().getContext(hf),Nr)}function bf(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Sf(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Cf(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Lt extends sf.Shape{constructor(t){super(Cf(t)),this._partialTextX=0,this._partialTextY=0;for(var i=0;i<mf;i++)this.on(Gh[i]+lf,this._setTextData);this._setTextData()}_sceneFunc(t){var i=this.textArr,r=i.length;if(this.text()){var n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=this.direction(),h=0,c=this.align(),p=this.getWidth(),f=this.letterSpacing(),g=this.fill(),d=this.textDecoration(),_=d.indexOf("underline")!==-1,y=d.indexOf("line-through")!==-1,S;l=l===kh?t.direction:l;var x=a/2,u=Uo;if(Ts.Konva._fixTextRendering){var v=this.measureSize("M");u="alphabetic",x=(v.fontBoundingBoxAscent-v.fontBoundingBoxDescent)/2+a/2}var b=0,T=0;for(l===Bo&&t.setAttr("direction",l),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",u),t.setAttr("textAlign",Dh),o===Uo?h=(this.getHeight()-r*a-n*2)/2:o===ff&&(h=this.getHeight()-r*a-n*2),t.translate(n,h+n),S=0;S<r;S++){var b=0,T=0,N=i[S],w=N.text,M=N.width,E=N.lastInParagraph,F,I,U;if(t.save(),c===pf?b+=p-M-n*2:c===of&&(b+=(p-M-n*2)/2),_){t.save(),t.beginPath();let dt=Ts.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2);const Y=b,X=x+T+dt;t.moveTo(Y,X),F=w.split(" ").length-1,I=F===0,U=c===Qi&&!E?p-n*2:M,t.lineTo(Y+Math.round(U),X),t.lineWidth=s/15;const nt=this._getLinearGradient();t.strokeStyle=nt||g,t.stroke(),t.restore()}if(y){t.save(),t.beginPath();let dt=Ts.Konva._fixTextRendering?-Math.round(s/4):0;t.moveTo(b,x+T+dt),F=w.split(" ").length-1,I=F===0,U=c===Qi&&E&&!I?p-n*2:M,t.lineTo(b+Math.round(U),x+T+dt),t.lineWidth=s/15;const Y=this._getLinearGradient();t.strokeStyle=Y||g,t.stroke(),t.restore()}if(l!==Bo&&(f!==0||c===Qi)){F=w.split(" ").length-1;for(var Z=Oh(w),j=0;j<Z.length;j++){var K=Z[j];K===" "&&!E&&c===Qi&&(b+=(p-n*2-M)/F),this._partialTextX=b,this._partialTextY=x+T,this._partialText=K,t.fillStrokeShape(this),b+=this.measureSize(K).width+f}}else f!==0&&t.setAttr("letterSpacing",`${f}px`),this._partialTextX=b,this._partialTextY=x+T,this._partialText=w,t.fillStrokeShape(this);t.restore(),r>1&&(x+=a)}}}_hitFunc(t){var i=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var i=ea.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(cf,i),this}getWidth(){var t=this.attrs.width===Pi||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===Pi||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return ea.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,r,n,s,a,o,l,h,c,p,f,g=As(),d=this.fontSize(),_;g.save(),g.font=this._getContextFont(),_=g.measureText(t),g.restore();const y=d/100;return{actualBoundingBoxAscent:(i=_.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*y,actualBoundingBoxDescent:(r=_.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(n=_.actualBoundingBoxLeft)!==null&&n!==void 0?n:-7.421875*y,actualBoundingBoxRight:(s=_.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*y,alphabeticBaseline:(a=_.alphabeticBaseline)!==null&&a!==void 0?a:0,emHeightAscent:(o=_.emHeightAscent)!==null&&o!==void 0?o:100*y,emHeightDescent:(l=_.emHeightDescent)!==null&&l!==void 0?l:-20*y,fontBoundingBoxAscent:(h=_.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*y,fontBoundingBoxDescent:(c=_.fontBoundingBoxDescent)!==null&&c!==void 0?c:21*y,hangingBaseline:(p=_.hangingBaseline)!==null&&p!==void 0?p:72.80000305175781*y,ideographicBaseline:(f=_.ideographicBaseline)!==null&&f!==void 0?f:-21*y,width:_.width,height:d}}_getContextFont(){return this.fontStyle()+Mr+this.fontVariant()+Mr+(this.fontSize()+gf)+yf(this.fontFamily())}_addTextLine(t){this.align()===Qi&&(t=t.trim());var r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){var i=this.letterSpacing(),r=t.length;return As().measureText(t).width+(r?i*(r-1):0)}_setTextData(){var t=this.text().split(`
`),i=+this.fontSize(),r=0,n=this.lineHeight()*i,s=this.attrs.width,a=this.attrs.height,o=s!==Pi&&s!==void 0,l=a!==Pi&&a!==void 0,h=this.padding(),c=s-h*2,p=a-h*2,f=0,g=this.wrap(),d=g!==Vo,_=g!==_f&&d,y=this.ellipsis();this.textArr=[],As().font=this._getContextFont();for(var S=y?this._getTextWidth(Es):0,x=0,u=t.length;x<u;++x){var v=t[x],b=this._getTextWidth(v);if(o&&b>c)for(;v.length>0;){for(var T=0,N=v.length,w="",M=0;T<N;){var E=T+N>>>1,F=v.slice(0,E+1),I=this._getTextWidth(F)+S;I<=c?(T=E+1,w=F,M=I):N=E}if(w){if(_){var U,Z=v[w.length],j=Z===Mr||Z===Io;j&&M<=c?U=w.length:U=Math.max(w.lastIndexOf(Mr),w.lastIndexOf(Io))+1,U>0&&(T=U,w=w.slice(0,T),M=this._getTextWidth(w))}w=w.trimRight(),this._addTextLine(w),r=Math.max(r,M),f+=n;var K=this._shouldHandleEllipsis(f);if(K){this._tryToAddEllipsisToLastLine();break}if(v=v.slice(T),v=v.trimLeft(),v.length>0&&(b=this._getTextWidth(v),b<=c)){this._addTextLine(v),f+=n,r=Math.max(r,b);break}}else break}else this._addTextLine(v),f+=n,r=Math.max(r,b),this._shouldHandleEllipsis(f)&&x<u-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&f+n>p)break}this.textHeight=i,this.textWidth=r}_shouldHandleEllipsis(t){var i=+this.fontSize(),r=this.lineHeight()*i,n=this.attrs.height,s=n!==Pi&&n!==void 0,a=this.padding(),o=n-a*2,l=this.wrap(),h=l!==Vo;return!h||s&&t+r>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,i=t!==Pi&&t!==void 0,r=this.padding(),n=t-r*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(i){var o=this._getTextWidth(a.text+Es)<n;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+Es)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}}ci.Text=Lt;Lt.prototype._fillFunc=bf;Lt.prototype._strokeFunc=Sf;Lt.prototype.className=uf;Lt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,af._registerNode)(Lt);Jt.Factory.overWriteSetter(Lt,"width",(0,ei.getNumberOrAutoValidator)());Jt.Factory.overWriteSetter(Lt,"height",(0,ei.getNumberOrAutoValidator)());Jt.Factory.addGetterSetter(Lt,"direction",kh);Jt.Factory.addGetterSetter(Lt,"fontFamily","Arial");Jt.Factory.addGetterSetter(Lt,"fontSize",12,(0,ei.getNumberValidator)());Jt.Factory.addGetterSetter(Lt,"fontStyle",Lh);Jt.Factory.addGetterSetter(Lt,"fontVariant",Lh);Jt.Factory.addGetterSetter(Lt,"padding",0,(0,ei.getNumberValidator)());Jt.Factory.addGetterSetter(Lt,"align",Dh);Jt.Factory.addGetterSetter(Lt,"verticalAlign",df);Jt.Factory.addGetterSetter(Lt,"lineHeight",1,(0,ei.getNumberValidator)());Jt.Factory.addGetterSetter(Lt,"wrap",vf);Jt.Factory.addGetterSetter(Lt,"ellipsis",!1,(0,ei.getBooleanValidator)());Jt.Factory.addGetterSetter(Lt,"letterSpacing",0,(0,ei.getNumberValidator)());Jt.Factory.addGetterSetter(Lt,"text","",(0,ei.getStringValidator)());Jt.Factory.addGetterSetter(Lt,"textDecoration","");var In={};Object.defineProperty(In,"__esModule",{value:!0});In.TextPath=void 0;const Fs=Ot,_e=ut,wf=Vt,Zi=ji,Rs=ci,Ih=Q,xf=ct;var Pf="",Uh="normal";function Bh(e){e.fillText(this.partialText,0,0)}function Vh(e){e.strokeText(this.partialText,0,0)}class $t extends wf.Shape{constructor(t){super(t),this.dummyCanvas=Fs.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Zi.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t-1>i?null:Zi.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Zi.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var i=this.textDecoration(),r=this.fill(),n=this.fontSize(),s=this.glyphInfo;i==="underline"&&t.beginPath();for(var a=0;a<s.length;a++){t.save();var o=s[a].p0;t.translate(o.x,o.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),i==="underline"&&(a===0&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}i==="underline"&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var i=this.glyphInfo;if(i.length>=1){var r=i[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<i.length;n++){var s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Fs.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Rs.Text.prototype.setText.call(this,t)}_getContextFont(){return Rs.Text.prototype._getContextFont.call(this)}_getTextSize(t){var i=this.dummyCanvas,r=i.getContext("2d");r.save(),r.font=this._getContextFont();var n=r.measureText(t);return r.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:i}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=i,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),n=this.align(),s=this.kerningFunc(),a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let o=0;n==="center"&&(o=Math.max(0,this.pathLength/2-a/2)),n==="right"&&(o=Math.max(0,this.pathLength-a));const l=(0,Rs.stringToArray)(this.text());let h=o;for(var c=0;c<l.length;c++){const p=this._getPointAtLength(h);if(!p)return;let f=this._getTextSize(l[c]).width+r;if(l[c]===" "&&n==="justify"){const x=this.text().split(" ").length-1;f+=(this.pathLength-a)/x}const g=this._getPointAtLength(h+f);if(!g)return;const d=Zi.Path.getLineLength(p.x,p.y,g.x,g.y);let _=0;if(s)try{_=s(l[c-1],l[c])*this.fontSize()}catch{_=0}p.x+=_,g.x+=_,this.textWidth+=_;const y=Zi.Path.getPointOnLine(_+d/2,p.x,p.y,g.x,g.y),S=Math.atan2(g.y-p.y,g.x-p.x);this.glyphInfo.push({transposeX:y.x,transposeY:y.y,text:l[c],rotation:S,p0:p,p1:g}),h+=f}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var i=t[0]||0,r=t[0]||0,n=t[1]||0,s=t[1]||0,a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],i=Math.min(i,a),r=Math.max(r,a),n=Math.min(n,o),s=Math.max(s,o);var h=this.fontSize();return{x:i-h/2,y:n-h/2,width:r-i+h,height:s-n+h}}destroy(){return Fs.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}In.TextPath=$t;$t.prototype._fillFunc=Bh;$t.prototype._strokeFunc=Vh;$t.prototype._fillFuncHit=Bh;$t.prototype._strokeFuncHit=Vh;$t.prototype.className="TextPath";$t.prototype._attrsAffectingSize=["text","fontSize","data"];(0,xf._registerNode)($t);_e.Factory.addGetterSetter($t,"data");_e.Factory.addGetterSetter($t,"fontFamily","Arial");_e.Factory.addGetterSetter($t,"fontSize",12,(0,Ih.getNumberValidator)());_e.Factory.addGetterSetter($t,"fontStyle",Uh);_e.Factory.addGetterSetter($t,"align","left");_e.Factory.addGetterSetter($t,"letterSpacing",0,(0,Ih.getNumberValidator)());_e.Factory.addGetterSetter($t,"textBaseline","middle");_e.Factory.addGetterSetter($t,"fontVariant",Uh);_e.Factory.addGetterSetter($t,"text",Pf);_e.Factory.addGetterSetter($t,"textDecoration",null);_e.Factory.addGetterSetter($t,"kerningFunc",null);var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.Transformer=void 0;const Tt=Ot,yt=ut,$o=Nt,Tf=Vt,Ef=Cr,Ho=Hi,ge=ct,ii=Q,Af=ct;var $h="tr-konva",Ff=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${$h}`).join(" "),Wo="nodesRect",Rf=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Mf={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Nf="ontouchstart"in ge.Konva._global;function Of(e,t,i){if(e==="rotater")return i;t+=Tt.Util.degToRad(Mf[e]||0);var r=(Tt.Util.radToDeg(t)%360+360)%360;return Tt.Util._inRange(r,315+22.5,360)||Tt.Util._inRange(r,0,22.5)?"ns-resize":Tt.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":Tt.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":Tt.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":Tt.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":Tt.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":Tt.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":Tt.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(Tt.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Xr=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],jo=1e8;function kf(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Hh(e,t,i){const r=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),n=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:r,y:n}}function Df(e,t){const i=kf(e);return Hh(e,t,i)}function Lf(e,t,i){let r=t;for(let n=0;n<e.length;n++){const s=ge.Konva.getAngle(e[n]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<i&&(r=s)}return r}let ia=0;class pt extends Ho.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Ff,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Tt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return $h+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(n=>n.isAncestorOf(this)?(Tt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(n=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},a=n._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");n.on(a,s),n.on(Rf.map(o=>o+`.${this._getEventNamespace()}`).join(" "),s),n.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(n)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,r=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!i)return;const n=t.getAbsolutePosition(),s=n.x-i.x,a=n.y-i.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(r)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Wo),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Wo,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),r){var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(r),a=t.getAbsolutePosition(r),o=n.x*s.x-t.offsetX()*s.x,l=n.y*s.y-t.offsetY()*s.y;const h=(ge.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:a.x+o*Math.cos(h)+l*Math.sin(-h),y:a.y+l*Math.cos(h)+o*Math.sin(h),width:n.width*s.x,height:n.height*s.y,rotation:h};return Hh(c,-ge.Konva.getAngle(i),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-jo,y:-jo,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var p=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],f=h.getAbsoluteTransform();p.forEach(function(g){var d=f.point(g);i.push(d)})});const r=new Tt.Transform;r.rotate(-ge.Konva.getAngle(this.rotation()));var n=1/0,s=1/0,a=-1/0,o=-1/0;i.forEach(function(h){var c=r.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),r.invert();const l=r.point({x:n,y:s});return{x:l.x,y:l.y,width:a-n,height:o-s,rotation:ge.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Xr.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var i=new Ef.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Nf?10:"auto"}),r=this;i.on("mousedown touchstart",function(n){r._handleMouseDown(n)}),i.on("dragstart",n=>{i.stopDrag(),n.cancelBubble=!0}),i.on("dragend",n=>{n.cancelBubble=!0}),i.on("mouseenter",()=>{var n=ge.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),a=Of(t,n,s);i.getStage().content&&(i.getStage().content.style.cursor=a),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){var t=new Tf.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(i,r){var n=r.getParent(),s=n.padding();i.beginPath(),i.rect(-s,-s,r.width()+s*2,r.height()+s*2),i.moveTo(r.width()/2,-s),n.rotateEnabled()&&n.rotateLineVisible()&&i.lineTo(r.width()/2,-n.rotateAnchorOffset()*Tt.Util._sign(r.height())-s),i.fillStrokeShape(r)},hitFunc:(i,r)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();i.beginPath(),i.rect(-n,-n,r.width()+n*2,r.height()+n*2),i.fillStrokeShape(r)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(!this._transforming){this._movingAnchorName=t.target.name().split(" ")[0];var i=this._getNodeRect(),r=i.width,n=i.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},ia++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}}_handleMouseMove(t){var i,r,n,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),s.setAbsolutePosition(l);const c=s.getAbsolutePosition();if(!(h.x===c.x&&h.y===c.y)){if(this._movingAnchorName==="rotater"){var p=this._getNodeRect();i=s.x()-p.width/2,r=-s.y()+p.height/2;let U=Math.atan2(-r,i)+Math.PI/2;p.height<0&&(U-=Math.PI);var f=ge.Konva.getAngle(this.rotation());const Z=f+U,j=ge.Konva.getAngle(this.rotationSnapTolerance()),J=Lf(this.rotationSnaps(),Z,j)-p.rotation,q=Df(p,J);this._fitNodesInto(q,t);return}var g=this.shiftBehavior(),d;g==="inverted"?d=this.keepRatio()&&!t.shiftKey:g==="none"?d=this.keepRatio():d=this.keepRatio()||t.shiftKey;var u=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(d){var _=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(_.x-s.x(),2)+Math.pow(_.y-s.y(),2));var y=this.findOne(".top-left").x()>_.x?-1:1,S=this.findOne(".top-left").y()>_.y?-1:1;i=n*this.cos*y,r=n*this.sin*S,this.findOne(".top-left").x(_.x-i),this.findOne(".top-left").y(_.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(d){var _=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(s.x()-_.x,2)+Math.pow(_.y-s.y(),2));var y=this.findOne(".top-right").x()<_.x?-1:1,S=this.findOne(".top-right").y()>_.y?-1:1;i=n*this.cos*y,r=n*this.sin*S,this.findOne(".top-right").x(_.x+i),this.findOne(".top-right").y(_.y-r)}var x=s.position();this.findOne(".top-left").y(x.y),this.findOne(".bottom-right").x(x.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(d){var _=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(_.x-s.x(),2)+Math.pow(s.y()-_.y,2));var y=_.x<s.x()?-1:1,S=s.y()<_.y?-1:1;i=n*this.cos*y,r=n*this.sin*S,s.x(_.x-i),s.y(_.y+r)}x=s.position(),this.findOne(".top-left").x(x.x),this.findOne(".bottom-right").y(x.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(d){var _=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(s.x()-_.x,2)+Math.pow(s.y()-_.y,2));var y=this.findOne(".bottom-right").x()<_.x?-1:1,S=this.findOne(".bottom-right").y()<_.y?-1:1;i=n*this.cos*y,r=n*this.sin*S,this.findOne(".bottom-right").x(_.x+i),this.findOne(".bottom-right").y(_.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var u=this.centeredScaling()||t.altKey;if(u){var v=this.findOne(".top-left"),b=this.findOne(".bottom-right"),T=v.x(),N=v.y(),w=this.getWidth()-b.x(),M=this.getHeight()-b.y();b.move({x:-T,y:-N}),v.move({x:w,y:M})}var E=this.findOne(".top-left").getAbsolutePosition();i=E.x,r=E.y;var F=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),I=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:r,width:F,height:I,rotation:ge.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var r=this.getNode();ia--,this._fire("transformend",{evt:t,target:r}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),r&&this._nodes.forEach(n=>{var s;n._fire("transformend",{evt:t,target:n}),(s=n.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){var r=this._getNodeRect();const n=1;if(Tt.Util._inRange(t.width,-this.padding()*2-n,n)){this.update();return}if(Tt.Util._inRange(t.height,-this.padding()*2-n,n)){this.update();return}var s=new Tt.Transform;if(s.rotate(ge.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=s.point({x:-this.padding()*2,y:0});t.x+=f.x,t.y+=f.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=s.point({x:0,y:-this.padding()*2});t.x+=f.x,t.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,t);f?t=f:Tt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,o=new Tt.Transform;o.translate(r.x,r.y),o.rotate(r.rotation),o.scale(r.width/a,r.height/a);const l=new Tt.Transform,h=t.width/a,c=t.height/a;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(h),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(h,c));const p=l.multiply(o.invert());this._nodes.forEach(f=>{var g;const d=f.getParent().getAbsoluteTransform(),_=f.getTransform().copy();_.translate(f.offsetX(),f.offsetY());const y=new Tt.Transform;y.multiply(d.copy().invert()).multiply(p).multiply(d).multiply(_);const S=y.decompose();f.setAttrs(S),(g=f.getLayer())===null||g===void 0||g.batchDraw()}),this.rotation(Tt.Util._getRotation(t.rotation)),this._nodes.forEach(f=>{this._fire("transform",{evt:i,target:f}),f._fire("transform",{evt:i,target:f})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t,i=this._getNodeRect();this.rotation(Tt.Util._getRotation(i.rotation));var r=i.width,n=i.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();const h=this.find("._anchor");h.forEach(p=>{p.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:n/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:n,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:n,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Tt.Util._sign(n)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const c=this.anchorStyleFunc();c&&h.forEach(p=>{c(p)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Ho.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return $o.Node.prototype.toObject.call(this)}clone(t){var i=$o.Node.prototype.clone.call(this,t);return i}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Un.Transformer=pt;pt.isTransforming=()=>ia>0;function Gf(e){return e instanceof Array||Tt.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Xr.indexOf(t)===-1&&Tt.Util.warn("Unknown anchor name: "+t+". Available names are: "+Xr.join(", "))}),e||[]}pt.prototype.className="Transformer";(0,Af._registerNode)(pt);yt.Factory.addGetterSetter(pt,"enabledAnchors",Xr,Gf);yt.Factory.addGetterSetter(pt,"flipEnabled",!0,(0,ii.getBooleanValidator)());yt.Factory.addGetterSetter(pt,"resizeEnabled",!0);yt.Factory.addGetterSetter(pt,"anchorSize",10,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"rotateEnabled",!0);yt.Factory.addGetterSetter(pt,"rotateLineVisible",!0);yt.Factory.addGetterSetter(pt,"rotationSnaps",[]);yt.Factory.addGetterSetter(pt,"rotateAnchorOffset",50,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"rotateAnchorCursor","crosshair");yt.Factory.addGetterSetter(pt,"rotationSnapTolerance",5,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"borderEnabled",!0);yt.Factory.addGetterSetter(pt,"anchorStroke","rgb(0, 161, 255)");yt.Factory.addGetterSetter(pt,"anchorStrokeWidth",1,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"anchorFill","white");yt.Factory.addGetterSetter(pt,"anchorCornerRadius",0,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"borderStroke","rgb(0, 161, 255)");yt.Factory.addGetterSetter(pt,"borderStrokeWidth",1,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"borderDash");yt.Factory.addGetterSetter(pt,"keepRatio",!0);yt.Factory.addGetterSetter(pt,"shiftBehavior","default");yt.Factory.addGetterSetter(pt,"centeredScaling",!1);yt.Factory.addGetterSetter(pt,"ignoreStroke",!1);yt.Factory.addGetterSetter(pt,"padding",0,(0,ii.getNumberValidator)());yt.Factory.addGetterSetter(pt,"node");yt.Factory.addGetterSetter(pt,"nodes");yt.Factory.addGetterSetter(pt,"boundBoxFunc");yt.Factory.addGetterSetter(pt,"anchorDragBoundFunc");yt.Factory.addGetterSetter(pt,"anchorStyleFunc");yt.Factory.addGetterSetter(pt,"shouldOverdrawWholeArea",!1);yt.Factory.addGetterSetter(pt,"useSingleNodeRotation",!0);yt.Factory.backCompat(pt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.Wedge=void 0;const Vn=ut,If=Vt,Uf=ct,Wh=Q,Bf=ct;class Be extends If.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Uf.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Bn.Wedge=Be;Be.prototype.className="Wedge";Be.prototype._centroid=!0;Be.prototype._attrsAffectingSize=["radius"];(0,Bf._registerNode)(Be);Vn.Factory.addGetterSetter(Be,"radius",0,(0,Wh.getNumberValidator)());Vn.Factory.addGetterSetter(Be,"angle",0,(0,Wh.getNumberValidator)());Vn.Factory.addGetterSetter(Be,"clockwise",!1);Vn.Factory.backCompat(Be,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.Blur=void 0;const zo=ut,Vf=Nt,$f=Q;function Ko(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Hf=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Wf=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function jf(e,t){var i=e.data,r=e.width,n=e.height,s,a,o,l,h,c,p,f,g,d,_,y,S,x,u,v,b,T,N,w,M,E,F,I,U=t+t+1,Z=r-1,j=n-1,K=t+1,J=K*(K+1)/2,q=new Ko,dt=null,Y=q,X=null,nt=null,bt=Hf[t],mt=Wf[t];for(o=1;o<U;o++)Y=Y.next=new Ko,o===K&&(dt=Y);for(Y.next=q,p=c=0,a=0;a<n;a++){for(v=b=T=N=f=g=d=_=0,y=K*(w=i[c]),S=K*(M=i[c+1]),x=K*(E=i[c+2]),u=K*(F=i[c+3]),f+=J*w,g+=J*M,d+=J*E,_+=J*F,Y=q,o=0;o<K;o++)Y.r=w,Y.g=M,Y.b=E,Y.a=F,Y=Y.next;for(o=1;o<K;o++)l=c+((Z<o?Z:o)<<2),f+=(Y.r=w=i[l])*(I=K-o),g+=(Y.g=M=i[l+1])*I,d+=(Y.b=E=i[l+2])*I,_+=(Y.a=F=i[l+3])*I,v+=w,b+=M,T+=E,N+=F,Y=Y.next;for(X=q,nt=dt,s=0;s<r;s++)i[c+3]=F=_*bt>>mt,F!==0?(F=255/F,i[c]=(f*bt>>mt)*F,i[c+1]=(g*bt>>mt)*F,i[c+2]=(d*bt>>mt)*F):i[c]=i[c+1]=i[c+2]=0,f-=y,g-=S,d-=x,_-=u,y-=X.r,S-=X.g,x-=X.b,u-=X.a,l=p+((l=s+t+1)<Z?l:Z)<<2,v+=X.r=i[l],b+=X.g=i[l+1],T+=X.b=i[l+2],N+=X.a=i[l+3],f+=v,g+=b,d+=T,_+=N,X=X.next,y+=w=nt.r,S+=M=nt.g,x+=E=nt.b,u+=F=nt.a,v-=w,b-=M,T-=E,N-=F,nt=nt.next,c+=4;p+=r}for(s=0;s<r;s++){for(b=T=N=v=g=d=_=f=0,c=s<<2,y=K*(w=i[c]),S=K*(M=i[c+1]),x=K*(E=i[c+2]),u=K*(F=i[c+3]),f+=J*w,g+=J*M,d+=J*E,_+=J*F,Y=q,o=0;o<K;o++)Y.r=w,Y.g=M,Y.b=E,Y.a=F,Y=Y.next;for(h=r,o=1;o<=t;o++)c=h+s<<2,f+=(Y.r=w=i[c])*(I=K-o),g+=(Y.g=M=i[c+1])*I,d+=(Y.b=E=i[c+2])*I,_+=(Y.a=F=i[c+3])*I,v+=w,b+=M,T+=E,N+=F,Y=Y.next,o<j&&(h+=r);for(c=s,X=q,nt=dt,a=0;a<n;a++)l=c<<2,i[l+3]=F=_*bt>>mt,F>0?(F=255/F,i[l]=(f*bt>>mt)*F,i[l+1]=(g*bt>>mt)*F,i[l+2]=(d*bt>>mt)*F):i[l]=i[l+1]=i[l+2]=0,f-=y,g-=S,d-=x,_-=u,y-=X.r,S-=X.g,x-=X.b,u-=X.a,l=s+((l=a+K)<j?l:j)*r<<2,f+=v+=X.r=i[l],g+=b+=X.g=i[l+1],d+=T+=X.b=i[l+2],_+=N+=X.a=i[l+3],X=X.next,y+=w=nt.r,S+=M=nt.g,x+=E=nt.b,u+=F=nt.a,v-=w,b-=M,T-=E,N-=F,nt=nt.next,c+=r}}const zf=function(t){var i=Math.round(this.blurRadius());i>0&&jf(t,i)};$n.Blur=zf;zo.Factory.addGetterSetter(Vf.Node,"blurRadius",0,(0,$f.getNumberValidator)(),zo.Factory.afterSetFilter);var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Brighten=void 0;const Yo=ut,Kf=Nt,Yf=Q,Xf=function(e){var t=this.brightness()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=4)i[n]+=t,i[n+1]+=t,i[n+2]+=t};Hn.Brighten=Xf;Yo.Factory.addGetterSetter(Kf.Node,"brightness",0,(0,Yf.getNumberValidator)(),Yo.Factory.afterSetFilter);var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Contrast=void 0;const Xo=ut,qf=Nt,Jf=Q,Qf=function(e){var t=Math.pow((this.contrast()+100)/100,2),i=e.data,r=i.length,n=150,s=150,a=150,o;for(o=0;o<r;o+=4)n=i[o],s=i[o+1],a=i[o+2],n/=255,n-=.5,n*=t,n+=.5,n*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,n=n<0?0:n>255?255:n,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,i[o]=n,i[o+1]=s,i[o+2]=a};Wn.Contrast=Qf;Xo.Factory.addGetterSetter(qf.Node,"contrast",0,(0,Jf.getNumberValidator)(),Xo.Factory.afterSetFilter);var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.Emboss=void 0;const Ye=ut,zn=Nt,Zf=Ot,jh=Q,t1=function(e){var t=this.embossStrength()*10,i=this.embossWhiteLevel()*255,r=this.embossDirection(),n=this.embossBlend(),s=0,a=0,o=e.data,l=e.width,h=e.height,c=l*4,p=h;switch(r){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:Zf.Util.error("Unknown emboss direction: "+r)}do{var f=(p-1)*c,g=s;p+g<1&&(g=0),p+g>h&&(g=0);var d=(p-1+g)*l*4,_=l;do{var y=f+(_-1)*4,S=a;_+S<1&&(S=0),_+S>l&&(S=0);var x=d+(_-1+S)*4,u=o[y]-o[x],v=o[y+1]-o[x+1],b=o[y+2]-o[x+2],T=u,N=T>0?T:-T,w=v>0?v:-v,M=b>0?b:-b;if(w>N&&(T=v),M>N&&(T=b),T*=t,n){var E=o[y]+T,F=o[y+1]+T,I=o[y+2]+T;o[y]=E>255?255:E<0?0:E,o[y+1]=F>255?255:F<0?0:F,o[y+2]=I>255?255:I<0?0:I}else{var U=i-T;U<0?U=0:U>255&&(U=255),o[y]=o[y+1]=o[y+2]=U}}while(--_)}while(--p)};jn.Emboss=t1;Ye.Factory.addGetterSetter(zn.Node,"embossStrength",.5,(0,jh.getNumberValidator)(),Ye.Factory.afterSetFilter);Ye.Factory.addGetterSetter(zn.Node,"embossWhiteLevel",.5,(0,jh.getNumberValidator)(),Ye.Factory.afterSetFilter);Ye.Factory.addGetterSetter(zn.Node,"embossDirection","top-left",null,Ye.Factory.afterSetFilter);Ye.Factory.addGetterSetter(zn.Node,"embossBlend",!1,null,Ye.Factory.afterSetFilter);var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.Enhance=void 0;const qo=ut,e1=Nt,i1=Q;function Ms(e,t,i,r,n){var s=i-t,a=n-r,o;return s===0?r+a/2:a===0?r:(o=(e-t)/s,o=a*o+r,o)}const r1=function(e){var t=e.data,i=t.length,r=t[0],n=r,s,a=t[1],o=a,l,h=t[2],c=h,p,f,g=this.enhance();if(g!==0){for(f=0;f<i;f+=4)s=t[f+0],s<r?r=s:s>n&&(n=s),l=t[f+1],l<a?a=l:l>o&&(o=l),p=t[f+2],p<h?h=p:p>c&&(c=p);n===r&&(n=255,r=0),o===a&&(o=255,a=0),c===h&&(c=255,h=0);var d,_,y,S,x,u,v,b,T;for(g>0?(_=n+g*(255-n),y=r-g*(r-0),x=o+g*(255-o),u=a-g*(a-0),b=c+g*(255-c),T=h-g*(h-0)):(d=(n+r)*.5,_=n+g*(n-d),y=r+g*(r-d),S=(o+a)*.5,x=o+g*(o-S),u=a+g*(a-S),v=(c+h)*.5,b=c+g*(c-v),T=h+g*(h-v)),f=0;f<i;f+=4)t[f+0]=Ms(t[f+0],r,n,y,_),t[f+1]=Ms(t[f+1],a,o,u,x),t[f+2]=Ms(t[f+2],h,c,T,b)}};Kn.Enhance=r1;qo.Factory.addGetterSetter(e1.Node,"enhance",0,(0,i1.getNumberValidator)(),qo.Factory.afterSetFilter);var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Grayscale=void 0;const n1=function(e){var t=e.data,i=t.length,r,n;for(r=0;r<i;r+=4)n=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=n,t[r+1]=n,t[r+2]=n};Yn.Grayscale=n1;var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.HSL=void 0;const Ui=ut,Da=Nt,La=Q;Ui.Factory.addGetterSetter(Da.Node,"hue",0,(0,La.getNumberValidator)(),Ui.Factory.afterSetFilter);Ui.Factory.addGetterSetter(Da.Node,"saturation",0,(0,La.getNumberValidator)(),Ui.Factory.afterSetFilter);Ui.Factory.addGetterSetter(Da.Node,"luminance",0,(0,La.getNumberValidator)(),Ui.Factory.afterSetFilter);const s1=function(e){var t=e.data,i=t.length,r=1,n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=r*n*Math.cos(s*Math.PI/180),h=r*n*Math.sin(s*Math.PI/180),c=.299*r+.701*l+.167*h,p=.587*r-.587*l+.33*h,f=.114*r-.114*l-.497*h,g=.299*r-.299*l-.328*h,d=.587*r+.413*l+.035*h,_=.114*r-.114*l+.293*h,y=.299*r-.3*l+1.25*h,S=.587*r-.586*l-1.05*h,x=.114*r+.886*l-.2*h,u,v,b,T;for(o=0;o<i;o+=4)u=t[o+0],v=t[o+1],b=t[o+2],T=t[o+3],t[o+0]=c*u+p*v+f*b+a,t[o+1]=g*u+d*v+_*b+a,t[o+2]=y*u+S*v+x*b+a,t[o+3]=T};Xn.HSL=s1;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.HSV=void 0;const Bi=ut,Ga=Nt,Ia=Q,a1=function(e){var t=e.data,i=t.length,r=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=r*n*Math.cos(s*Math.PI/180),l=r*n*Math.sin(s*Math.PI/180),h=.299*r+.701*o+.167*l,c=.587*r-.587*o+.33*l,p=.114*r-.114*o-.497*l,f=.299*r-.299*o-.328*l,g=.587*r+.413*o+.035*l,d=.114*r-.114*o+.293*l,_=.299*r-.3*o+1.25*l,y=.587*r-.586*o-1.05*l,S=.114*r+.886*o-.2*l,x,u,v,b;for(a=0;a<i;a+=4)x=t[a+0],u=t[a+1],v=t[a+2],b=t[a+3],t[a+0]=h*x+c*u+p*v,t[a+1]=f*x+g*u+d*v,t[a+2]=_*x+y*u+S*v,t[a+3]=b};qn.HSV=a1;Bi.Factory.addGetterSetter(Ga.Node,"hue",0,(0,Ia.getNumberValidator)(),Bi.Factory.afterSetFilter);Bi.Factory.addGetterSetter(Ga.Node,"saturation",0,(0,Ia.getNumberValidator)(),Bi.Factory.afterSetFilter);Bi.Factory.addGetterSetter(Ga.Node,"value",0,(0,Ia.getNumberValidator)(),Bi.Factory.afterSetFilter);var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.Invert=void 0;const o1=function(e){var t=e.data,i=t.length,r;for(r=0;r<i;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};Jn.Invert=o1;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Kaleidoscope=void 0;const qr=ut,zh=Nt,Jo=Ot,Kh=Q;var l1=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,c,p,f=0,g=0,d=0,_=0,y,S=Math.sqrt(o*o+l*l);c=s-o,p=a-l,y=Math.sqrt(c*c+p*p),S=y>S?y:S;var x=a,u=s,v,b,T=360/u*Math.PI/180,N,w;for(b=0;b<u;b+=1)for(N=Math.sin(b*T),w=Math.cos(b*T),v=0;v<x;v+=1)c=Math.floor(o+S*v/x*w),p=Math.floor(l+S*v/x*N),h=(p*s+c)*4,f=r[h+0],g=r[h+1],d=r[h+2],_=r[h+3],h=(b+v*s)*4,n[h+0]=f,n[h+1]=g,n[h+2]=d,n[h+3]=_},h1=function(e,t,i){var r=e.data,n=t.data,s=e.width,a=e.height,o=i.polarCenterX||s/2,l=i.polarCenterY||a/2,h,c,p,f,g,d=0,_=0,y=0,S=0,x,u=Math.sqrt(o*o+l*l);c=s-o,p=a-l,x=Math.sqrt(c*c+p*p),u=x>u?x:u;var v=a,b=s,T,N,w=0,M,E;for(c=0;c<s;c+=1)for(p=0;p<a;p+=1)f=c-o,g=p-l,T=Math.sqrt(f*f+g*g)*v/u,N=(Math.atan2(g,f)*180/Math.PI+360+w)%360,N=N*b/360,M=Math.floor(N),E=Math.floor(T),h=(E*s+M)*4,d=r[h+0],_=r[h+1],y=r[h+2],S=r[h+3],h=(p*s+c)*4,n[h+0]=d,n[h+1]=_,n[h+2]=y,n[h+3]=S};const c1=function(e){var t=e.width,i=e.height,r,n,s,a,o,l,h,c,p,f,g=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),_=Math.floor(t*(d%360)/360);if(!(g<1)){var y=Jo.Util.createCanvasElement();y.width=t,y.height=i;var S=y.getContext("2d").getImageData(0,0,t,i);Jo.Util.releaseCanvas(y),l1(e,S,{polarCenterX:t/2,polarCenterY:i/2});for(var x=t/Math.pow(2,g);x<=8;)x=x*2,g-=1;x=Math.ceil(x);var u=x,v=0,b=u,T=1;for(_+x>t&&(v=u,b=0,T=-1),n=0;n<i;n+=1)for(r=v;r!==b;r+=T)s=Math.round(r+_)%t,p=(t*n+s)*4,o=S.data[p+0],l=S.data[p+1],h=S.data[p+2],c=S.data[p+3],f=(t*n+r)*4,S.data[f+0]=o,S.data[f+1]=l,S.data[f+2]=h,S.data[f+3]=c;for(n=0;n<i;n+=1)for(u=Math.floor(x),a=0;a<g;a+=1){for(r=0;r<u+1;r+=1)p=(t*n+r)*4,o=S.data[p+0],l=S.data[p+1],h=S.data[p+2],c=S.data[p+3],f=(t*n+u*2-r-1)*4,S.data[f+0]=o,S.data[f+1]=l,S.data[f+2]=h,S.data[f+3]=c;u*=2}h1(S,e,{polarRotation:0})}};Qn.Kaleidoscope=c1;qr.Factory.addGetterSetter(zh.Node,"kaleidoscopePower",2,(0,Kh.getNumberValidator)(),qr.Factory.afterSetFilter);qr.Factory.addGetterSetter(zh.Node,"kaleidoscopeAngle",0,(0,Kh.getNumberValidator)(),qr.Factory.afterSetFilter);var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Mask=void 0;const Qo=ut,u1=Nt,d1=Q;function Or(e,t,i){var r=(i*e.width+t)*4,n=[];return n.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),n}function tr(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function f1(e){for(var t=[0,0,0],i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function g1(e,t){var i=Or(e,0,0),r=Or(e,e.width-1,0),n=Or(e,0,e.height-1),s=Or(e,e.width-1,e.height-1),a=t||10;if(tr(i,r)<a&&tr(r,s)<a&&tr(s,n)<a&&tr(n,i)<a){for(var o=f1([r,i,s,n]),l=[],h=0;h<e.width*e.height;h++){var c=tr(o,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<a?0:255}return l}}function p1(e,t){for(var i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function v1(e,t,i){for(var r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,p=0;p<n;p++)for(var f=0;f<n;f++){var g=o+p-s,d=l+f-s;if(g>=0&&g<i&&d>=0&&d<t){var _=g*t+d,y=r[p*n+f];c+=e[_]*y}}a[h]=c===255*8?255:0}return a}function _1(e,t,i){for(var r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,p=0;p<n;p++)for(var f=0;f<n;f++){var g=o+p-s,d=l+f-s;if(g>=0&&g<i&&d>=0&&d<t){var _=g*t+d,y=r[p*n+f];c+=e[_]*y}}a[h]=c>=255*4?255:0}return a}function m1(e,t,i){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],n=Math.round(Math.sqrt(r.length)),s=Math.floor(n/2),a=[],o=0;o<i;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,p=0;p<n;p++)for(var f=0;f<n;f++){var g=o+p-s,d=l+f-s;if(g>=0&&g<i&&d>=0&&d<t){var _=g*t+d,y=r[p*n+f];c+=e[_]*y}}a[h]=c}return a}const y1=function(e){var t=this.threshold(),i=g1(e,t);return i&&(i=v1(i,e.width,e.height),i=_1(i,e.width,e.height),i=m1(i,e.width,e.height),p1(e,i)),e};Zn.Mask=y1;Qo.Factory.addGetterSetter(u1.Node,"threshold",0,(0,d1.getNumberValidator)(),Qo.Factory.afterSetFilter);var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.Noise=void 0;const Zo=ut,b1=Nt,S1=Q,C1=function(e){var t=this.noise()*255,i=e.data,r=i.length,n=t/2,s;for(s=0;s<r;s+=4)i[s+0]+=n-2*n*Math.random(),i[s+1]+=n-2*n*Math.random(),i[s+2]+=n-2*n*Math.random()};ts.Noise=C1;Zo.Factory.addGetterSetter(b1.Node,"noise",.2,(0,S1.getNumberValidator)(),Zo.Factory.afterSetFilter);var es={};Object.defineProperty(es,"__esModule",{value:!0});es.Pixelate=void 0;const tl=ut,w1=Ot,x1=Nt,P1=Q,T1=function(e){var t=Math.ceil(this.pixelSize()),i=e.width,r=e.height,n,s,a,o,l,h,c,p=Math.ceil(i/t),f=Math.ceil(r/t),g,d,_,y,S,x,u,v=e.data;if(t<=0){w1.Util.error("pixelSize value can not be <= 0");return}for(S=0;S<p;S+=1)for(x=0;x<f;x+=1){for(o=0,l=0,h=0,c=0,g=S*t,d=g+t,_=x*t,y=_+t,u=0,n=g;n<d;n+=1)if(!(n>=i))for(s=_;s<y;s+=1)s>=r||(a=(i*s+n)*4,o+=v[a+0],l+=v[a+1],h+=v[a+2],c+=v[a+3],u+=1);for(o=o/u,l=l/u,h=h/u,c=c/u,n=g;n<d;n+=1)if(!(n>=i))for(s=_;s<y;s+=1)s>=r||(a=(i*s+n)*4,v[a+0]=o,v[a+1]=l,v[a+2]=h,v[a+3]=c)}};es.Pixelate=T1;tl.Factory.addGetterSetter(x1.Node,"pixelSize",8,(0,P1.getNumberValidator)(),tl.Factory.afterSetFilter);var is={};Object.defineProperty(is,"__esModule",{value:!0});is.Posterize=void 0;const el=ut,E1=Nt,A1=Q,F1=function(e){var t=Math.round(this.levels()*254)+1,i=e.data,r=i.length,n=255/t,s;for(s=0;s<r;s+=1)i[s]=Math.floor(i[s]/n)*n};is.Posterize=F1;el.Factory.addGetterSetter(E1.Node,"levels",.5,(0,A1.getNumberValidator)(),el.Factory.afterSetFilter);var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.RGB=void 0;const Jr=ut,Ua=Nt,R1=Q,M1=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a,o;for(a=0;a<i;a+=4)o=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=o*r,t[a+1]=o*n,t[a+2]=o*s,t[a+3]=t[a+3]};rs.RGB=M1;Jr.Factory.addGetterSetter(Ua.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Jr.Factory.addGetterSetter(Ua.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Jr.Factory.addGetterSetter(Ua.Node,"blue",0,R1.RGBComponent,Jr.Factory.afterSetFilter);var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.RGBA=void 0;const fr=ut,ss=Nt,N1=Q,O1=function(e){var t=e.data,i=t.length,r=this.red(),n=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<i;o+=4)l=1-a,t[o]=r*a+t[o]*l,t[o+1]=n*a+t[o+1]*l,t[o+2]=s*a+t[o+2]*l};ns.RGBA=O1;fr.Factory.addGetterSetter(ss.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});fr.Factory.addGetterSetter(ss.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});fr.Factory.addGetterSetter(ss.Node,"blue",0,N1.RGBComponent,fr.Factory.afterSetFilter);fr.Factory.addGetterSetter(ss.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var as={};Object.defineProperty(as,"__esModule",{value:!0});as.Sepia=void 0;const k1=function(e){var t=e.data,i=t.length,r,n,s,a;for(r=0;r<i;r+=4)n=t[r+0],s=t[r+1],a=t[r+2],t[r+0]=Math.min(255,n*.393+s*.769+a*.189),t[r+1]=Math.min(255,n*.349+s*.686+a*.168),t[r+2]=Math.min(255,n*.272+s*.534+a*.131)};as.Sepia=k1;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.Solarize=void 0;const D1=function(e){var t=e.data,i=e.width,r=e.height,n=i*4,s=r;do{var a=(s-1)*n,o=i;do{var l=a+(o-1)*4,h=t[l],c=t[l+1],p=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),p>127&&(p=255-p),t[l]=h,t[l+1]=c,t[l+2]=p}while(--o)}while(--s)};os.Solarize=D1;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.Threshold=void 0;const il=ut,L1=Nt,G1=Q,I1=function(e){var t=this.threshold()*255,i=e.data,r=i.length,n;for(n=0;n<r;n+=1)i[n]=i[n]<t?0:255};ls.Threshold=I1;il.Factory.addGetterSetter(L1.Node,"threshold",.5,(0,G1.getNumberValidator)(),il.Factory.afterSetFilter);Object.defineProperty(_n,"__esModule",{value:!0});_n.Konva=void 0;const rl=dh,U1=wn,B1=Tn,V1=Fn,$1=Rn,H1=Mn,nl=Ii,W1=br,j1=ji,z1=Cr,K1=kn,Y1=Dn,X1=Ln,q1=Gn,J1=ci,Q1=In,Z1=Un,t2=Bn,e2=$n,i2=Hn,r2=Wn,n2=jn,s2=Kn,a2=Yn,o2=Xn,l2=qn,h2=Jn,c2=Qn,u2=Zn,d2=ts,f2=es,g2=is,p2=rs,v2=ns,_2=as,m2=os,y2=ls;_n.Konva=rl.Konva.Util._assign(rl.Konva,{Arc:U1.Arc,Arrow:B1.Arrow,Circle:V1.Circle,Ellipse:$1.Ellipse,Image:H1.Image,Label:nl.Label,Tag:nl.Tag,Line:W1.Line,Path:j1.Path,Rect:z1.Rect,RegularPolygon:K1.RegularPolygon,Ring:Y1.Ring,Sprite:X1.Sprite,Star:q1.Star,Text:J1.Text,TextPath:Q1.TextPath,Transformer:Z1.Transformer,Wedge:t2.Wedge,Filters:{Blur:e2.Blur,Brighten:i2.Brighten,Contrast:r2.Contrast,Emboss:n2.Emboss,Enhance:s2.Enhance,Grayscale:a2.Grayscale,HSL:o2.HSL,HSV:l2.HSV,Invert:h2.Invert,Kaleidoscope:c2.Kaleidoscope,Mask:u2.Mask,Noise:d2.Noise,Pixelate:f2.Pixelate,Posterize:g2.Posterize,RGB:p2.RGB,RGBA:v2.RGBA,Sepia:_2.Sepia,Solarize:m2.Solarize,Threshold:y2.Threshold}});var b2=Pa.exports;Object.defineProperty(b2,"__esModule",{value:!0});const S2=_n;Pa.exports=S2.Konva;var C2=Pa.exports;const Pt=w0(C2);function Qr(e){if(!Pt.autoDrawEnabled){const t=e.getLayer()||e.getStage();t&&t.batchDraw()}}const sl={key:!0,style:!0,elm:!0,isRootInsert:!0},Ns=".vue-konva-event";function Yh(e,t,i,r){const n=e.__konvaNode,s={};let a=!1;for(let o in i){if(sl.hasOwnProperty(o))continue;const l=o.slice(0,2)==="on",h=i[o]!==t[o];if(l&&h){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),n==null||n.off(c+Ns,i[o])}!t.hasOwnProperty(o)&&(n==null||n.setAttr(o,void 0))}for(let o in t){if(sl.hasOwnProperty(o))continue;let l=o.slice(0,2)==="on";const h=i[o]!==t[o];if(l&&h){let c=o.slice(2).toLowerCase();c.slice(0,7)==="content"&&(c="content"+c.slice(7,1).toUpperCase()+c.slice(8)),t[o]&&(n==null||n.off(c+Ns),n==null||n.on(c+Ns,t[o]))}!l&&(t[o]!==i[o]||r&&t[o]!==(n==null?void 0:n.getAttr(o)))&&(a=!0,s[o]=t[o])}a&&n&&(n.setAttrs(s),Qr(n))}const w2="v";function x2(e){function t(i){return i!=null&&i.__konvaNode?i:i!=null&&i.parent?t(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return t(e.parent)}function Xh(e){return e.component?e.component.__konvaNode||Xh(e.component.subTree):null}function P2(e){const{el:t,component:i}=e,r=Xh(e);if(t!=null&&t.tagName&&i&&!r){const n=t.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${n}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return r}function T2(e){const t=n=>!!(n!=null&&n.hasOwnProperty("component")),i=n=>Array.isArray(n),r=n=>t(n)?[n,...r(n.children)]:i(n)?n.flatMap(r):[];return r(e.children)}function qh(e,t){const i=T2(e),r=[];i.forEach(s=>{const a=P2(s);a&&r.push(a)});let n=!1;r.forEach((s,a)=>{s.getZIndex()!==a&&(s.setZIndex(a),n=!0)}),n&&Qr(t)}const E2=di({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(e,{attrs:t,slots:i,expose:r}){const n=xa();if(!n)return;const s=pr({}),a=_t(null),o=new Pt.Stage({width:e.config.width,height:e.config.height,container:document.createElement("div")});n.__konvaNode=o,c();function l(){return n==null?void 0:n.__konvaNode}function h(){return n==null?void 0:n.__konvaNode}function c(){if(!n)return;const p=s||{},f={...t,...e.config};Yh(n,f,p,e.__useStrictMode),Object.assign(s,f)}return Li(()=>{a.value&&(a.value.innerHTML="",o.container(a.value)),c()}),ya(()=>{c(),qh(n.subTree,o)}),ba(()=>{o.destroy()}),Di(()=>e.config,c,{deep:!0}),r({getStage:h,getNode:l}),()=>{var p;return lh("div",{ref:a},(p=i.default)==null?void 0:p.call(i))}}}),A2=".vue-konva-event",F2={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function R2(e,t){return di({name:e,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:r,slots:n,expose:s}){const a=xa();if(!a)return;const o=pr({}),l=new t;a.__konvaNode=l,a.vnode.__konvaNode=l,p();function h(){return a==null?void 0:a.__konvaNode}function c(){return a==null?void 0:a.__konvaNode}function p(){if(!a)return;const g={};for(const y in a==null?void 0:a.vnode.props)y.slice(0,2)==="on"&&(g[y]=a.vnode.props[y]);const d=o||{},_={...r,...i.config,...g};Yh(a,_,d,i.__useStrictMode),Object.assign(o,_)}Li(()=>{var g;const d=(g=x2(a))==null?void 0:g.__konvaNode;d&&"add"in d&&d.add(l),Qr(l)}),un(()=>{Qr(l),l.destroy(),l.off(A2)}),ya(()=>{p(),qh(a.subTree,l)}),Di(()=>i.config,p,{deep:!0}),s({getStage:c,getNode:h});const f=F2.hasOwnProperty(e);return()=>{var g;return f?lh("template",{},(g=n.default)==null?void 0:g.call(n)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const M2={install:(e,t)=>{const i=(t==null?void 0:t.prefix)||w2,r={Arc:Pt.Arc,Arrow:Pt.Arrow,Circle:Pt.Circle,Ellipse:Pt.Ellipse,FastLayer:Pt.FastLayer,Group:Pt.Group,Image:Pt.Image,Label:Pt.Label,Layer:Pt.Layer,Line:Pt.Line,Path:Pt.Path,Rect:Pt.Rect,RegularPolygon:Pt.RegularPolygon,Ring:Pt.Ring,Shape:Pt.Shape,Sprite:Pt.Sprite,Star:Pt.Star,Tag:Pt.Tag,Text:Pt.Text,TextPath:Pt.TextPath,Transformer:Pt.Transformer,Wedge:Pt.Wedge,...t==null?void 0:t.customNodes};[E2,...Object.entries(r).map(([n,s])=>R2(n,s))].forEach(n=>{e.component(`${i}${n.name}`,n)})}};function N2(e){return pl()?(uc(e),!0):!1}function Zr(e){return typeof e=="function"?e():Ai(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const tn=()=>{};function Jh(e,t){function i(...r){return new Promise((n,s)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(n).catch(s)})}return i}function O2(e,t={}){let i,r,n=tn;const s=o=>{clearTimeout(o),n(),n=tn};return o=>{const l=Zr(e),h=Zr(t.maxWait);return i&&s(i),l<=0||h!==void 0&&h<=0?(r&&(s(r),r=null),Promise.resolve(o())):new Promise((c,p)=>{n=t.rejectOnCancel?p:c,h&&!r&&(r=setTimeout(()=>{i&&s(i),r=null,c(o())},h)),i=setTimeout(()=>{r&&s(r),r=null,c(o())},l)})}}function k2(...e){let t=0,i,r=!0,n=tn,s,a,o,l,h;!jt(e[0])&&typeof e[0]=="object"?{delay:a,trailing:o=!0,leading:l=!0,rejectOnCancel:h=!1}=e[0]:[a,o=!0,l=!0,h=!1]=e;const c=()=>{i&&(clearTimeout(i),i=void 0,n(),n=tn)};return f=>{const g=Zr(a),d=Date.now()-t,_=()=>s=f();return c(),g<=0?(t=Date.now(),_()):(d>g&&(l||!r)?(t=Date.now(),_()):o&&(s=new Promise((y,S)=>{n=h?S:y,i=setTimeout(()=>{t=Date.now(),r=!0,y(_()),c()},Math.max(0,g-d))})),!l&&!i&&(i=setTimeout(()=>r=!0,g)),r=!1,s)}}function Os(e,t=200,i={}){return Jh(O2(t,i),e)}function D2(e,t=200,i=!1,r=!0,n=!1){return Jh(k2(t,i,r,n),e)}function L2(e){const t=_t(),i=()=>{t.value&&URL.revokeObjectURL(t.value),t.value=void 0};return Di(()=>Zr(e),r=>{i(),r&&(t.value=URL.createObjectURL(r))},{immediate:!0}),N2(i),fa(t)}const G2={key:0,class:"loader"},I2=di({__name:"Button",props:{disabled:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},full:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},variant:{default:"primary"},nameDisableClass:{}},setup(e){const t=e,i=Ce(()=>t.loading?"transparent":""),r=Ce(()=>({loading:t.loading})),n=Ce(()=>t.disabled?t.nameDisableClass?`${t.nameDisableClass} disabled`:"disabled":""),s=Ce(()=>({button__content_icon:t.onlyIcon})),a=Ce(()=>({button__content_circle:t.rounded})),o=Ce(()=>({button__content_full:t.full})),l=Ce(()=>`button__content_${t.variant}`);return(h,c)=>(kt(),te("button",{style:gr({color:i.value}),class:an(["button","button__content",l.value,o.value,a.value,s.value,r.value,n.value])},[au(h.$slots,"default",{},void 0),h.loading?(kt(),te("div",G2,c[0]||(c[0]=[it("div",{class:"lds-dual-ring"},null,-1)]))):be("",!0)],6))}}),hs=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i},Yt=hs(I2,[["__scopeId","data-v-2ca81282"]]),U2={class:"lds-ring"},B2=di({__name:"Loader",props:{widthProp:{default:"24px"},heightProp:{default:"24px"},borderProp:{default:"2px"}},setup(e){r0(s=>({"5808cb03":i.value,e17cc8ec:r.value,f4d502e2:n.value}));const t=e,i=_t(t.widthProp),r=_t(t.heightProp),n=_t(t.borderProp);return(s,a)=>(kt(),te("div",U2,a[0]||(a[0]=[it("div",null,null,-1),it("div",null,null,-1),it("div",null,null,-1),it("div",null,null,-1)])))}}),V2=hs(B2,[["__scopeId","data-v-9aa5e589"]]),$2={class:"slidecontainer relative flex"},H2={class:"pointer-events-none absolute flex w-full justify-center"},W2=["min","max","step"],j2=di({__name:"Slider",props:{modelValue:{},min:{},max:{},step:{}},setup(e){const t=e,i=_t(),r=_t(),n=Ce(()=>{var o;return`${Math.abs(a.value/(t.max/100)/100*(((o=r.value)==null?void 0:o.clientWidth)/2))}px`}),s=Ce(()=>{var o,l;return a.value>=0?`0 0 0 ${Math.abs(a.value/(Math.abs(t.min)/100)/100*(((o=r.value)==null?void 0:o.clientWidth)/2))}px`:`0 ${Math.abs(a.value/(Math.abs(t.max)/100)/100*(((l=r.value)==null?void 0:l.clientWidth)/2))}px 0 0`}),a=_t(t.modelValue);return(o,l)=>(kt(),te("div",$2,[it("div",H2,[it("div",{ref_key:"progress",ref:i,class:"fillLeft h-1 bg-primary",style:gr({width:n.value,margin:s.value})},null,4)]),Ll(it("input",{type:"range",min:o.min,max:o.max,step:o.step,"onUpdate:modelValue":l[0]||(l[0]=h=>a.value=h),class:"slider",id:"myRange",ref_key:"range",ref:r,onInput:l[1]||(l[1]=h=>o.$emit("update:modelValue",Number(h.target.value)))},null,40,W2),[[_0,a.value]])]))}}),ks=hs(j2,[["__scopeId","data-v-163c443a"]]),z2={class:"h-full w-full"},K2={class:"mb-6 flex items-start justify-between xs:mb-5"},Y2={style:{display:"flex",gap:"8px","align-items":"center"}},X2={style:{display:"flex",gap:"4px",top:"10px"}},q2={class:"flex w-full flex-col gap-6"},J2={class:"flex gap-2"},Q2={class:"block md:hidden"},Z2={class:"flex h-[520px] gap-6 md:h-full sm:flex-col xs:gap-5"},tg={class:"flex max-w-[240px] flex-col sm:w-full sm:max-w-full"},eg={key:0,class:"flex flex-col gap-8"},ig={class:"flex min-w-32 flex-col gap-4 w-max"},rg={class:"flex w-[200px] flex-col gap-1.5 xs:w-[160px]"},ng={class:"flex w-[200px] flex-col gap-1.5 xs:w-[160px]"},sg={class:"flex w-[200px] flex-col gap-1.5 xs:w-[160px]"},ag={key:1,class:"flex flex-col gap-8"},og={class:"flex min-w-32 flex-col gap-2"},lg={key:2,class:"flex flex-col gap-8"},hg={class:"flex min-w-32 flex-col gap-2"},cg={key:3,class:"flex flex-col gap-8"},ug={class:"flex min-w-32 flex-col gap-2"},dg={key:4,class:"flex flex-col gap-8 overflow-y-auto overflow-hidden"},fg={class:"flex justify-start"},gg={class:"w-max"},pg=["onClick"],vg={class:"sticky !bottom-0 mt-auto flex w-full gap-2 bg-white pb-10 sm:py-7 xs:py-5"},_g=di({__name:"PhotoEditor",props:{defImg:{},root:{},innerWidth:{}},emits:["saveImage","close"],setup(e){const t=e,i=_t(0),r=_t(0),n=_t(0),s=_t(!1),a=_t(null),o=_t(),l=_t(),h=_t(),c=_t(),p=_t(),f=_t(),g=_t(!1),d=_t(!1),_=_t(0),y=_t([]),S=_t("Настройки цвета"),x=_t(0),u=_t(),v=_t({width:400,height:400}),b=_t({x:0,y:0,image:new Image,width:0,height:0,rotation:0,offsetX:0,offsetY:0,filters:[Pt.Filters.Brighten,Pt.Filters.Contrast],brightness:0,contrast:0,saturation:0});var T=_t({x:0,y:0,width:0,height:0,offsetX:0,offsetY:0,fill:"transparent",strokeWidth:1,strokeScaleEnabled:!0,draggable:!0});let N=_t({nodes:[],centeredScaling:!1,rotateEnabled:!1,keepRatio:!1,anchorStyleFunc:V=>{V.cornerRadius(10),V.attrs.stroke="transparent",V.attrs.fill="#3B82F6",V.attrs.opacity=1}});const w=()=>{a.value&&u.value&&(b.value.width=a.value.width,b.value.height=a.value.height,v.value.width=u.value.clientWidth,v.value.height=u.value.clientHeight,b.value.x=v.value.width/2,b.value.y=v.value.height/2,b.value.rotation=0,b.value.offsetX=b.value.width/2,b.value.offsetY=b.value.height/2)},M=()=>{a.value&&u.value&&(u.value.clientHeight>a.value.height&&u.value.clientWidth>a.value.width?(c.value.getNode().attrs.scaleX=1,c.value.getNode().attrs.scaleY=1):a.value.width>a.value.height&&a.value.height*(u.value.clientWidth/a.value.width)<u.value.clientHeight?(c.value.getNode().attrs.scaleX=u.value.clientWidth/a.value.width,c.value.getNode().attrs.scaleY=u.value.clientWidth/a.value.width):(c.value.getNode().attrs.scaleX=u.value.clientHeight/a.value.height,c.value.getNode().attrs.scaleY=u.value.clientHeight/a.value.height)),c.value.getNode().clearCache()};function E(V){return s.value=!0,new Promise(R=>{a.value=new Image,a.value.src=V,a.value.onload=R})}const F=async V=>{await E(V).then(()=>{a.value&&(b.value.image=a.value)}),s.value=!1,w()},I=(V,R)=>{y.value.push({title:V,src:R,date:Number(new Date)}),x.value=y.value.length-1},U=V=>{x.value!=null&&(V>0&&x.value>y.value.length||V<0&&x.value<0||(x.value+=V,Z(x.value)))},Z=async V=>{x.value!=null&&(await F(y.value[V].src),M())},j=()=>{(_.value==4||d.value==!0)&&y.value.length>1&&x.value!=null&&y.value.splice(x.value+1)},K=(V,R)=>{j(),console.log(R),console.log(S.value),d.value&&mt(),_.value=V,S.value=R,d.value=!1};function J(){T.value.width=b.value.width*c.value.getNode().scaleX(),T.value.height=b.value.height*c.value.getNode().scaleY(),T.value.x=(v.value.width-T.value.width)/2,T.value.y=(v.value.height-T.value.height)/2,g.value=!0}const q=D2(V=>{V=="x"?c.value.getNode().to({scaleX:-c.value.getNode().scaleX()}):c.value.getNode().to({scaleY:-c.value.getNode().scaleY()})},1e3),dt=V=>{var R;if(b.value.rotation+=V,b.value.rotation>=360&&(b.value.rotation=0),a.value){const P=a.value.width;a.value.width=(R=a.value)==null?void 0:R.height,a.value.height=P,M()}},Y=Os(V=>{c.value.getNode().attrs.brightness=V,bt()},100),X=Os(V=>{c.value.getNode().attrs.contrast=V,bt()},100),nt=Os(V=>{c.value.getNode().attrs.saturation=V,bt()},100);function bt(){c.value.getNode().filters([Pt.Filters.Brighten,Pt.Filters.Contrast,Pt.Filters.HSL]),c.value.getNode().cache(),c.value.getNode().getLayer().batchDraw()}async function mt(){const V=c.value.getNode(),R=V.attrs.scaleX,P=V.attrs.scaleY;V.attrs.scaleX<0?V.attrs.scaleX=-1:V.attrs.scaleX=1,V.attrs.scaleY<0?V.attrs.scaleY=-1:V.attrs.scaleY=1;let k;if(p.value){V.clearCache();const H=p.value.getNode(),ht={x:(H.x()-(v.value.width-T.value.width)/2)/R+V.x()-b.value.offsetX,y:(H.y()-(v.value.height-T.value.height)/2)/P+V.y()-b.value.offsetY,width:H.width()/R,height:H.height()/P,mimeType:"image/jpeg",imageSmoothingEnabled:!1};k=V.toDataURL(ht)}else{const H={saturation:c.value.getNode().attrs.saturation,contrast:c.value.getNode().attrs.contrast,brightness:c.value.getNode().attrs.brightness};V.clearCache(),c.value.getNode().attrs.brightness=H.brightness,c.value.getNode().attrs.contrast=H.contrast,c.value.getNode().attrs.saturation=H.saturation,bt(),k=V.toDataURL({mimeType:"image/jpeg",imageSmoothingEnabled:!1})}g.value=!1,I(S.value,k),await F(k),i.value=0,r.value=0,n.value=0,V.getLayer().batchDraw(),M()}return Li(async()=>{var V;await F(t.defImg),I("Оригинал",(V=a.value)==null?void 0:V.src),S.value="Настройки цвета",M()}),Li(()=>{const V=new ResizeObserver(R=>{for(const P of R)M()});t.root&&V.observe(t.root),window.addEventListener("resize",M),ba(()=>{t.root&&V.unobserve(t.root),window.removeEventListener("resize",M)})}),ro(()=>{f.value&&(N.value.nodes=[f.value.getNode()]),f.value&&f.value.getNode&&(h.value.getNode().clipFunc(function(V){var R,P,k,H,ht;V.beginPath(),V.rect(0,0,(R=o.value)==null?void 0:R.getNode().width(),o.value.getNode().height()),V.rect((P=f.value)==null?void 0:P.getNode().x(),(k=f.value)==null?void 0:k.getNode().y(),(H=f.value)==null?void 0:H.getNode().width(),(ht=f.value)==null?void 0:ht.getNode().height()),V.closePath(),V.fillStyle="rgba(0, 0, 0, 0.5)",V.fill("evenodd")}),c.value.getNode().getLayer().batchDraw(),f.value.getNode().on("transform",()=>{var H,ht,ft,wt,m,C,A,D;var V=(H=f.value)==null?void 0:H.getNode().scaleX(),R=(ht=f.value)==null?void 0:ht.getNode().scaleY(),P=((ft=f.value)==null?void 0:ft.getNode().width())*V,k=((wt=f.value)==null?void 0:wt.getNode().height())*R;(m=f.value)==null||m.getNode().width(P),(C=f.value)==null||C.getNode().height(k),(A=f.value)==null||A.getNode().scaleX(1),(D=f.value)==null||D.getNode().scaleY(1),c.value.getNode().getLayer().batchDraw()}))}),ro(()=>{Y(i.value),i.value!=0&&(d.value=!0),X(r.value),r.value!=0&&(d.value=!0),nt(n.value),n.value!=0&&(d.value=!0)}),(V,R)=>{const P=Ci("Icon"),k=Ci("v-image"),H=Ci("v-layer"),ht=Ci("v-rect"),ft=Ci("v-transformer"),wt=Ci("v-stage");return kt(),te("div",z2,[it("div",K2,[it("div",Y2,[R[21]||(R[21]=it("h2",{class:"text-xl font-bold xs:text-base"},[fe(" Редактирование "),it("span",{class:"inline-block xs:hidden"}," фото ")],-1)),it("div",X2,[at(Yt,{onClick:R[0]||(R[0]=m=>U(-1)),disabled:y.value.length<=1||x.value==0,"only-icon":"",variant:"light-gray"},{default:It(()=>R[19]||(R[19]=[it("span",null," < ",-1)])),_:1},8,["disabled"]),at(Yt,{onClick:R[1]||(R[1]=m=>U(1)),disabled:y.value.length<=1||x.value==y.value.length-1,style:{transform:"scale(-1, 1)"},"only-icon":"",variant:"light-gray"},{default:It(()=>R[20]||(R[20]=[it("span",null," < ",-1)])),_:1},8,["disabled"])])]),at(P,{onClick:R[2]||(R[2]=m=>V.$emit("close")),name:"close",class:"h-5 w-5 transition-all hover:text-primary"})]),it("div",q2,[it("div",J2,[at(Yt,{onClick:R[3]||(R[3]=m=>K(0,"Настройки цвета")),variant:_.value==0?"light-blue-outline":"secondary-outline"},{default:It(()=>R[22]||(R[22]=[it("span",{class:"block xs:hidden"}," Настройки цвета ",-1)])),_:1},8,["variant"]),at(Yt,{onClick:R[4]||(R[4]=m=>K(1,"Поворот")),variant:_.value==1?"light-blue-outline":"secondary-outline"},{default:It(()=>R[23]||(R[23]=[it("span",{class:"block xs:hidden"}," Поворот ",-1)])),_:1},8,["variant"]),at(Yt,{onClick:R[5]||(R[5]=m=>K(2,"Кадрирование")),variant:_.value==2?"light-blue-outline":"secondary-outline"},{default:It(()=>R[24]||(R[24]=[it("span",{class:"block xs:hidden"}," Кадрирование ",-1)])),_:1},8,["variant"]),at(Yt,{onClick:R[6]||(R[6]=m=>K(3,"Отражение")),variant:_.value==3?"light-blue-outline":"secondary-outline"},{default:It(()=>R[25]||(R[25]=[it("span",{class:"block xs:hidden"}," Отражение ",-1)])),_:1},8,["variant"]),it("div",Q2,[at(Yt,{onClick:R[7]||(R[7]=m=>K(4,"История")),variant:_.value==4?"light-blue-outline":"secondary-outline"},{default:It(()=>R[26]||(R[26]=[it("span",{class:"block xs:hidden"}," История ",-1)])),_:1},8,["variant"])])]),it("div",Z2,[it("div",{ref_key:"stageWrapper",ref:u,class:"flex h-full w-full max-w-[800px] items-center justify-center border-gray-300 bg-gray-600 sm:h-[400px] xs:h-[200px]"},[s.value?(kt(),oi(V2,{key:0})):be("",!0),Ll(at(wt,{ref_key:"stageRef",ref:o,config:v.value},{default:It(()=>[at(H,{ref_key:"layerRef",ref:l},{default:It(()=>[at(k,{ref_key:"imageNode",ref:c,config:b.value},null,8,["config"])]),_:1},512),g.value?(kt(),oi(H,{key:0,ref_key:"dimLayer",ref:h},{default:It(()=>[g.value?(kt(),oi(ht,{key:0,ref_key:"rectRef",ref:f,config:Ai(T)},null,8,["config"])):be("",!0),g.value?(kt(),oi(ft,{key:1,ref_key:"tranRef",ref:p,config:Ai(N)},null,8,["config"])):be("",!0)]),_:1},512)):be("",!0)]),_:1},8,["config"]),[[i0,!s.value]])],512),it("div",tg,[_.value==0?(kt(),te("div",eg,[R[30]||(R[30]=it("div",{class:"text-lg font-semibold sm:hidden"},"Настройки цвета",-1)),it("div",ig,[it("div",rg,[R[27]||(R[27]=it("span",{class:"xs:text-xs"}," Насыщенность ",-1)),at(ks,{modelValue:n.value,"onUpdate:modelValue":R[8]||(R[8]=m=>n.value=m),min:-2,max:2,step:.1},null,8,["modelValue"])]),it("div",ng,[R[28]||(R[28]=it("span",{class:"xs:text-xs"}," Яркость ",-1)),at(ks,{modelValue:i.value,"onUpdate:modelValue":R[9]||(R[9]=m=>i.value=m),min:-1,max:1,step:.01},null,8,["modelValue"])]),it("div",sg,[R[29]||(R[29]=it("span",{class:"xs:text-xs"}," Контраст ",-1)),at(ks,{modelValue:r.value,"onUpdate:modelValue":R[10]||(R[10]=m=>r.value=m),min:-100,max:100,step:1},null,8,["modelValue"])])])])):be("",!0),_.value==1?(kt(),te("div",ag,[R[33]||(R[33]=it("div",{class:"text-lg font-semibold sm:hidden"},"Поворот",-1)),it("div",og,[at(Yt,{class:"default min-w-fit",onClick:R[11]||(R[11]=m=>(d.value=!0,dt(90))),variant:"light-outline",style:{color:"#282b2e"}},{default:It(()=>[at(P,{name:"reload",color:"#3B82F6",style:{transform:"scale(-1, 1)"}}),R[31]||(R[31]=fe(" Вправо на 90° "))]),_:1}),at(Yt,{class:"default",onClick:R[12]||(R[12]=m=>(d.value=!0,dt(-90))),variant:"light-outline",style:{color:"#282b2e"}},{default:It(()=>[at(P,{color:"#3B82F6",name:"reload"}),R[32]||(R[32]=fe(" Влево на 90° "))]),_:1})])])):be("",!0),_.value==2?(kt(),te("div",lg,[R[36]||(R[36]=it("div",{class:"text-lg font-semibold sm:hidden"},"Кадрирование",-1)),it("div",hg,[at(Yt,{class:"default",onClick:R[13]||(R[13]=m=>(J(),d.value=!0)),variant:"light-outline",style:{color:"#282b2e"}},{default:It(()=>[at(P,{color:"#3B82F6",name:"minimize"}),R[34]||(R[34]=fe(" Кадрировать "))]),_:1}),at(Yt,{class:"default",onClick:R[14]||(R[14]=m=>K(2,"Обрезка")),variant:"light-outline",style:{color:"#282b2e"}},{default:It(()=>[at(P,{color:"#3B82F6",name:"success"}),R[35]||(R[35]=fe(" Применить "))]),_:1})])])):be("",!0),_.value==3?(kt(),te("div",cg,[R[39]||(R[39]=it("div",{class:"text-lg font-semibold sm:hidden"},"Отражение",-1)),it("div",ug,[at(Yt,{class:"default",onClick:R[15]||(R[15]=m=>(Ai(q)("x"),d.value=!0)),variant:"light-outline",style:{color:"#282b2e"}},{default:It(()=>[at(P,{color:"#3B82F6",name:"flip",class:"rotate-90"}),R[37]||(R[37]=fe(" По горизонтали "))]),_:1}),at(Yt,{class:"default",onClick:R[16]||(R[16]=m=>(Ai(q)("y"),d.value=!0)),variant:"light-outline",style:{color:"#282b2e"}},{default:It(()=>[at(P,{color:"#3B82F6",name:"flip"}),R[38]||(R[38]=fe(" По вертикали "))]),_:1})])])):be("",!0),_.value==4?(kt(),te("div",dg,[R[40]||(R[40]=it("span",{class:"text-lg font-semibold sm:hidden"},"История",-1)),(kt(!0),te(ie,null,su(y.value,(m,C)=>(kt(),te("div",{class:"flex flex-col gap-2 border-b border-b-gray-400 pb-4",key:m.date},[it("div",fg,[at(P,{color:"#D7D7D7",name:"clock"}),it("span",null,Ls(`${new Date(m.date).getHours()}:${String(new Date(m.date).getMinutes()).length==1?"0"+new Date(m.date).getMinutes():new Date(m.date).getMinutes()}`),1)]),it("span",gg,Ls(m.title),1),it("span",{class:"text-[#3b82f6] border-b border-dashed border-[#3b82f6] w-max cursor-pointer",onClick:A=>(Z(C),x.value=C)}," Вернуть ",8,pg)]))),128))])):be("",!0)])]),it("div",vg,[at(Yt,{onClick:R[17]||(R[17]=m=>(mt(),V.$emit("saveImage",a.value)))},{default:It(()=>R[41]||(R[41]=[fe(" Сохранить ")])),_:1}),at(Yt,{onClick:R[18]||(R[18]=m=>V.$emit("close")),variant:"light-gray",style:{color:"#3b82f6"}},{default:It(()=>R[42]||(R[42]=[fe("Отмена")])),_:1})])])])}}}),mg=hs(_g,[["__scopeId","data-v-c62d2ac8"]]),yg={class:"flex justify-center align-middle"},bg={key:0,class:"w-full h-screen flex justify-center items-center"},Sg={key:1,class:"!h-[800px] !pb-0 rounded-3xl bg-white w-full !max-w-[1152px] px-11 py-10 sm:p-7 md:rounded-none md:!h-full md:!w-full"},Cg=di({__name:"App",setup(e){const t=_t(),i=_t(!1),r=_t();function n(){r.value.click()}function s(l){i.value=!1,t.value=L2(l.target.files[0]).value,l.target.value="",i.value=!0}const a=(l,h)=>{const c=document.createElement("a");c.setAttribute("href",h),c.setAttribute("download",l),c.setAttribute("target","_blank"),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)},o=l=>{console.log(l.src),a("file",l.src)};return(l,h)=>(kt(),te("div",yg,[i.value?(kt(),te("div",Sg,[at(mg,{"def-img":t.value,onSaveImage:h[0]||(h[0]=c=>o(c)),onClose:h[1]||(h[1]=c=>(t.value=null,i.value=!1))},null,8,["def-img"])])):(kt(),te("div",bg,[at(Yt,{onClick:n},{default:It(()=>h[2]||(h[2]=[fe("Загрузить фото")])),_:1}),it("input",{type:"file",id:"files",ref_key:"filesRef",ref:r,accept:"image/*",style:{display:"none"},onChange:s},null,544)]))]))}}),Qh=b0(Cg);Qh.use(M2);Qh.mount("#app");
